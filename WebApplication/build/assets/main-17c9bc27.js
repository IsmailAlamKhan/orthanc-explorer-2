import{_ as _export_sfc,r as resolveComponent,o as openBlock,c as createElementBlock,a as createBaseVNode,b as createVNode,s as shallowRef,u as unref,d as shallowReactive,n as nextTick,e as defineComponent,f as reactive,i as inject,g as computed,h,p as provide,j as ref,w as watch,k as api,m as mapState,t as toDisplayString,l as normalizeClass,q as createTextVNode,F as Fragment,v as renderList,x as createCommentVNode,y as renderSlot,z as withDirectives,A as vModelSelect,B as vModelText,C as vModelRadio,D as normalizeStyle,E as commonjsGlobal,G as getDefaultExportFromCjs,H as bootstrap,I as createBlock,J as pushScopeId,K as popScopeId,L as translateDicomTag,M as withCtx,N as vModelCheckbox,O as vShow,P as mapGetters,Q as withKeys,R as orthancApiUrl,S as baseOe2Url,T as useSlots,U as toRef,V as onMounted,W as onUnmounted,X as createSlots,Y as normalizeProps,Z as guardReactiveProps,$ as mergeProps,a0 as isRef,a1 as resolveDynamicComponent,a2 as Teleport,a3 as withModifiers,a4 as Transition,a5 as onBeforeUpdate,a6 as getCurrentScope,a7 as onScopeDispose,a8 as axios,a9 as createApp,aa as store,ab as i18n}from"./index-bff01d9e.js";const App_vue_vue_type_style_index_0_lang="",_sfc_main$t={async created(){console.log("Creating App..."),await this.$store.dispatch("configuration/load"),await this.$store.dispatch("studies/initialLoad"),await this.$store.dispatch("labels/refresh"),console.log("App created")}},_hoisted_1$t={class:"full-page"},_hoisted_2$s={class:"nav-side-layout"},_hoisted_3$q={class:"content"};function _sfc_render$t(e,t,r,n,a,o){const l=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$t,[createBaseVNode("div",_hoisted_2$s,[createVNode(l,{name:"SideBarView"})]),createBaseVNode("div",_hoisted_3$q,[createVNode(l,{name:"ContentView"})])])}const App=_export_sfc(_sfc_main$t,[["render",_sfc_render$t]]),_variables="",layout="",common="";/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams(e,t){const r={};for(const n in t){const a=t[n];r[n]=isArray(a)?a.map(e):e(a)}return r}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,r="/"){let n,a={},o="",l="";const f=t.indexOf("#");let m=t.indexOf("?");return f<m&&f>=0&&(m=-1),m>-1&&(n=t.slice(0,m),o=t.slice(m+1,f>-1?f:t.length),a=e(o)),f>-1&&(n=n||t.slice(0,f),l=t.slice(f,t.length)),n=resolveRelativePath(n??t,r),{fullPath:n+(o&&"?")+o+l,path:n,query:a,hash:l}}function stringifyURL(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,r){const n=t.matched.length-1,a=r.matched.length-1;return n>-1&&n===a&&isSameRouteRecord(t.matched[n],r.matched[a])&&isSameRouteLocationParams(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!isSameRouteLocationParamsValue(e[r],t[r]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),a=n[n.length-1];(a===".."||a===".")&&n.push("");let o=r.length-1,l,f;for(l=0;l<n.length;l++)if(f=n[l],f!==".")if(f==="..")o>1&&o--;else break;return r.slice(0,o).join("/")+"/"+n.slice(l-(l===n.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),a=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!a)return;t=getElementPosition(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:r,search:n,hash:a}=t,o=e.indexOf("#");if(o>-1){let f=a.includes(e.slice(o))?e.slice(o).length:1,m=a.slice(f);return m[0]!=="/"&&(m="/"+m),stripBase(m,"")}return stripBase(r,e)+n+a}function useHistoryListeners(e,t,r,n){let a=[],o=[],l=null;const f=({state:D})=>{const x=createCurrentLocation(e,location),A=r.value,H=t.value;let Q=0;if(D){if(r.value=x,t.value=D,l&&l===A){l=null;return}Q=H?D.position-H.position:0}else n(x);a.forEach(q=>{q(r.value,A,{delta:Q,type:NavigationType.pop,direction:Q?Q>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function m(){l=r.value}function _(D){a.push(D);const x=()=>{const A=a.indexOf(D);A>-1&&a.splice(A,1)};return o.push(x),x}function b(){const{history:D}=window;D.state&&D.replaceState(assign$1({},D.state,{scroll:computeScrollPosition()}),"")}function k(){for(const D of o)D();o=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:m,listen:_,destroy:k}}function buildState(e,t,r,n=!1,a=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:a?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:r}=window,n={value:createCurrentLocation(e,r)},a={value:t.state};a.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(m,_,b){const k=e.indexOf("#"),D=k>-1?(r.host&&document.querySelector("base")?e:e.slice(k))+m:createBaseLocation()+e+m;try{t[b?"replaceState":"pushState"](_,"",D),a.value=_}catch(x){console.error(x),r[b?"replace":"assign"](D)}}function l(m,_){const b=assign$1({},t.state,buildState(a.value.back,m,a.value.forward,!0),_,{position:a.value.position});o(m,b,!0),n.value=m}function f(m,_){const b=assign$1({},a.value,t.state,{forward:m,scroll:computeScrollPosition()});o(b.current,b,!0);const k=assign$1({},buildState(n.value,m,null),{position:b.position+1},_);o(m,k,!1),n.value=m}return{location:n,state:a,push:f,replace:l}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),r=useHistoryListeners(e,t.state,t.location,t.replace);function n(o,l=!0){l||r.pauseListeners(),history.go(o)}const a=assign$1({location:"",base:e,go:n,createHref:createHref.bind(null,e)},t,r);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign$1(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const r=assign$1({},BASE_PATH_PARSER_OPTIONS,t),n=[];let a=r.start?"^":"";const o=[];for(const _ of e){const b=_.length?[]:[90];r.strict&&!_.length&&(a+="/");for(let k=0;k<_.length;k++){const D=_[k];let x=40+(r.sensitive?.25:0);if(D.type===0)k||(a+="/"),a+=D.value.replace(REGEX_CHARS_RE,"\\$&"),x+=40;else if(D.type===1){const{value:A,repeatable:H,optional:Q,regexp:q}=D;o.push({name:A,repeatable:H,optional:Q});const j=q||BASE_PARAM_PATTERN;if(j!==BASE_PARAM_PATTERN){x+=10;try{new RegExp(`(${j})`)}catch(ge){throw new Error(`Invalid custom RegExp for param "${A}" (${j}): `+ge.message)}}let de=H?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;k||(de=Q&&_.length<2?`(?:/${de})`:"/"+de),Q&&(de+="?"),a+=de,x+=20,Q&&(x+=-8),H&&(x+=-20),j===".*"&&(x+=-50)}b.push(x)}n.push(b)}if(r.strict&&r.end){const _=n.length-1;n[_][n[_].length-1]+=.7000000000000001}r.strict||(a+="/?"),r.end?a+="$":r.strict&&(a+="(?:/|$)");const l=new RegExp(a,r.sensitive?"":"i");function f(_){const b=_.match(l),k={};if(!b)return null;for(let D=1;D<b.length;D++){const x=b[D]||"",A=o[D-1];k[A.name]=x&&A.repeatable?x.split("/"):x}return k}function m(_){let b="",k=!1;for(const D of e){(!k||!b.endsWith("/"))&&(b+="/"),k=!1;for(const x of D)if(x.type===0)b+=x.value;else if(x.type===1){const{value:A,repeatable:H,optional:Q}=x,q=A in _?_[A]:"";if(isArray(q)&&!H)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const j=isArray(q)?q.join("/"):q;if(!j)if(Q)D.length<2&&(b.endsWith("/")?b=b.slice(0,-1):k=!0);else throw new Error(`Missing required param "${A}"`);b+=j}}return b||"/"}return{re:l,score:n,keys:o,parse:f,stringify:m}}function compareScoreArray(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let r=0;const n=e.score,a=t.score;for(;r<n.length&&r<a.length;){const o=compareScoreArray(n[r],a[r]);if(o)return o;r++}if(Math.abs(a.length-n.length)===1){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(a))return-1}return a.length-n.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${r})/"${_}": ${x}`)}let r=0,n=r;const a=[];let o;function l(){o&&a.push(o),o=[]}let f=0,m,_="",b="";function k(){_&&(r===0?o.push({type:0,value:_}):r===1||r===2||r===3?(o.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:_,regexp:b,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),_="")}function D(){_+=m}for(;f<e.length;){if(m=e[f++],m==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:m==="/"?(_&&k(),l()):m===":"?(k(),r=1):D();break;case 4:D(),r=n;break;case 1:m==="("?r=2:VALID_PARAM_RE.test(m)?D():(k(),r=0,m!=="*"&&m!=="?"&&m!=="+"&&f--);break;case 2:m===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+m:r=3:b+=m;break;case 3:k(),r=0,m!=="*"&&m!=="?"&&m!=="+"&&f--,b="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${_}"`),k(),l(),a}function createRouteRecordMatcher(e,t,r){const n=tokensToParser(tokenizePath(e.path),r),a=assign$1(n,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function createRouterMatcher(e,t){const r=[],n=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function a(b){return n.get(b)}function o(b,k,D){const x=!D,A=normalizeRouteRecord(b);A.aliasOf=D&&D.record;const H=mergeOptions(t,b),Q=[A];if("alias"in b){const de=typeof b.alias=="string"?[b.alias]:b.alias;for(const ge of de)Q.push(assign$1({},A,{components:D?D.record.components:A.components,path:ge,aliasOf:D?D.record:A}))}let q,j;for(const de of Q){const{path:ge}=de;if(k&&ge[0]!=="/"){const ye=k.record.path,Te=ye[ye.length-1]==="/"?"":"/";de.path=k.record.path+(ge&&Te+ge)}if(q=createRouteRecordMatcher(de,k,H),D?D.alias.push(q):(j=j||q,j!==q&&j.alias.push(q),x&&b.name&&!isAliasRecord(q)&&l(b.name)),A.children){const ye=A.children;for(let Te=0;Te<ye.length;Te++)o(ye[Te],q,D&&D.children[Te])}D=D||q,(q.record.components&&Object.keys(q.record.components).length||q.record.name||q.record.redirect)&&m(q)}return j?()=>{l(j)}:noop}function l(b){if(isRouteName(b)){const k=n.get(b);k&&(n.delete(b),r.splice(r.indexOf(k),1),k.children.forEach(l),k.alias.forEach(l))}else{const k=r.indexOf(b);k>-1&&(r.splice(k,1),b.record.name&&n.delete(b.record.name),b.children.forEach(l),b.alias.forEach(l))}}function f(){return r}function m(b){let k=0;for(;k<r.length&&comparePathParserScore(b,r[k])>=0&&(b.record.path!==r[k].record.path||!isRecordChildOf(b,r[k]));)k++;r.splice(k,0,b),b.record.name&&!isAliasRecord(b)&&n.set(b.record.name,b)}function _(b,k){let D,x={},A,H;if("name"in b&&b.name){if(D=n.get(b.name),!D)throw createRouterError(1,{location:b});H=D.record.name,x=assign$1(paramsFromLocation(k.params,D.keys.filter(j=>!j.optional).map(j=>j.name)),b.params&&paramsFromLocation(b.params,D.keys.map(j=>j.name))),A=D.stringify(x)}else if("path"in b)A=b.path,D=r.find(j=>j.re.test(A)),D&&(x=D.parse(A),H=D.record.name);else{if(D=k.name?n.get(k.name):r.find(j=>j.re.test(k.path)),!D)throw createRouterError(1,{location:b,currentLocation:k});H=D.record.name,x=assign$1({},k.params,b.params),A=D.stringify(x)}const Q=[];let q=D;for(;q;)Q.unshift(q.record),q=q.parent;return{name:H,path:A,params:x,matched:Q,meta:mergeMetaFields(Q)}}return e.forEach(b=>o(b)),{addRoute:o,resolve:_,removeRoute:l,getRoutes:f,getRecordMatcher:a}}function paramsFromLocation(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,r)=>assign$1(t,r.meta),{})}function mergeOptions(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function isRecordChildOf(e,t){return t.children.some(r=>r===e||isRecordChildOf(e,r))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<n.length;++a){const o=n[a].replace(PLUS_RE," "),l=o.indexOf("="),f=decode(l<0?o:o.slice(0,l)),m=l<0?null:decode(o.slice(l+1));if(f in t){let _=t[f];isArray(_)||(_=t[f]=[_]),_.push(m)}else t[f]=m}return t}function stringifyQuery(e){let t="";for(let r in e){const n=e[r];if(r=encodeQueryKey(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(isArray(n)?n.map(o=>o&&encodeQueryValue(o)):[n&&encodeQueryValue(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function normalizeQuery(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=isArray(n)?n.map(a=>a==null?null:""+a):n==null?n:""+n)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(n){return e.push(n),()=>{const a=e.indexOf(n);a>-1&&e.splice(a,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function guardToPromiseFn(e,t,r,n,a){const o=n&&(n.enterCallbacks[a]=n.enterCallbacks[a]||[]);return()=>new Promise((l,f)=>{const m=k=>{k===!1?f(createRouterError(4,{from:r,to:t})):k instanceof Error?f(k):isRouteLocation(k)?f(createRouterError(2,{from:t,to:k})):(o&&n.enterCallbacks[a]===o&&typeof k=="function"&&o.push(k),l())},_=e.call(n&&n.instances[a],t,r,m);let b=Promise.resolve(_);e.length<3&&(b=b.then(m)),b.catch(k=>f(k))})}function extractComponentsGuards(e,t,r,n){const a=[];for(const o of e)for(const l in o.components){let f=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(isRouteComponent(f)){const _=(f.__vccOpts||f)[t];_&&a.push(guardToPromiseFn(_,r,n,o,l))}else{let m=f();a.push(()=>m.then(_=>{if(!_)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const b=isESModule(_)?_.default:_;o.components[l]=b;const D=(b.__vccOpts||b)[t];return D&&guardToPromiseFn(D,r,n,o,l)()}))}}return a}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),r=inject(routeLocationKey),n=computed(()=>t.resolve(unref(e.to))),a=computed(()=>{const{matched:m}=n.value,{length:_}=m,b=m[_-1],k=r.matched;if(!b||!k.length)return-1;const D=k.findIndex(isSameRouteRecord.bind(null,b));if(D>-1)return D;const x=getOriginalPath(m[_-2]);return _>1&&getOriginalPath(b)===x&&k[k.length-1].path!==x?k.findIndex(isSameRouteRecord.bind(null,m[_-2])):D}),o=computed(()=>a.value>-1&&includesParams(r.params,n.value.params)),l=computed(()=>a.value>-1&&a.value===r.matched.length-1&&isSameRouteLocationParams(r.params,n.value.params));function f(m={}){return guardEvent(m)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}return{route:n,href:computed(()=>n.value.href),isActive:o,isExactActive:l,navigate:f}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const r=reactive(useLink(e)),{options:n}=inject(routerKey),a=computed(()=>({[getLinkClass(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:h("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:a.value},o)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const r in t){const n=t[r],a=e[r];if(typeof n=="string"){if(n!==a)return!1}else if(!isArray(a)||a.length!==n.length||n.some((o,l)=>o!==a[l]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,r)=>e??t??r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=inject(routerViewLocationKey),a=computed(()=>e.route||n.value),o=inject(viewDepthKey,0),l=computed(()=>{let _=unref(o);const{matched:b}=a.value;let k;for(;(k=b[_])&&!k.components;)_++;return _}),f=computed(()=>a.value.matched[l.value]);provide(viewDepthKey,computed(()=>l.value+1)),provide(matchedRouteKey,f),provide(routerViewLocationKey,a);const m=ref();return watch(()=>[m.value,f.value,e.name],([_,b,k],[D,x,A])=>{b&&(b.instances[k]=_,x&&x!==b&&_&&_===D&&(b.leaveGuards.size||(b.leaveGuards=x.leaveGuards),b.updateGuards.size||(b.updateGuards=x.updateGuards))),_&&b&&(!x||!isSameRouteRecord(b,x)||!D)&&(b.enterCallbacks[k]||[]).forEach(H=>H(_))},{flush:"post"}),()=>{const _=a.value,b=e.name,k=f.value,D=k&&k.components[b];if(!D)return normalizeSlot(r.default,{Component:D,route:_});const x=k.props[b],A=x?x===!0?_.params:typeof x=="function"?x(_):x:null,Q=h(D,assign$1({},A,t,{onVnodeUnmounted:q=>{q.component.isUnmounted&&(k.instances[b]=null)},ref:m}));return normalizeSlot(r.default,{Component:Q,route:_})||Q}}});function normalizeSlot(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),r=e.parseQuery||parseQuery,n=e.stringifyQuery||stringifyQuery,a=e.history,o=useCallbacks(),l=useCallbacks(),f=useCallbacks(),m=shallowRef(START_LOCATION_NORMALIZED);let _=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=applyToParams.bind(null,B=>""+B),k=applyToParams.bind(null,encodeParam),D=applyToParams.bind(null,decode);function x(B,O){let U,Z;return isRouteName(B)?(U=t.getRecordMatcher(B),Z=O):Z=B,t.addRoute(Z,U)}function A(B){const O=t.getRecordMatcher(B);O&&t.removeRoute(O)}function H(){return t.getRoutes().map(B=>B.record)}function Q(B){return!!t.getRecordMatcher(B)}function q(B,O){if(O=assign$1({},O||m.value),typeof B=="string"){const Ce=parseURL(r,B,O.path),Je=t.resolve({path:Ce.path},O),Pe=a.createHref(Ce.fullPath);return assign$1(Ce,Je,{params:D(Je.params),hash:decode(Ce.hash),redirectedFrom:void 0,href:Pe})}let U;if("path"in B)U=assign$1({},B,{path:parseURL(r,B.path,O.path).path});else{const Ce=assign$1({},B.params);for(const Je in Ce)Ce[Je]==null&&delete Ce[Je];U=assign$1({},B,{params:k(Ce)}),O.params=k(O.params)}const Z=t.resolve(U,O),ee=B.hash||"";Z.params=b(D(Z.params));const we=stringifyURL(n,assign$1({},B,{hash:encodeHash(ee),path:Z.path})),Se=a.createHref(we);return assign$1({fullPath:we,hash:ee,query:n===stringifyQuery?normalizeQuery(B.query):B.query||{}},Z,{redirectedFrom:void 0,href:Se})}function j(B){return typeof B=="string"?parseURL(r,B,m.value.path):assign$1({},B)}function de(B,O){if(_!==B)return createRouterError(8,{from:O,to:B})}function ge(B){return d(B)}function ye(B){return ge(assign$1(j(B),{replace:!0}))}function Te(B){const O=B.matched[B.matched.length-1];if(O&&O.redirect){const{redirect:U}=O;let Z=typeof U=="function"?U(B):U;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=j(Z):{path:Z},Z.params={}),assign$1({query:B.query,hash:B.hash,params:"path"in Z?{}:B.params},Z)}}function d(B,O){const U=_=q(B),Z=m.value,ee=B.state,we=B.force,Se=B.replace===!0,Ce=Te(U);if(Ce)return d(assign$1(j(Ce),{state:typeof Ce=="object"?assign$1({},ee,Ce.state):ee,force:we,replace:Se}),O||U);const Je=U;Je.redirectedFrom=O;let Pe;return!we&&isSameRouteLocation(n,Z,U)&&(Pe=createRouterError(16,{to:Je,from:Z}),fe(Z,Z,!0,!1)),(Pe?Promise.resolve(Pe):ke(Je,Z)).catch(qe=>isNavigationFailure(qe)?isNavigationFailure(qe,2)?qe:W(qe):Y(qe,Je,Z)).then(qe=>{if(qe){if(isNavigationFailure(qe,2))return d(assign$1({replace:Se},j(qe.to),{state:typeof qe.to=="object"?assign$1({},ee,qe.to.state):ee,force:we}),O||Je)}else qe=me(Je,Z,!0,Se,ee);return F(Je,Z,qe),qe})}function ie(B,O){const U=de(B,O);return U?Promise.reject(U):Promise.resolve()}function re(B){const O=S.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(B):B()}function ke(B,O){let U;const[Z,ee,we]=extractChangingRecords(B,O);U=extractComponentsGuards(Z.reverse(),"beforeRouteLeave",B,O);for(const Ce of Z)Ce.leaveGuards.forEach(Je=>{U.push(guardToPromiseFn(Je,B,O))});const Se=ie.bind(null,B,O);return U.push(Se),G(U).then(()=>{U=[];for(const Ce of o.list())U.push(guardToPromiseFn(Ce,B,O));return U.push(Se),G(U)}).then(()=>{U=extractComponentsGuards(ee,"beforeRouteUpdate",B,O);for(const Ce of ee)Ce.updateGuards.forEach(Je=>{U.push(guardToPromiseFn(Je,B,O))});return U.push(Se),G(U)}).then(()=>{U=[];for(const Ce of we)if(Ce.beforeEnter)if(isArray(Ce.beforeEnter))for(const Je of Ce.beforeEnter)U.push(guardToPromiseFn(Je,B,O));else U.push(guardToPromiseFn(Ce.beforeEnter,B,O));return U.push(Se),G(U)}).then(()=>(B.matched.forEach(Ce=>Ce.enterCallbacks={}),U=extractComponentsGuards(we,"beforeRouteEnter",B,O),U.push(Se),G(U))).then(()=>{U=[];for(const Ce of l.list())U.push(guardToPromiseFn(Ce,B,O));return U.push(Se),G(U)}).catch(Ce=>isNavigationFailure(Ce,8)?Ce:Promise.reject(Ce))}function F(B,O,U){f.list().forEach(Z=>re(()=>Z(B,O,U)))}function me(B,O,U,Z,ee){const we=de(B,O);if(we)return we;const Se=O===START_LOCATION_NORMALIZED,Ce=isBrowser?history.state:{};U&&(Z||Se?a.replace(B.fullPath,assign$1({scroll:Se&&Ce&&Ce.scroll},ee)):a.push(B.fullPath,ee)),m.value=B,fe(B,O,U,Se),W()}let le;function Ye(){le||(le=a.listen((B,O,U)=>{if(!P.listening)return;const Z=q(B),ee=Te(Z);if(ee){d(assign$1(ee,{replace:!0}),Z).catch(noop);return}_=Z;const we=m.value;isBrowser&&saveScrollPosition(getScrollKey(we.fullPath,U.delta),computeScrollPosition()),ke(Z,we).catch(Se=>isNavigationFailure(Se,12)?Se:isNavigationFailure(Se,2)?(d(Se.to,Z).then(Ce=>{isNavigationFailure(Ce,20)&&!U.delta&&U.type===NavigationType.pop&&a.go(-1,!1)}).catch(noop),Promise.reject()):(U.delta&&a.go(-U.delta,!1),Y(Se,Z,we))).then(Se=>{Se=Se||me(Z,we,!1),Se&&(U.delta&&!isNavigationFailure(Se,8)?a.go(-U.delta,!1):U.type===NavigationType.pop&&isNavigationFailure(Se,20)&&a.go(-1,!1)),F(Z,we,Se)}).catch(noop)}))}let De=useCallbacks(),ue=useCallbacks(),w;function Y(B,O,U){W(B);const Z=ue.list();return Z.length?Z.forEach(ee=>ee(B,O,U)):console.error(B),Promise.reject(B)}function E(){return w&&m.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((B,O)=>{De.add([B,O])})}function W(B){return w||(w=!B,Ye(),De.list().forEach(([O,U])=>B?U(B):O()),De.reset()),B}function fe(B,O,U,Z){const{scrollBehavior:ee}=e;if(!isBrowser||!ee)return Promise.resolve();const we=!U&&getSavedScrollPosition(getScrollKey(B.fullPath,0))||(Z||!U)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ee(B,O,we)).then(Se=>Se&&scrollToPosition(Se)).catch(Se=>Y(Se,B,O))}const T=B=>a.go(B);let I;const S=new Set,P={currentRoute:m,listening:!0,addRoute:x,removeRoute:A,hasRoute:Q,getRoutes:H,resolve:q,options:e,push:ge,replace:ye,go:T,back:()=>T(-1),forward:()=>T(1),beforeEach:o.add,beforeResolve:l.add,afterEach:f.add,onError:ue.add,isReady:E,install(B){const O=this;B.component("RouterLink",RouterLink),B.component("RouterView",RouterView),B.config.globalProperties.$router=O,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(m)}),isBrowser&&!I&&m.value===START_LOCATION_NORMALIZED&&(I=!0,ge(a.location).catch(ee=>{}));const U={};for(const ee in START_LOCATION_NORMALIZED)Object.defineProperty(U,ee,{get:()=>m.value[ee],enumerable:!0});B.provide(routerKey,O),B.provide(routeLocationKey,shallowReactive(U)),B.provide(routerViewLocationKey,m);const Z=B.unmount;S.add(B),B.unmount=function(){S.delete(B),S.size<1&&(_=START_LOCATION_NORMALIZED,le&&le(),le=null,m.value=START_LOCATION_NORMALIZED,I=!1,w=!1),Z()}}};function G(B){return B.reduce((O,U)=>O.then(()=>re(U)),Promise.resolve())}return P}function extractChangingRecords(e,t){const r=[],n=[],a=[],o=Math.max(t.matched.length,e.matched.length);for(let l=0;l<o;l++){const f=t.matched[l];f&&(e.matched.find(_=>isSameRouteRecord(_,f))?n.push(f):r.push(f));const m=e.matched[l];m&&(t.matched.find(_=>isSameRouteRecord(_,m))||a.push(m))}return[r,n,a]}const Settings_vue_vue_type_style_index_0_scoped_82a8a634_lang="",_sfc_main$s={props:[],emits:[],data(){return{verboseLevel:"default"}},async mounted(){this.verboseLevel=await api.getVerboseLevel()},methods:{async setVerboseLevel(e){this.verboseLevel=e,await api.setVerboseLevel(e)}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,tokens:e=>e.configuration.tokens,statistics:e=>e.studies.statistics,system:e=>e.configuration.system,installedPlugins:e=>e.configuration.installedPlugins}),totalDiskSize(){return this.statistics.TotalDiskSizeMB>1024*1024?Math.round(this.statistics.TotalDiskSizeMB/(1024*1024)*100)/100+" TB":this.statistics.TotalDiskSizeMB>1024?Math.round(this.statistics.TotalDiskSizeMB/1024*100)/100+" GB":this.statistics.TotalDiskSizeMB+" MB"}}},_hoisted_1$s={class:"settings"},_hoisted_2$r={class:"table"},_hoisted_3$p={scope:"row",class:"w-50 header"},_hoisted_4$m={class:"value"},_hoisted_5$k={scope:"row",class:"header"},_hoisted_6$i={class:"value"},_hoisted_7$f={scope:"row",class:"header"},_hoisted_8$e={class:"value"},_hoisted_9$c={scope:"row",class:"header"},_hoisted_10$c={class:"value"},_hoisted_11$b={class:"table"},_hoisted_12$b={scope:"row",class:"w-50 header"},_hoisted_13$b={class:"value"},_hoisted_14$8={scope:"row",class:"header"},_hoisted_15$8={class:"value"},_hoisted_16$8={scope:"row",class:"header"},_hoisted_17$7={class:"value"},_hoisted_18$7={scope:"row",class:"header"},_hoisted_19$7={class:"value"},_hoisted_20$7={scope:"row",class:"header"},_hoisted_21$6={class:"value"},_hoisted_22$6={scope:"row",class:"header"},_hoisted_23$6={class:"value"},_hoisted_24$5={scope:"row",class:"header"},_hoisted_25$5={class:"value"},_hoisted_26$5={class:"m-2"},_hoisted_27$5={style:{"text-decoration":"line-through"}},_hoisted_28$5={class:"table"},_hoisted_29$5={scope:"row",class:"w-25 header"},_hoisted_30$5={class:"w-50 value"},_hoisted_31$5={class:"w-15 value"},_hoisted_32$5={key:0,class:"w-10 value"},_hoisted_33$5=["href"];function _sfc_render$s(e,t,r,n,a,o){return openBlock(),createElementBlock("div",_hoisted_1$s,[createBaseVNode("div",null,[createBaseVNode("h5",null,toDisplayString(e.$t("statistics")),1),createBaseVNode("table",_hoisted_2$r,[createBaseVNode("tbody",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_3$p,"# "+toDisplayString(e.$t("studies")),1),createBaseVNode("td",_hoisted_4$m,toDisplayString(e.statistics.CountStudies),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_5$k,"# "+toDisplayString(e.$t("series_plural")),1),createBaseVNode("td",_hoisted_6$i,toDisplayString(e.statistics.CountSeries),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_7$f,"# "+toDisplayString(e.$t("instances")),1),createBaseVNode("td",_hoisted_8$e,toDisplayString(e.statistics.CountInstances),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_9$c,toDisplayString(e.$t("storage_size")),1),createBaseVNode("td",_hoisted_10$c,toDisplayString(o.totalDiskSize),1)])])])]),createBaseVNode("div",null,[createBaseVNode("h5",null,toDisplayString(e.$t("orthanc_system_info")),1),createBaseVNode("table",_hoisted_11$b,[createBaseVNode("tbody",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_12$b,toDisplayString(e.$t("orthanc_version")),1),createBaseVNode("td",_hoisted_13$b,toDisplayString(e.system.Version),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_14$8,toDisplayString(e.$t("dicom_AET")),1),createBaseVNode("td",_hoisted_15$8,toDisplayString(e.system.DicomAet),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_16$8,toDisplayString(e.$t("orthanc_name")),1),createBaseVNode("td",_hoisted_17$7,toDisplayString(e.system.Name),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_18$7,toDisplayString(e.$t("dicom_port")),1),createBaseVNode("td",_hoisted_19$7,toDisplayString(e.system.DicomPort),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_20$7,toDisplayString(e.$t("ingest_transcoding")),1),createBaseVNode("td",_hoisted_21$6,toDisplayString(e.system.IngestTranscoding),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_22$6,toDisplayString(e.$t("overwrite_instances")),1),createBaseVNode("td",_hoisted_23$6,toDisplayString(e.system.OverwriteInstances),1)]),createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_24$5,toDisplayString(e.$t("storage_compression")),1),createBaseVNode("td",_hoisted_25$5,toDisplayString(e.system.StorageCompression),1)])])])]),createBaseVNode("div",null,[createBaseVNode("h5",null,toDisplayString(e.$t("verbosity_level")),1),createBaseVNode("div",null,[createBaseVNode("button",{type:"button",class:normalizeClass(["btn mx-2",{"btn-primary":a.verboseLevel=="default","btn-secondary":a.verboseLevel!="default"}]),onClick:t[0]||(t[0]=l=>o.setVerboseLevel("default"))},toDisplayString(e.$t("default")),3),createBaseVNode("button",{type:"button",class:normalizeClass(["btn mx-2",{"btn-primary":a.verboseLevel=="verbose","btn-secondary":a.verboseLevel!="verbose"}]),onClick:t[1]||(t[1]=l=>o.setVerboseLevel("verbose"))},toDisplayString(e.$t("verbose")),3),createBaseVNode("button",{type:"button",class:normalizeClass(["btn mx-2",{"btn-primary":a.verboseLevel=="trace","btn-secondary":a.verboseLevel!="trace"}]),onClick:t[2]||(t[2]=l=>o.setVerboseLevel("trace"))},toDisplayString(e.$t("trace")),3)])]),createBaseVNode("div",null,[createBaseVNode("h5",null,toDisplayString(e.$t("installed_plugins")),1),createBaseVNode("p",_hoisted_26$5,[createTextVNode(toDisplayString(e.$t("plugins_not_enabled"))+" ",1),createBaseVNode("span",_hoisted_27$5,toDisplayString(e.$t("striked_through")),1)]),createBaseVNode("table",_hoisted_28$5,[createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.installedPlugins,(l,f)=>(openBlock(),createElementBlock("tr",{key:f,class:normalizeClass({"disabled-plugin":!l.Enabled})},[createBaseVNode("th",_hoisted_29$5,toDisplayString(f),1),createBaseVNode("td",_hoisted_30$5,toDisplayString(l.Description),1),createBaseVNode("td",_hoisted_31$5,toDisplayString(l.Version),1),this.tokens.RequiredForLinks?createCommentVNode("",!0):(openBlock(),createElementBlock("td",_hoisted_32$5,[l.RootUri&&l.Enabled?(openBlock(),createElementBlock("a",{key:0,type:"button",class:"btn btn-primary",href:l.RootUri},toDisplayString(e.$t("open")),9,_hoisted_33$5)):createCommentVNode("",!0)]))],2))),128))])])])])}const Settings=_export_sfc(_sfc_main$s,[["render",_sfc_render$s],["__scopeId","data-v-82a8a634"]]),_sfc_main$r={props:["id","headerText","bodyText","cancelText","okText"],methods:{ok(){this.$emit("ok")}},mounted(){this.$refs["modal-main-div"].addEventListener("show.bs.modal",e=>{document.querySelector("body").appendChild(e.target)})}},_hoisted_1$r=["id"],_hoisted_2$q={class:"modal-dialog"},_hoisted_3$o={class:"modal-content"},_hoisted_4$l={class:"modal-header"},_hoisted_5$j={class:"modal-title",id:"modalLabel"},_hoisted_6$h=createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_hoisted_7$e={class:"modal-body"},_hoisted_8$d=["innerHTML"],_hoisted_9$b={class:"modal-footer"},_hoisted_10$b={key:0,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"};function _sfc_render$r(e,t,r,n,a,o){return openBlock(),createElementBlock("div",{class:"modal fade",id:this.id,tabindex:"-1","aria-labelledby":"modalLabel",ref:"modal-main-div"},[createBaseVNode("div",_hoisted_2$q,[createBaseVNode("div",_hoisted_3$o,[createBaseVNode("div",_hoisted_4$l,[createBaseVNode("h5",_hoisted_5$j,toDisplayString(r.headerText),1),_hoisted_6$h]),createBaseVNode("div",_hoisted_7$e,[renderSlot(e.$slots,"modalBody",{},()=>[createBaseVNode("span",{innerHTML:r.bodyText},null,8,_hoisted_8$d)])]),createBaseVNode("div",_hoisted_9$b,[r.cancelText?(openBlock(),createElementBlock("button",_hoisted_10$b,toDisplayString(r.cancelText),1)):createCommentVNode("",!0),createBaseVNode("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=l=>o.ok())},toDisplayString(r.okText),1)])])])],8,_hoisted_1$r)}const Modal=_export_sfc(_sfc_main$r,[["render",_sfc_render$r]]),clipboardHelpers={copyToClipboard(e,t,r){navigator.clipboard.writeText(e).then(()=>{t!==void 0?t():console.log("copied to clipboard: ",e)},()=>{r!==void 0?r():console.log("failed to copy to clipboard")})}},CopyToClipboardButton_vue_vue_type_style_index_0_lang="",_sfc_main$q={props:["valueToCopy"],setup(){return{}},data(){return{isSuccess:!1,isError:!1}},mounted(){},methods:{onSuccess(){console.log("copied to clipboard: "+this.valueToCopy),this.isSuccess=!0,this.isError=!1,setTimeout(()=>{this.isSuccess=!1},2500)},onFailure(){console.log("failed to copy to clipboard"),this.isSuccess=!1,this.isError=!0,setTimeout(()=>{this.isError=!1},2500)},click(){clipboardHelpers.copyToClipboard(this.valueToCopy,()=>this.onSuccess(),()=>this.onFailure())}},computed:{},components:{}},_hoisted_1$q={key:0,class:"bi-check"},_hoisted_2$p={key:1,class:"bi-bug"},_hoisted_3$n={key:2,class:"bi-clipboard"};function _sfc_render$q(e,t,r,n,a,o){return this.valueToCopy!==void 0?(openBlock(),createElementBlock("button",{key:0,class:normalizeClass(["btn-clipboard",{success:a.isSuccess,error:a.isError}]),type:"button","data-bs-toggle":"tooltip",title:"Copy to clipboard",onClick:t[0]||(t[0]=(...l)=>o.click&&o.click(...l))},[this.isSuccess?(openBlock(),createElementBlock("i",_hoisted_1$q)):createCommentVNode("",!0),this.isError?(openBlock(),createElementBlock("i",_hoisted_2$p)):createCommentVNode("",!0),!this.isSuccess&&!this.isError?(openBlock(),createElementBlock("i",_hoisted_3$n)):createCommentVNode("",!0)],2)):createCommentVNode("",!0)}const CopyToClipboardButton=_export_sfc(_sfc_main$q,[["render",_sfc_render$q]]),resourceHelpers={getResourceTitle(e,t,r,n,a){let o=[];function l(f,m,_){return m in _?(f.push(_[m]),!0):!1}return(e=="study"||e=="series")&&(l(o,"PatientID",t),l(o,"StudyID",r),l(o,"StudyDate",r),l(o,"StudyDescription",r)),(e=="series"||e=="instance")&&(l(o,"SeriesNumber",n),l(o,"SeriesDescription",n)),e=="instance"&&("0020,0013"in a?o.push("instance # "+a["0020,0013"].Value):o.push("instance")),o.join(" | ")},toDicomDate(e){return(e.getFullYear()*1e4+(e.getMonth()+1)*100+e.getDate()).toString()},parseDateForDatePicker(e){let t=null;return t=e.match(/^(\d{4})(\d{1,2})(\d{1,2})$/),t?[new Date(t[1],t[2]-1,t[3]),null]:(t=e.match(/^(\d{4})(\d{1,2})(\d{1,2})\-(\d{4})(\d{1,2})(\d{1,2})$/),t?[new Date(t[1],t[2]-1,t[3]),new Date(t[4],t[5]-1,t[6])]:(t=e.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/),t?[new Date(t[3],t[2]-1,t[1]),null]:(t=e.match(/^(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})$/),t?[new Date(t[1],t[2]-1,t[3]),null]:null)))}},ShareModal_vue_vue_type_style_index_0_lang="",_sfc_main$p={props:["id","orthancId","studyMainDicomTags","patientMainDicomTags"],methods:{share(){}},data(){return{expirationInDays:0,shareLink:""}},mounted(){this.expirationInDays=this.uiOptions.DefaultShareDuration,this.$refs["modal-main-div"].addEventListener("show.bs.modal",e=>{document.querySelector("body").appendChild(e.target)})},watch:{expirationInDays(e,t){this.shareLink=""}},methods:{getDurationText(e){return e==0?this.$i18n.t("share.never"):""+e+" "+this.$i18n.t("share.days")},async share(){let e=await api.createToken({tokenType:this.tokens.ShareType,resourcesIds:[this.orthancId],level:"study",validityDuration:this.expirationInDays*24*3600});this.shareLink=e.Url},copyAndClose(){clipboardHelpers.copyToClipboard(this.shareLink)}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,tokens:e=>e.configuration.tokens}),resourceTitle(){return resourceHelpers.getResourceTitle("study",this.patientMainDicomTags,this.studyMainDicomTags,null,null)}},components:{CopyToClipboardButton}},_hoisted_1$p=["id"],_hoisted_2$o={class:"modal-dialog"},_hoisted_3$m={class:"modal-content"},_hoisted_4$k={class:"modal-header"},_hoisted_5$i={class:"modal-title",id:"modalLabel"},_hoisted_6$g=createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_hoisted_7$d={class:"modal-body"},_hoisted_8$c={class:"container"},_hoisted_9$a={class:"row py-3"},_hoisted_10$a={class:"col-md-6"},_hoisted_11$a={class:"col-md-5"},_hoisted_12$a=["value"],_hoisted_13$a={class:"row py-3"},_hoisted_14$7={class:"col-md-3"},_hoisted_15$7={class:"col-md-8"},_hoisted_16$7={id:"parent",style:{width:"100%"}},_hoisted_17$6={class:"col-md-1"},_hoisted_18$6={class:"d-flex flex-row-reverse"},_hoisted_19$6={class:"modal-footer"},_hoisted_20$6={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"};function _sfc_render$p(e,t,r,n,a,o){const l=resolveComponent("CopyToClipboardButton");return openBlock(),createElementBlock("div",{class:"modal fade",id:this.id,tabindex:"-1","aria-labelledby":"modalLabel",ref:"modal-main-div"},[createBaseVNode("div",_hoisted_2$o,[createBaseVNode("div",_hoisted_3$m,[createBaseVNode("div",_hoisted_4$k,[createBaseVNode("h5",_hoisted_5$i,toDisplayString(e.$t("share.modal_title")+" "+o.resourceTitle),1),_hoisted_6$g]),createBaseVNode("div",_hoisted_7$d,[createBaseVNode("div",_hoisted_8$c,[createBaseVNode("div",_hoisted_9$a,[createBaseVNode("div",_hoisted_10$a,toDisplayString(e.$t("share.expires_in")),1),createBaseVNode("div",_hoisted_11$a,[withDirectives(createBaseVNode("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=f=>a.expirationInDays=f)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.ShareDurations,f=>(openBlock(),createElementBlock("option",{key:f,value:f},toDisplayString(o.getDurationText(f)),9,_hoisted_12$a))),128))],512),[[vModelSelect,a.expirationInDays]])])]),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("div",_hoisted_14$7,toDisplayString(e.$t("share.link")),1),createBaseVNode("div",_hoisted_15$7,[createBaseVNode("div",_hoisted_16$7,[withDirectives(createBaseVNode("input",{type:"text",id:"txt_input","onUpdate:modelValue":t[1]||(t[1]=f=>a.shareLink=f),style:{"min-width":"100%!important"}},null,512),[[vModelText,a.shareLink]])])]),createBaseVNode("div",_hoisted_17$6,[createBaseVNode("div",_hoisted_18$6,[createVNode(l,{valueToCopy:this.shareLink},null,8,["valueToCopy"])])])])])]),createBaseVNode("div",_hoisted_19$6,[createBaseVNode("button",_hoisted_20$6,toDisplayString(e.$t("cancel")),1),a.shareLink==""?(openBlock(),createElementBlock("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=f=>o.share())},toDisplayString(e.$t("share.button_title")),1)):createCommentVNode("",!0),a.shareLink!=""?(openBlock(),createElementBlock("button",{key:1,type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[3]||(t[3]=f=>o.copyAndClose())},toDisplayString(e.$t("share.copy_and_close")),1)):createCommentVNode("",!0)])])])],8,_hoisted_1$p)}const ShareModal=_export_sfc(_sfc_main$p,[["render",_sfc_render$p]]);let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,t,r){if(native.randomUUID&&!t&&!e)return native.randomUUID();e=e||{};const n=e.random||(e.rng||rng)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let a=0;a<16;++a)t[r+a]=n[a];return t}return unsafeStringify(n)}const ModifyModal_vue_vue_type_style_index_0_lang="";document.requiredTags=["PatientID","PatientBirthDate","PatientSex",,"PatientName","StudyInstanceUID","StudyDate","StudyTime","AccessionNumber","ReferringPhysicianName","StudyID","SeriesInstanceUID","Modality","ContrastBolusAgent","SeriesNumber","ImageOrientationPatient","SeriesType"];const _sfc_main$o={props:["orthancId","studyMainDicomTags","patientMainDicomTags","seriesMainDicomTags","isAnonymization","resourceLevel"],data(){return{tags:{},originalTags:{},removedTags:{},insertedTags:new Set,samePatientStudiesCount:0,hasLoadedSamePatientsStudiesCount:!1,warningMessageId:null,jobProgressComplete:0,jobProgressFailed:0,jobProgressRemaining:100,jobRefreshTimeout:200,jobIsComplete:!1,jobIsRunning:!1,jobIsSuccess:!1,showModifiedResourceKey:null,showModifiedResourceValue:null,modificationMode:null,step:"init",action:"none"}},async mounted(){this.reset(),this.$refs["modal-main-div"].addEventListener("show.bs.modal",e=>{document.querySelector("body").appendChild(e.target),this.reset()})},watch:{},methods:{async reset(){this.step="init",this.samePatientStudiesCount=(await api.getSamePatientStudies(this.patientMainDicomTags.PatientID)).length,this.hasLoadedSamePatientsStudiesCount=!0,this.tags={},this.originalTags={},this.removedTags={},this.insertedTags=new Set;for(const[e,t]of Object.entries(this.patientMainDicomTags))this.originalTags[e]=t,this.removedTags[e]=!1;for(const[e,t]of Object.entries(this.studyMainDicomTags))this.originalTags[e]=t,this.removedTags[e]=!1;if(this.resourceLevel=="series")for(const[e,t]of Object.entries(this.seriesMainDicomTags))this.originalTags[e]=t,this.removedTags[e]=!1;this.jobProgressComplete=0,this.jobProgressFailed=0,this.jobProgressRemaining=100,this.modificationMode=this.uiOptions.Modifications.DefaultMode,this.isAnonymization&&(this.resourceLevel=="study"?this.goToNextStep("init","anonymize-study"):this.goToNextStep("init","anonymize-series"))},back(){this.step=="tags"&&!this.isAnonymization?this.step="init":this.step=="warning"||this.step=="error"?this.step="tags":console.error("unknown step for back function ",this.step)},setWarning(e){this.warningMessageId=e,this.step="warning"},setError(e){this.errorMessageId=e,this.step="error"},startMonitoringJob(e){this.step="progress",this.jobRefreshTimeout=200,setTimeout(this.monitorJob,this.jobRefreshTimeout,[e])},async monitorJob(e){const t=await api.getJobStatus(e);if(this.jobIsComplete=t.State=="Success"||t.State=="Failure",this.jobIsRunning=t.State=="Running",this.jobIsSuccess=t.State=="Success",this.jobIsComplete?(this.jobProgressRemaining=0,this.jobIsSuccess?(this.jobProgressComplete=100,this.jobProgressFailed=0):(this.jobProgressComplete=0,this.jobProgressFailed=100)):(this.jobProgressFailed=0,this.jobProgressComplete=t.Progress,this.jobProgressRemaining=100-this.jobProgressComplete),!this.jobIsComplete)this.jobRefreshTimeout=Math.min(this.jobRefreshTimeout+200,2e3),setTimeout(this.monitorJob,this.jobRefreshTimeout,[e]);else{this.step="done";const r=t.Type;if(r=="MergeStudy"){const n=await api.getStudy(t.Content.TargetStudy);this.showModifiedResourceValue=n.MainDicomTags.StudyInstanceUID,this.showModifiedResourceKey="StudyInstanceUID"}else if(r=="ResourceModification")if(t.Content.Type=="Patient"){this.showModifiedResourceKey="PatientID";const n=await api.getPatient(t.Content.ID);this.showModifiedResourceValue=n.MainDicomTags.PatientID}else if(t.Content.Type=="Study"){this.showModifiedResourceKey="StudyInstanceUID";const n=await api.getStudy(t.Content.ID);this.showModifiedResourceValue=n.MainDicomTags.StudyInstanceUID}else if(t.Content.Type=="Series"){this.showModifiedResourceKey="StudyInstanceUID";const n=await api.getSeriesParentStudy(t.Content.ID);this.showModifiedResourceValue=n.MainDicomTags.StudyInstanceUID}else console.error("not handled yet")}},async modify(e=!1){try{if(this.action=="attach-study-to-existing-patient"){const t=await api.findPatient(this.tags.PatientID);if(t){const r=await api.modifyResource({resourceLevel:"study",orthancId:this.orthancId,replaceTags:t.MainDicomTags,keepTags:this.keepDicomUids?["StudyInstanceUID","SeriesInstanceUID","SOPInstanceUID"]:[],keepSource:this.keepSource,removeTags:this.removedTagsList});console.log("attach-study-to-existing-patient: created job ",r),this.startMonitoringJob(r)}else{console.error("Error while changing patient, the new PatientID does not exist ",this.tags.PatientID),this.setError("modify.error_attach_study_to_existing_patient_target_does_not_exist_html");return}}else if(this.action=="modify-any-tags-in-one-study"){if("PatientID"in this.modifiedTags){console.log("modify-any-tags-in-one-study: PatientID has changed");const r=await api.findPatient(this.tags.PatientID);if(r){console.error("modify-any-tags-in-one-study: Error while modifying patient-study tags, another patient with the same PatientID already exists ",this.tags.PatientID,r),this.setError("modify.error_modify_any_study_tags_patient_exists_html");return}}else if("PatientName"in this.modifiedTags||"PatientBirthDate"in this.modifiedTags||"PatientSex"in this.modifiedTags)if(console.log("modify-any-tags-in-one-study: Patient tags have changed"),this.samePatientStudiesCount=(await api.getSamePatientStudies(this.originalTags.PatientID)).length,this.samePatientStudiesCount>1){console.error("modify-any-tags-in-one-study: Error while modifying patient-study tags, this patient has other studies, you can not modify patient tags ",this.originalTags.PatientID,this.modifiedTags),this.setError("modify.error_modify_any_study_tags_can_not_modify_patient_tags_because_of_other_studies_html");return}else console.log("modify-any-tags-in-one-study: this is the only patient study, we can modify all tags");const t=await api.modifyResource({resourceLevel:"study",orthancId:this.orthancId,replaceTags:this.modifiedTags,keepTags:this.keepDicomUids?["StudyInstanceUID","SeriesInstanceUID","SOPInstanceUID"]:[],keepSource:this.keepSource,removeTags:this.removedTagsList});console.log("modify-any-tags-in-one-study: created job ",t),this.startMonitoringJob(t)}else if(this.action=="modify-patient-tags-in-all-studies"){if(this.tags.PatientID!=this.originalTags.PatientID){const n=await api.findPatient(this.tags.PatientID);if(n){console.error("modify-patient-tags-in-all-studies: Error while modifying patient tags, another patient with the same PatientID already exists ",this.tags.PatientID,n),this.setError("modify.error_modify_patient_tags_another_patient_exists_with_same_patient_id_html");return}}const t=await api.findPatient(this.originalTags.PatientID),r=await api.modifyResource({resourceLevel:"patient",orthancId:t.ID,replaceTags:this.tags,keepTags:this.keepDicomUids?["StudyInstanceUID","SeriesInstanceUID","SOPInstanceUID"]:[],removeTags:this.removedTagsList,keepSource:this.keepSource});console.log("modify-patient-tags-in-all-studies: created job ",r),this.startMonitoringJob(r)}else if(this.action=="anonymize-study"){const t=await api.anonymizeResource({resourceLevel:"study",orthancId:this.orthancId,replaceTags:this.tags,removeTags:this.removedTagsList});console.log("anonymize-study: created job ",t),this.startMonitoringJob(t)}else if(this.action=="attach-series-to-existing-study")if(this.tags.StudyInstanceUID==this.originalTags.StudyInstanceUID){console.error("attach-series-to-existing-study: Error target study is same as current study ",this.tags.StudyInstanceUID),this.setError("modify.error_attach_series_to_existing_study_target_unchanged_html");return}else{const t=await api.findStudy(this.tags.StudyInstanceUID);if(t==null){console.error("attach-series-to-existing-study: target study not found ",this.tags.StudyInstanceUID),this.setError("modify.error_attach_series_to_existing_study_target_does_not_exist_html");return}else{const r=await api.mergeSeriesInExistingStudy({seriesIds:[this.orthancId],targetStudyId:t.ID,keepSource:!1});console.log("attach-series-to-existing-study: created job ",r),this.startMonitoringJob(r)}}else if(this.action=="create-new-study-from-series"){const t=await api.findPatient(this.tags.PatientID);if(t){if(e)console.log("create-new-study-from-series: warning accepted, copying existing Patient tags"),this.tags.PatientName=t.MainDicomTags.PatientName,this.tags.PatientBirthDate=t.MainDicomTags.PatientBirthDate,this.tags.PatientSex=t.MainDicomTags.PatientSex;else if(t.MainDicomTags.PatientName!=this.tags.PatientName||t.MainDicomTags.PatientBirthDate!=this.tags.PatientBirthDate||t.MainDicomTags.PatientSex!=this.tags.PatientSex){console.warn("create-new-study-from-series: Another patient exists but tags differ",t.MainDicomTags,this.tags),this.setWarning("modify.warning_create_new_study_from_series_html");return}}this.tags.StudyInstanceUID=await api.generateUid("study");const r=await api.modifyResource({resourceLevel:"series",orthancId:this.orthancId,replaceTags:this.tags,keepTags:["SeriesInstanceUID","SOPInstanceUID"],keepSource:!1});console.log("create-new-study-from-series: created job ",r),this.startMonitoringJob(r)}else if(this.action=="modify-series-tags"){const t=await api.modifyResource({resourceLevel:"series",orthancId:this.orthancId,replaceTags:this.tags,keepTags:["SeriesInstanceUID","SOPInstanceUID"],keepSource:!0});console.log("modify-series-tags: created job ",t),this.startMonitoringJob(t)}else if(this.action=="anonymize-series"){const t=await api.anonymizeResource({resourceLevel:"series",orthancId:this.orthancId,replaceTags:this.tags,removeTags:this.removedTagsList});console.log("anonymize-study: created job ",t),this.startMonitoringJob(t)}else console.error("unhandled")}catch{this.setError("modify.error_modify_unexpected_error_html")}},goToNextStep(e,t){if(e=="init")if(this.step="tags",this.action=t,t=="anonymize-study"){const r=v4();this.tags={},this.tags.PatientID=r,this.tags.PatientName="Anonymized "+r.substr(0,8),this.tags.PatientBirthDate="",this.tags.PatientSex="","StudyDescription"in this.studyMainDicomTags&&(this.tags.StudyDescription=this.studyMainDicomTags.StudyDescription)}else if(t=="attach-study-to-existing-patient")this.tags={},this.tags.PatientID=this.patientMainDicomTags.PatientID;else if(t=="modify-any-tags-in-one-study"){this.tags={};for(const[r,n]of Object.entries(this.patientMainDicomTags))this.tags[r]=n;for(const[r,n]of Object.entries(this.studyMainDicomTags))this.tags[r]=n}else if(t=="modify-patient-tags-in-all-studies"){this.tags={};for(const[r,n]of Object.entries(this.patientMainDicomTags))this.tags[r]=n}else if(t=="attach-series-to-existing-study")this.tags={},this.tags.StudyInstanceUID="";else if(t=="create-new-study-from-series")this.tags={},this.tags.PatientID="",this.tags.PatientName="",this.tags.PatientBirthDate="",this.tags.PatientSex="",this.tags.StudyDescription="";else if(t=="modify-series-tags"){this.tags={};for(const[r,n]of Object.entries(this.seriesMainDicomTags))this.tags[r]=n}else if(t=="anonymize-series"){const r=v4();this.tags={},this.tags.PatientID=r,this.tags.PatientName="Anonymized "+r.substr(0,8),this.tags.PatientBirthDate="",this.tags.PatientSex="","StudyDescription"in this.studyMainDicomTags&&(this.tags.StudyDescription=this.studyMainDicomTags.StudyDescription)}else console.error("unknown action ",t);else this.step=="warning"&&this.modify()},async showModifiedResources(){let e="",t={forceRefresh:Date.now()};this.showModifiedResourceKey&&(t[this.showModifiedResourceKey]=this.showModifiedResourceValue),this.$router.push({path:e,query:t})},isFrozenTag(e){return this.isRemovedTag(e)?!0:this.resourceLevel=="series"?this.action=="modify-series-tags"&&e=="SeriesInstanceUID":this.isDicomUid(e)?this.keepDicomUids:!1},isEditableTag(e){return this.isRemovedTag(e)?!1:this.resourceLevel=="series"&&this.action=="attach-series-to-existing-study"&&e=="StudyInstanceUID"?!0:!this.isDicomUid(e)},isDicomUid(e){return["StudyInstanceUID","SeriesInstanceUID","SOPInstanceUID"].indexOf(e)!=-1},isAutogeneratedDicomUid(e){return this.resourceLevel=="series"?!1:this.isDicomUid(e)?!this.keepDicomUids:!1},isRemovable(e){return document.requiredTags.indexOf(e)==-1},isRemovedTag(e){return this.removedTags[e]===void 0&&console.warn("isRemovedTag: undefined tag"),this.removedTags[e]},toggleRemovedTag(e){this.removedTags[e]=!this.removedTags[e],this.removedTags[e]&&this.insertedTags.has(e)&&(delete this.tags[e],delete this.originalTags[e],delete this.removedTags[e],this.insertedTags.delete(e)),this.removedTags?console.log(e+" will be removed"):console.log(e+" will not be removed")},insertTag(e,t){e.preventDefault(),e.stopPropagation(),console.log("insert tag "+t,this.tags,this.removedTags),this.tags[t]="",this.removedTags[t]=!1,this.originalTags[t]=null,this.insertedTags.add(t),console.log("insert tag "+t,this.tags,this.removedTags)},isModeAllowed(e){return this.resourceLevel=="series"?!1:this.uiOptions.Modifications.AllowedModes.indexOf(e)!=-1}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions}),resourceTitle(){return resourceHelpers.getResourceTitle(this.resourceLevel,this.patientMainDicomTags,this.studyMainDicomTags,this.seriesMainDicomTags,null)},keepSource(){if(this.modificationMode=="duplicate")return!0;if(this.modificationMode=="modify-new-uids")return!1;if(this.modificationMode=="modify-keep-uids"){if(this.action=="attach-study-to-existing-patient")return!1;if(this.action=="modify-any-tags-in-one-study"||this.action=="modify-patient-tags-in-all-studies")return!("PatientID"in this.modifiedTags);console.error("unhandled")}else console.error("unhandled")},keepDicomUids(){return this.modificationMode=="modify-keep-uids"},areTagsModified(){let e=!1;for(const[t,r]of Object.entries(this.removedTags))r&&(e=!0);return Object.keys(this.modifiedTags).length>0||e},modifiedTags(){let e={};for(const[t,r]of Object.entries(this.tags))this.tags[t]!=this.originalTags[t]&&!this.removedTags[t]&&(e[t]=this.tags[t]);return e},insertableTags(){let e=[];this.action=="modify-any-tags-in-one-study"&&(e=e.concat(this.uiOptions.StudyMainTags),e=e.concat(this.uiOptions.PatientMainTags));const t=this;return e=e.filter(function(r,n,a){return!(r in t.originalTags)}),e.sort()},removedTagsList(){let e=[];for(const[t,r]of Object.entries(this.removedTags))r&&e.push(t);return e},modifyButtonTitle(){return this.isAnonymization?"modify.anonymize_button_title":"modify.modify_button_title"},modifyButtonEnabled(){return this.isAnonymization?!0:this.areTagsModified}},components:{CopyToClipboardButton}},_hoisted_1$o=["id"],_hoisted_2$n={class:"modal-dialog modal-lg modal-dialog-scrollable"},_hoisted_3$l={class:"modal-content"},_hoisted_4$j={class:"modal-header"},_hoisted_5$h={key:0,class:"modal-title",id:"modalLabel"},_hoisted_6$f={key:1,class:"modal-title",id:"modalLabel"},_hoisted_7$c=createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_hoisted_8$b={key:0,class:"modal-body"},_hoisted_9$9={class:"container"},_hoisted_10$9={key:0,class:"row border-bottom pb-3"},_hoisted_11$9=["innerHTML"],_hoisted_12$9={class:"col-md-3"},_hoisted_13$9=["innerHTML"],_hoisted_14$6={key:1,class:"row border-bottom border-3 py-3"},_hoisted_15$6=["innerHTML"],_hoisted_16$6={class:"col-md-3"},_hoisted_17$5=["innerHTML"],_hoisted_18$5={key:2,class:"row pt-3"},_hoisted_19$5=["innerHTML"],_hoisted_20$5={class:"col-md-3"},_hoisted_21$5=["innerHTML"],_hoisted_22$5={key:3,class:"row border-bottom pb-3"},_hoisted_23$5=["innerHTML"],_hoisted_24$4={class:"col-md-3"},_hoisted_25$4=["innerHTML"],_hoisted_26$4={key:4,class:"row border-bottom border-3 py-3"},_hoisted_27$4=["innerHTML"],_hoisted_28$4={class:"col-md-3"},_hoisted_29$4=["innerHTML"],_hoisted_30$4={key:5,class:"row pt-3"},_hoisted_31$4=["innerHTML"],_hoisted_32$4={class:"col-md-3"},_hoisted_33$4=["innerHTML"],_hoisted_34$4={key:1,class:"modal-footer"},_hoisted_35$4={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},_hoisted_36$4={key:2,class:"modal-body"},_hoisted_37$4={class:"container"},_hoisted_38$4={key:0,class:"col-md-6"},_hoisted_39$4=["onUpdate:modelValue"],_hoisted_40$3={key:1,class:"col-md-6"},_hoisted_41$2=["onUpdate:modelValue"],_hoisted_42$2={key:2,class:"col-md-6"},_hoisted_43$2=["value"],_hoisted_44$2={key:3,class:"col-md-1"},_hoisted_45$2={class:"d-flex flex-row-reverse"},_hoisted_46$2=["title","onClick"],_hoisted_47$2={key:0,class:"bi-trash"},_hoisted_48$1=["title","onClick"],_hoisted_49$1={key:0,class:"bi-recycle"},_hoisted_50$1={key:4,class:"col-md-1"},_hoisted_51$1={key:0,class:"row pt-3"},_hoisted_52$1=createBaseVNode("div",{class:"col-md-8"},null,-1),_hoisted_53$1={class:"col-md-2"},_hoisted_54$1={class:"dropdown"},_hoisted_55$1={class:"btn btn-sm btn-secondary dropdown-toggle",type:"button",id:"dropdownInsertTag","data-bs-toggle":"dropdown","aria-expanded":"false"},_hoisted_56$1={class:"dropdown-menu"},_hoisted_57=["value"],_hoisted_58=["onClick"],_hoisted_59={key:1,class:"row pt-3"},_hoisted_60={key:0,class:"form-check"},_hoisted_61=["innerHTML"],_hoisted_62={key:1,class:"form-check"},_hoisted_63=["innerHTML"],_hoisted_64={key:2,class:"form-check"},_hoisted_65=["innerHTML"],_hoisted_66={key:3,class:"modal-footer"},_hoisted_67={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},_hoisted_68=["disabled"],_hoisted_69={key:4,class:"modal-body"},_hoisted_70={class:"container"},_hoisted_71=["innerHTML"],_hoisted_72=["innerHTML"],_hoisted_73={key:5,class:"modal-footer"},_hoisted_74={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},_hoisted_75={key:6,class:"modal-footer"},_hoisted_76={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},_hoisted_77={key:7,class:"modal-body"},_hoisted_78={class:"container"},_hoisted_79={class:"row pb-3"},_hoisted_80={class:"row"},_hoisted_81={class:"progress",style:{width:"100%"}},_hoisted_82={key:8,class:"modal-footer"},_hoisted_83={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},_hoisted_84=["disabled"];function _sfc_render$o(e,t,r,n,a,o){return openBlock(),createElementBlock("div",{class:"modal fade",id:this.orthancId,tabindex:"-1","aria-labelledby":"modalLabel",ref:"modal-main-div"},[createBaseVNode("div",_hoisted_2$n,[createBaseVNode("div",_hoisted_3$l,[createBaseVNode("div",_hoisted_4$j,[r.isAnonymization?createCommentVNode("",!0):(openBlock(),createElementBlock("h5",_hoisted_5$h,toDisplayString(e.$t("modify.modify_modal_title")+" "+o.resourceTitle),1)),r.isAnonymization?(openBlock(),createElementBlock("h5",_hoisted_6$f,toDisplayString(e.$t("modify.anonymize_modal_title")+" "+o.resourceTitle),1)):createCommentVNode("",!0),_hoisted_7$c]),a.step=="init"?(openBlock(),createElementBlock("div",_hoisted_8$b,[createBaseVNode("div",_hoisted_9$9,[r.resourceLevel=="study"&&!r.isAnonymization?(openBlock(),createElementBlock("div",_hoisted_10$9,[createBaseVNode("div",{class:"col-md-9",innerHTML:e.$t("modify.study_step_0_attach_study_to_existing_patient_html")},null,8,_hoisted_11$9),createBaseVNode("div",_hoisted_12$9,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",innerHTML:e.$t("modify.study_step_0_attach_study_to_existing_patient_button_title_html"),onClick:t[0]||(t[0]=l=>o.goToNextStep(a.step,"attach-study-to-existing-patient"))},null,8,_hoisted_13$9)])])):createCommentVNode("",!0),r.resourceLevel=="study"&&!r.isAnonymization&&a.samePatientStudiesCount>1?(openBlock(),createElementBlock("div",_hoisted_14$6,[createBaseVNode("div",{class:"col-md-9",innerHTML:e.$t("modify.study_step_0_patient_has_other_studies_html",{count:a.samePatientStudiesCount})},null,8,_hoisted_15$6),createBaseVNode("div",_hoisted_16$6,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",innerHTML:e.$t("modify.study_step_0_patient_has_other_studies_button_title_html"),onClick:t[1]||(t[1]=l=>o.goToNextStep(a.step,"modify-patient-tags-in-all-studies"))},null,8,_hoisted_17$5)])])):createCommentVNode("",!0),r.resourceLevel=="study"&&!r.isAnonymization&&a.samePatientStudiesCount>=1?(openBlock(),createElementBlock("div",_hoisted_18$5,[createBaseVNode("div",{class:"col-md-9",innerHTML:e.$t("modify.study_step_0_modify_study_html",{count:a.samePatientStudiesCount})},null,8,_hoisted_19$5),createBaseVNode("div",_hoisted_20$5,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",innerHTML:e.$t("modify.study_step_0_modify_study_button_title_html"),onClick:t[2]||(t[2]=l=>o.goToNextStep(a.step,"modify-any-tags-in-one-study"))},null,8,_hoisted_21$5)])])):createCommentVNode("",!0),r.resourceLevel=="series"&&!r.isAnonymization?(openBlock(),createElementBlock("div",_hoisted_22$5,[createBaseVNode("div",{class:"col-md-9",innerHTML:e.$t("modify.series_step_0_attach_series_to_existing_study_html")},null,8,_hoisted_23$5),createBaseVNode("div",_hoisted_24$4,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",innerHTML:e.$t("modify.series_step_0_attach_series_to_existing_study_button_title_html"),onClick:t[3]||(t[3]=l=>o.goToNextStep(a.step,"attach-series-to-existing-study"))},null,8,_hoisted_25$4)])])):createCommentVNode("",!0),r.resourceLevel=="series"&&!r.isAnonymization?(openBlock(),createElementBlock("div",_hoisted_26$4,[createBaseVNode("div",{class:"col-md-9",innerHTML:e.$t("modify.series_step_0_create_new_study_html")},null,8,_hoisted_27$4),createBaseVNode("div",_hoisted_28$4,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",innerHTML:e.$t("modify.series_step_0_create_new_study_button_title_html"),onClick:t[4]||(t[4]=l=>o.goToNextStep(a.step,"create-new-study-from-series"))},null,8,_hoisted_29$4)])])):createCommentVNode("",!0),r.resourceLevel=="series"&&!r.isAnonymization?(openBlock(),createElementBlock("div",_hoisted_30$4,[createBaseVNode("div",{class:"col-md-9",innerHTML:e.$t("modify.series_step_0_modify_series_html")},null,8,_hoisted_31$4),createBaseVNode("div",_hoisted_32$4,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",innerHTML:e.$t("modify.series_step_0_modify_series_button_title_html"),onClick:t[5]||(t[5]=l=>o.goToNextStep(a.step,"modify-series-tags"))},null,8,_hoisted_33$4)])])):createCommentVNode("",!0)])])):createCommentVNode("",!0),a.step=="init"?(openBlock(),createElementBlock("div",_hoisted_34$4,[createBaseVNode("button",_hoisted_35$4,toDisplayString(e.$t("cancel")),1)])):createCommentVNode("",!0),a.step=="tags"?(openBlock(),createElementBlock("div",_hoisted_36$4,[createBaseVNode("div",_hoisted_37$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.tags,(l,f)=>(openBlock(),createElementBlock("div",{key:f,class:"row"},[createBaseVNode("div",{class:normalizeClass(["col-md-5",{"striked-through":o.isRemovedTag(f)}])},toDisplayString(f),3),o.isFrozenTag(f)?(openBlock(),createElementBlock("div",_hoisted_38$4,[withDirectives((openBlock(),createElementBlock("input",{key:0,type:"text",class:normalizeClass(["form-control",{"striked-through":!o.isDicomUid(f)}]),disabled:"","onUpdate:modelValue":m=>a.originalTags[f]=m},null,10,_hoisted_39$4)),[[vModelText,a.originalTags[f]]])])):createCommentVNode("",!0),o.isEditableTag(f)?(openBlock(),createElementBlock("div",_hoisted_40$3,[withDirectives((openBlock(),createElementBlock("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":m=>a.tags[f]=m},null,8,_hoisted_41$2)),[[vModelText,a.tags[f]]])])):createCommentVNode("",!0),o.isAutogeneratedDicomUid(f)?(openBlock(),createElementBlock("div",_hoisted_42$2,[(openBlock(),createElementBlock("input",{key:0,type:"text",class:"form-control",disabled:"",value:e.$t("modify.autogenerated_dicom_uid")},null,8,_hoisted_43$2))])):createCommentVNode("",!0),(openBlock(),createElementBlock("div",_hoisted_44$2,[createBaseVNode("div",_hoisted_45$2,[o.isRemovable(f)&&!o.isRemovedTag(f)?(openBlock(),createElementBlock("button",{key:0,class:"btn-small",type:"button","data-bs-toggle":"tooltip",title:e.$t("modify.remove_tag_tooltip"),onClick:m=>o.toggleRemovedTag(f)},[o.isRemovedTag(f)?createCommentVNode("",!0):(openBlock(),createElementBlock("i",_hoisted_47$2))],8,_hoisted_46$2)):createCommentVNode("",!0),o.isRemovable(f)&&o.isRemovedTag(f)?(openBlock(),createElementBlock("button",{key:1,class:"btn-small",type:"button","data-bs-toggle":"tooltip",title:e.$t("modify.remove_tag_undo_tooltip"),onClick:m=>o.toggleRemovedTag(f)},[o.isRemovedTag(f)?(openBlock(),createElementBlock("i",_hoisted_49$1)):createCommentVNode("",!0)],8,_hoisted_48$1)):createCommentVNode("",!0)])])),o.isAutogeneratedDicomUid(f)?(openBlock(),createElementBlock("div",_hoisted_50$1)):createCommentVNode("",!0)]))),128)),a.action=="modify-any-tags-in-one-study"?(openBlock(),createElementBlock("div",_hoisted_51$1,[_hoisted_52$1,createBaseVNode("div",_hoisted_53$1,[createBaseVNode("div",_hoisted_54$1,[createBaseVNode("button",_hoisted_55$1,toDisplayString(e.$t("modify.insert_tag")),1),createBaseVNode("ul",_hoisted_56$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.insertableTags,(l,f)=>(openBlock(),createElementBlock("li",{key:l,value:l},[createBaseVNode("a",{class:"dropdown-item",href:"#",onClick:m=>o.insertTag(m,l)},toDisplayString(l),9,_hoisted_58)],8,_hoisted_57))),128))])])])])):createCommentVNode("",!0),r.isAnonymization?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_59,[o.isModeAllowed("modify-new-uids")?(openBlock(),createElementBlock("div",_hoisted_60,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"radio",name:"modificationMode",id:"modifyNewUids",value:"modify-new-uids","onUpdate:modelValue":t[6]||(t[6]=l=>a.modificationMode=l)},null,512),[[vModelRadio,a.modificationMode]]),createBaseVNode("label",{class:"form-check-label",for:"modifyNewUids",innerHTML:e.$t("modify.modify_mode_new_uids_html")},null,8,_hoisted_61)])):createCommentVNode("",!0),o.isModeAllowed("modify-keep-uids")?(openBlock(),createElementBlock("div",_hoisted_62,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"radio",name:"modificationMode",id:"modifyKeepUids",value:"modify-keep-uids","onUpdate:modelValue":t[7]||(t[7]=l=>a.modificationMode=l)},null,512),[[vModelRadio,a.modificationMode]]),createBaseVNode("label",{class:"form-check-label",for:"modifyKeepUids",innerHTML:e.$t("modify.modify_mode_keep_uids_html")},null,8,_hoisted_63)])):createCommentVNode("",!0),o.isModeAllowed("duplicate")?(openBlock(),createElementBlock("div",_hoisted_64,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"radio",name:"modificationMode",id:"modifyDuplicate",value:"duplicate","onUpdate:modelValue":t[8]||(t[8]=l=>a.modificationMode=l)},null,512),[[vModelRadio,a.modificationMode]]),createBaseVNode("label",{class:"form-check-label",for:"modifyDuplicate",innerHTML:e.$t("modify.modify_mode_duplicate_html")},null,8,_hoisted_65)])):createCommentVNode("",!0)]))])])):createCommentVNode("",!0),a.step=="tags"?(openBlock(),createElementBlock("div",_hoisted_66,[r.isAnonymization?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,type:"button",class:"btn btn-secondary",onClick:t[9]||(t[9]=l=>o.back())},toDisplayString(e.$t("modify.back_button_title")),1)),createBaseVNode("button",_hoisted_67,toDisplayString(e.$t("cancel")),1),createBaseVNode("button",{type:"button",class:"btn btn-primary",disabled:!o.modifyButtonEnabled,onClick:t[10]||(t[10]=l=>o.modify())},toDisplayString(e.$t(o.modifyButtonTitle)),9,_hoisted_68)])):createCommentVNode("",!0),a.step=="warning"||a.step=="error"?(openBlock(),createElementBlock("div",_hoisted_69,[createBaseVNode("div",_hoisted_70,[a.step=="error"?(openBlock(),createElementBlock("div",{key:0,class:"alert alert-danger",role:"alert",innerHTML:e.$t(e.errorMessageId)},null,8,_hoisted_71)):createCommentVNode("",!0),a.step=="warning"?(openBlock(),createElementBlock("div",{key:1,class:"alert alert-warning",role:"alert",innerHTML:e.$t(a.warningMessageId)},null,8,_hoisted_72)):createCommentVNode("",!0)])])):createCommentVNode("",!0),a.step=="warning"?(openBlock(),createElementBlock("div",_hoisted_73,[createBaseVNode("button",{type:"button",class:"btn btn-secondary",onClick:t[11]||(t[11]=l=>o.back())},toDisplayString(e.$t("modify.back_button_title")),1),createBaseVNode("button",_hoisted_74,toDisplayString(e.$t("cancel")),1),createBaseVNode("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=l=>o.modify(!0))},toDisplayString(e.$t(o.modifyButtonTitle)),1)])):createCommentVNode("",!0),a.step=="error"?(openBlock(),createElementBlock("div",_hoisted_75,[createBaseVNode("button",{type:"button",class:"btn btn-secondary",onClick:t[13]||(t[13]=l=>o.back())},toDisplayString(e.$t("modify.back_button_title")),1),createBaseVNode("button",_hoisted_76,toDisplayString(e.$t("cancel")),1)])):createCommentVNode("",!0),a.step=="progress"||a.step=="done"?(openBlock(),createElementBlock("div",_hoisted_77,[createBaseVNode("div",_hoisted_78,[createBaseVNode("div",_hoisted_79,toDisplayString(e.$t("modify.job_in_progress")),1),createBaseVNode("div",_hoisted_80,[createBaseVNode("div",_hoisted_81,[createBaseVNode("div",{class:"progress-bar bg-success",role:"progressbar",style:normalizeStyle("width: "+this.jobProgressComplete+"%")},null,4),createBaseVNode("div",{class:"progress-bar bg-secondary",role:"progressbar",style:normalizeStyle("width: "+this.jobProgressRemaining+"%")},null,4),createBaseVNode("div",{class:"progress-bar bg-danger",role:"progressbar",style:normalizeStyle("width: "+this.jobProgressFailed+"%")},null,4)])])])])):createCommentVNode("",!0),a.step=="progress"||a.step=="done"?(openBlock(),createElementBlock("div",_hoisted_82,[createBaseVNode("button",_hoisted_83,toDisplayString(e.$t("close")),1),createBaseVNode("button",{type:"button",class:"btn btn-primary",disabled:a.step!="done","data-bs-dismiss":"modal",onClick:t[14]||(t[14]=l=>o.showModifiedResources())},toDisplayString(e.$t("modify.show_modified_resources")),9,_hoisted_84)])):createCommentVNode("",!0)])])],8,_hoisted_1$o)}const ModifyModal=_export_sfc(_sfc_main$o,[["render",_sfc_render$o]]);var jquery={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:commonjsGlobal,function(t,r){var n=[],a=Object.getPrototypeOf,o=n.slice,l=n.flat?function(s){return n.flat.call(s)}:function(s){return n.concat.apply([],s)},f=n.push,m=n.indexOf,_={},b=_.toString,k=_.hasOwnProperty,D=k.toString,x=D.call(Object),A={},H=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},Q=function(c){return c!=null&&c===c.window},q=t.document,j={type:!0,src:!0,nonce:!0,noModule:!0};function de(s,c,u){u=u||q;var p,g,y=u.createElement("script");if(y.text=s,c)for(p in j)g=c[p]||c.getAttribute&&c.getAttribute(p),g&&y.setAttribute(p,g);u.head.appendChild(y).parentNode.removeChild(y)}function ge(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?_[b.call(s)]||"object":typeof s}var ye="3.7.1",Te=/HTML$/i,d=function(s,c){return new d.fn.init(s,c)};d.fn=d.prototype={jquery:ye,constructor:d,length:0,toArray:function(){return o.call(this)},get:function(s){return s==null?o.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var c=d.merge(this.constructor(),s);return c.prevObject=this,c},each:function(s){return d.each(this,s)},map:function(s){return this.pushStack(d.map(this,function(c,u){return s.call(c,u,c)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(s,c){return(c+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(s,c){return c%2}))},eq:function(s){var c=this.length,u=+s+(s<0?c:0);return this.pushStack(u>=0&&u<c?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:n.sort,splice:n.splice},d.extend=d.fn.extend=function(){var s,c,u,p,g,y,v=arguments[0]||{},M=1,N=arguments.length,R=!1;for(typeof v=="boolean"&&(R=v,v=arguments[M]||{},M++),typeof v!="object"&&!H(v)&&(v={}),M===N&&(v=this,M--);M<N;M++)if((s=arguments[M])!=null)for(c in s)p=s[c],!(c==="__proto__"||v===p)&&(R&&p&&(d.isPlainObject(p)||(g=Array.isArray(p)))?(u=v[c],g&&!Array.isArray(u)?y=[]:!g&&!d.isPlainObject(u)?y={}:y=u,g=!1,v[c]=d.extend(R,y,p)):p!==void 0&&(v[c]=p));return v},d.extend({expando:"jQuery"+(ye+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var c,u;return!s||b.call(s)!=="[object Object]"?!1:(c=a(s),c?(u=k.call(c,"constructor")&&c.constructor,typeof u=="function"&&D.call(u)===x):!0)},isEmptyObject:function(s){var c;for(c in s)return!1;return!0},globalEval:function(s,c,u){de(s,{nonce:c&&c.nonce},u)},each:function(s,c){var u,p=0;if(ie(s))for(u=s.length;p<u&&c.call(s[p],p,s[p])!==!1;p++);else for(p in s)if(c.call(s[p],p,s[p])===!1)break;return s},text:function(s){var c,u="",p=0,g=s.nodeType;if(!g)for(;c=s[p++];)u+=d.text(c);return g===1||g===11?s.textContent:g===9?s.documentElement.textContent:g===3||g===4?s.nodeValue:u},makeArray:function(s,c){var u=c||[];return s!=null&&(ie(Object(s))?d.merge(u,typeof s=="string"?[s]:s):f.call(u,s)),u},inArray:function(s,c,u){return c==null?-1:m.call(c,s,u)},isXMLDoc:function(s){var c=s&&s.namespaceURI,u=s&&(s.ownerDocument||s).documentElement;return!Te.test(c||u&&u.nodeName||"HTML")},merge:function(s,c){for(var u=+c.length,p=0,g=s.length;p<u;p++)s[g++]=c[p];return s.length=g,s},grep:function(s,c,u){for(var p,g=[],y=0,v=s.length,M=!u;y<v;y++)p=!c(s[y],y),p!==M&&g.push(s[y]);return g},map:function(s,c,u){var p,g,y=0,v=[];if(ie(s))for(p=s.length;y<p;y++)g=c(s[y],y,u),g!=null&&v.push(g);else for(y in s)g=c(s[y],y,u),g!=null&&v.push(g);return l(v)},guid:1,support:A}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=n[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,c){_["[object "+c+"]"]=c.toLowerCase()});function ie(s){var c=!!s&&"length"in s&&s.length,u=ge(s);return H(s)||Q(s)?!1:u==="array"||c===0||typeof c=="number"&&c>0&&c-1 in s}function re(s,c){return s.nodeName&&s.nodeName.toLowerCase()===c.toLowerCase()}var ke=n.pop,F=n.sort,me=n.splice,le="[\\x20\\t\\r\\n\\f]",Ye=new RegExp("^"+le+"+|((?:^|[^\\\\])(?:\\\\.)*)"+le+"+$","g");d.contains=function(s,c){var u=c&&c.parentNode;return s===u||!!(u&&u.nodeType===1&&(s.contains?s.contains(u):s.compareDocumentPosition&&s.compareDocumentPosition(u)&16))};var De=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ue(s,c){return c?s==="\0"?"�":s.slice(0,-1)+"\\"+s.charCodeAt(s.length-1).toString(16)+" ":"\\"+s}d.escapeSelector=function(s){return(s+"").replace(De,ue)};var w=q,Y=f;(function(){var s,c,u,p,g,y=Y,v,M,N,R,te,ae=d.expando,X=0,pe=0,Ge=oi(),ot=oi(),Qe=oi(),bt=oi(),yt=function(C,V){return C===V&&(g=!0),0},Kt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Gt="(?:\\\\[\\da-fA-F]{1,6}"+le+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",st="\\["+le+"*("+Gt+")(?:"+le+"*([*^$|!~]?=)"+le+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Gt+"))|)"+le+"*\\]",Yn=":("+Gt+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+st+")*)|.*)\\)|)",ct=new RegExp(le+"+","g"),mt=new RegExp("^"+le+"*,"+le+"*"),ei=new RegExp("^"+le+"*([>+~]|"+le+")"+le+"*"),Ti=new RegExp(le+"|>"),Zt=new RegExp(Yn),ti=new RegExp("^"+Gt+"$"),on={ID:new RegExp("^#("+Gt+")"),CLASS:new RegExp("^\\.("+Gt+")"),TAG:new RegExp("^("+Gt+"|[*])"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+Yn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+le+"*(even|odd|(([+-]|)(\\d*)n|)"+le+"*(?:([+-]|)"+le+"*(\\d+)|))"+le+"*\\)|)","i"),bool:new RegExp("^(?:"+Kt+")$","i"),needsContext:new RegExp("^"+le+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+le+"*((?:-\\d)?\\d*)"+le+"*\\)|)(?=[^-]|$)","i")},kn=/^(?:input|select|textarea|button)$/i,En=/^h\d$/i,Rt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ci=/[+~]/,mn=new RegExp("\\\\[\\da-fA-F]{1,6}"+le+"?|\\\\([^\\r\\n\\f])","g"),vn=function(C,V){var z="0x"+C.slice(1)-65536;return V||(z<0?String.fromCharCode(z+65536):String.fromCharCode(z>>10|55296,z&1023|56320))},Fs=function(){Vn()},Us=ci(function(C){return C.disabled===!0&&re(C,"fieldset")},{dir:"parentNode",next:"legend"});function Hs(){try{return v.activeElement}catch{}}try{y.apply(n=o.call(w.childNodes),w.childNodes),n[w.childNodes.length].nodeType}catch{y={apply:function(V,z){Y.apply(V,o.call(z))},call:function(V){Y.apply(V,o.call(arguments,1))}}}function dt(C,V,z,J){var ne,be,Ne,He,xe,et,Ke,Xe=V&&V.ownerDocument,tt=V?V.nodeType:9;if(z=z||[],typeof C!="string"||!C||tt!==1&&tt!==9&&tt!==11)return z;if(!J&&(Vn(V),V=V||v,N)){if(tt!==11&&(xe=Rt.exec(C)))if(ne=xe[1]){if(tt===9)if(Ne=V.getElementById(ne)){if(Ne.id===ne)return y.call(z,Ne),z}else return z;else if(Xe&&(Ne=Xe.getElementById(ne))&&dt.contains(V,Ne)&&Ne.id===ne)return y.call(z,Ne),z}else{if(xe[2])return y.apply(z,V.getElementsByTagName(C)),z;if((ne=xe[3])&&V.getElementsByClassName)return y.apply(z,V.getElementsByClassName(ne)),z}if(!bt[C+" "]&&(!R||!R.test(C))){if(Ke=C,Xe=V,tt===1&&(Ti.test(C)||ei.test(C))){for(Xe=Ci.test(C)&&Bi(V.parentNode)||V,(Xe!=V||!A.scope)&&((He=V.getAttribute("id"))?He=d.escapeSelector(He):V.setAttribute("id",He=ae)),et=ri(C),be=et.length;be--;)et[be]=(He?"#"+He:":scope")+" "+li(et[be]);Ke=et.join(",")}try{return y.apply(z,Xe.querySelectorAll(Ke)),z}catch{bt(C,!0)}finally{He===ae&&V.removeAttribute("id")}}}return is(C.replace(Ye,"$1"),V,z,J)}function oi(){var C=[];function V(z,J){return C.push(z+" ")>c.cacheLength&&delete V[C.shift()],V[z+" "]=J}return V}function zt(C){return C[ae]=!0,C}function na(C){var V=v.createElement("fieldset");try{return!!C(V)}catch{return!1}finally{V.parentNode&&V.parentNode.removeChild(V),V=null}}function js(C){return function(V){return re(V,"input")&&V.type===C}}function zs(C){return function(V){return(re(V,"input")||re(V,"button"))&&V.type===C}}function ns(C){return function(V){return"form"in V?V.parentNode&&V.disabled===!1?"label"in V?"label"in V.parentNode?V.parentNode.disabled===C:V.disabled===C:V.isDisabled===C||V.isDisabled!==!C&&Us(V)===C:V.disabled===C:"label"in V?V.disabled===C:!1}}function qn(C){return zt(function(V){return V=+V,zt(function(z,J){for(var ne,be=C([],z.length,V),Ne=be.length;Ne--;)z[ne=be[Ne]]&&(z[ne]=!(J[ne]=z[ne]))})})}function Bi(C){return C&&typeof C.getElementsByTagName<"u"&&C}function Vn(C){var V,z=C?C.ownerDocument||C:w;return z==v||z.nodeType!==9||!z.documentElement||(v=z,M=v.documentElement,N=!d.isXMLDoc(v),te=M.matches||M.webkitMatchesSelector||M.msMatchesSelector,M.msMatchesSelector&&w!=v&&(V=v.defaultView)&&V.top!==V&&V.addEventListener("unload",Fs),A.getById=na(function(J){return M.appendChild(J).id=d.expando,!v.getElementsByName||!v.getElementsByName(d.expando).length}),A.disconnectedMatch=na(function(J){return te.call(J,"*")}),A.scope=na(function(){return v.querySelectorAll(":scope")}),A.cssHas=na(function(){try{return v.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),A.getById?(c.filter.ID=function(J){var ne=J.replace(mn,vn);return function(be){return be.getAttribute("id")===ne}},c.find.ID=function(J,ne){if(typeof ne.getElementById<"u"&&N){var be=ne.getElementById(J);return be?[be]:[]}}):(c.filter.ID=function(J){var ne=J.replace(mn,vn);return function(be){var Ne=typeof be.getAttributeNode<"u"&&be.getAttributeNode("id");return Ne&&Ne.value===ne}},c.find.ID=function(J,ne){if(typeof ne.getElementById<"u"&&N){var be,Ne,He,xe=ne.getElementById(J);if(xe){if(be=xe.getAttributeNode("id"),be&&be.value===J)return[xe];for(He=ne.getElementsByName(J),Ne=0;xe=He[Ne++];)if(be=xe.getAttributeNode("id"),be&&be.value===J)return[xe]}return[]}}),c.find.TAG=function(J,ne){return typeof ne.getElementsByTagName<"u"?ne.getElementsByTagName(J):ne.querySelectorAll(J)},c.find.CLASS=function(J,ne){if(typeof ne.getElementsByClassName<"u"&&N)return ne.getElementsByClassName(J)},R=[],na(function(J){var ne;M.appendChild(J).innerHTML="<a id='"+ae+"' href='' disabled='disabled'></a><select id='"+ae+"-\r\\' disabled='disabled'><option selected=''></option></select>",J.querySelectorAll("[selected]").length||R.push("\\["+le+"*(?:value|"+Kt+")"),J.querySelectorAll("[id~="+ae+"-]").length||R.push("~="),J.querySelectorAll("a#"+ae+"+*").length||R.push(".#.+[+~]"),J.querySelectorAll(":checked").length||R.push(":checked"),ne=v.createElement("input"),ne.setAttribute("type","hidden"),J.appendChild(ne).setAttribute("name","D"),M.appendChild(J).disabled=!0,J.querySelectorAll(":disabled").length!==2&&R.push(":enabled",":disabled"),ne=v.createElement("input"),ne.setAttribute("name",""),J.appendChild(ne),J.querySelectorAll("[name='']").length||R.push("\\["+le+"*name"+le+"*="+le+`*(?:''|"")`)}),A.cssHas||R.push(":has"),R=R.length&&new RegExp(R.join("|")),yt=function(J,ne){if(J===ne)return g=!0,0;var be=!J.compareDocumentPosition-!ne.compareDocumentPosition;return be||(be=(J.ownerDocument||J)==(ne.ownerDocument||ne)?J.compareDocumentPosition(ne):1,be&1||!A.sortDetached&&ne.compareDocumentPosition(J)===be?J===v||J.ownerDocument==w&&dt.contains(w,J)?-1:ne===v||ne.ownerDocument==w&&dt.contains(w,ne)?1:p?m.call(p,J)-m.call(p,ne):0:be&4?-1:1)}),v}dt.matches=function(C,V){return dt(C,null,null,V)},dt.matchesSelector=function(C,V){if(Vn(C),N&&!bt[V+" "]&&(!R||!R.test(V)))try{var z=te.call(C,V);if(z||A.disconnectedMatch||C.document&&C.document.nodeType!==11)return z}catch{bt(V,!0)}return dt(V,v,null,[C]).length>0},dt.contains=function(C,V){return(C.ownerDocument||C)!=v&&Vn(C),d.contains(C,V)},dt.attr=function(C,V){(C.ownerDocument||C)!=v&&Vn(C);var z=c.attrHandle[V.toLowerCase()],J=z&&k.call(c.attrHandle,V.toLowerCase())?z(C,V,!N):void 0;return J!==void 0?J:C.getAttribute(V)},dt.error=function(C){throw new Error("Syntax error, unrecognized expression: "+C)},d.uniqueSort=function(C){var V,z=[],J=0,ne=0;if(g=!A.sortStable,p=!A.sortStable&&o.call(C,0),F.call(C,yt),g){for(;V=C[ne++];)V===C[ne]&&(J=z.push(ne));for(;J--;)me.call(C,z[J],1)}return p=null,C},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(o.apply(this)))},c=d.expr={cacheLength:50,createPseudo:zt,match:on,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(C){return C[1]=C[1].replace(mn,vn),C[3]=(C[3]||C[4]||C[5]||"").replace(mn,vn),C[2]==="~="&&(C[3]=" "+C[3]+" "),C.slice(0,4)},CHILD:function(C){return C[1]=C[1].toLowerCase(),C[1].slice(0,3)==="nth"?(C[3]||dt.error(C[0]),C[4]=+(C[4]?C[5]+(C[6]||1):2*(C[3]==="even"||C[3]==="odd")),C[5]=+(C[7]+C[8]||C[3]==="odd")):C[3]&&dt.error(C[0]),C},PSEUDO:function(C){var V,z=!C[6]&&C[2];return on.CHILD.test(C[0])?null:(C[3]?C[2]=C[4]||C[5]||"":z&&Zt.test(z)&&(V=ri(z,!0))&&(V=z.indexOf(")",z.length-V)-z.length)&&(C[0]=C[0].slice(0,V),C[2]=z.slice(0,V)),C.slice(0,3))}},filter:{TAG:function(C){var V=C.replace(mn,vn).toLowerCase();return C==="*"?function(){return!0}:function(z){return re(z,V)}},CLASS:function(C){var V=Ge[C+" "];return V||(V=new RegExp("(^|"+le+")"+C+"("+le+"|$)"))&&Ge(C,function(z){return V.test(typeof z.className=="string"&&z.className||typeof z.getAttribute<"u"&&z.getAttribute("class")||"")})},ATTR:function(C,V,z){return function(J){var ne=dt.attr(J,C);return ne==null?V==="!=":V?(ne+="",V==="="?ne===z:V==="!="?ne!==z:V==="^="?z&&ne.indexOf(z)===0:V==="*="?z&&ne.indexOf(z)>-1:V==="$="?z&&ne.slice(-z.length)===z:V==="~="?(" "+ne.replace(ct," ")+" ").indexOf(z)>-1:V==="|="?ne===z||ne.slice(0,z.length+1)===z+"-":!1):!0}},CHILD:function(C,V,z,J,ne){var be=C.slice(0,3)!=="nth",Ne=C.slice(-4)!=="last",He=V==="of-type";return J===1&&ne===0?function(xe){return!!xe.parentNode}:function(xe,et,Ke){var Xe,tt,We,ht,Mt,Tt=be!==Ne?"nextSibling":"previousSibling",Ht=xe.parentNode,cn=He&&xe.nodeName.toLowerCase(),aa=!Ke&&!He,Ct=!1;if(Ht){if(be){for(;Tt;){for(We=xe;We=We[Tt];)if(He?re(We,cn):We.nodeType===1)return!1;Mt=Tt=C==="only"&&!Mt&&"nextSibling"}return!0}if(Mt=[Ne?Ht.firstChild:Ht.lastChild],Ne&&aa){for(tt=Ht[ae]||(Ht[ae]={}),Xe=tt[C]||[],ht=Xe[0]===X&&Xe[1],Ct=ht&&Xe[2],We=ht&&Ht.childNodes[ht];We=++ht&&We&&We[Tt]||(Ct=ht=0)||Mt.pop();)if(We.nodeType===1&&++Ct&&We===xe){tt[C]=[X,ht,Ct];break}}else if(aa&&(tt=xe[ae]||(xe[ae]={}),Xe=tt[C]||[],ht=Xe[0]===X&&Xe[1],Ct=ht),Ct===!1)for(;(We=++ht&&We&&We[Tt]||(Ct=ht=0)||Mt.pop())&&!((He?re(We,cn):We.nodeType===1)&&++Ct&&(aa&&(tt=We[ae]||(We[ae]={}),tt[C]=[X,Ct]),We===xe)););return Ct-=ne,Ct===J||Ct%J===0&&Ct/J>=0}}},PSEUDO:function(C,V){var z,J=c.pseudos[C]||c.setFilters[C.toLowerCase()]||dt.error("unsupported pseudo: "+C);return J[ae]?J(V):J.length>1?(z=[C,C,"",V],c.setFilters.hasOwnProperty(C.toLowerCase())?zt(function(ne,be){for(var Ne,He=J(ne,V),xe=He.length;xe--;)Ne=m.call(ne,He[xe]),ne[Ne]=!(be[Ne]=He[xe])}):function(ne){return J(ne,0,z)}):J}},pseudos:{not:zt(function(C){var V=[],z=[],J=Ei(C.replace(Ye,"$1"));return J[ae]?zt(function(ne,be,Ne,He){for(var xe,et=J(ne,null,He,[]),Ke=ne.length;Ke--;)(xe=et[Ke])&&(ne[Ke]=!(be[Ke]=xe))}):function(ne,be,Ne){return V[0]=ne,J(V,null,Ne,z),V[0]=null,!z.pop()}}),has:zt(function(C){return function(V){return dt(C,V).length>0}}),contains:zt(function(C){return C=C.replace(mn,vn),function(V){return(V.textContent||d.text(V)).indexOf(C)>-1}}),lang:zt(function(C){return ti.test(C||"")||dt.error("unsupported lang: "+C),C=C.replace(mn,vn).toLowerCase(),function(V){var z;do if(z=N?V.lang:V.getAttribute("xml:lang")||V.getAttribute("lang"))return z=z.toLowerCase(),z===C||z.indexOf(C+"-")===0;while((V=V.parentNode)&&V.nodeType===1);return!1}}),target:function(C){var V=t.location&&t.location.hash;return V&&V.slice(1)===C.id},root:function(C){return C===M},focus:function(C){return C===Hs()&&v.hasFocus()&&!!(C.type||C.href||~C.tabIndex)},enabled:ns(!1),disabled:ns(!0),checked:function(C){return re(C,"input")&&!!C.checked||re(C,"option")&&!!C.selected},selected:function(C){return C.parentNode&&C.parentNode.selectedIndex,C.selected===!0},empty:function(C){for(C=C.firstChild;C;C=C.nextSibling)if(C.nodeType<6)return!1;return!0},parent:function(C){return!c.pseudos.empty(C)},header:function(C){return En.test(C.nodeName)},input:function(C){return kn.test(C.nodeName)},button:function(C){return re(C,"input")&&C.type==="button"||re(C,"button")},text:function(C){var V;return re(C,"input")&&C.type==="text"&&((V=C.getAttribute("type"))==null||V.toLowerCase()==="text")},first:qn(function(){return[0]}),last:qn(function(C,V){return[V-1]}),eq:qn(function(C,V,z){return[z<0?z+V:z]}),even:qn(function(C,V){for(var z=0;z<V;z+=2)C.push(z);return C}),odd:qn(function(C,V){for(var z=1;z<V;z+=2)C.push(z);return C}),lt:qn(function(C,V,z){var J;for(z<0?J=z+V:z>V?J=V:J=z;--J>=0;)C.push(J);return C}),gt:qn(function(C,V,z){for(var J=z<0?z+V:z;++J<V;)C.push(J);return C})}},c.pseudos.nth=c.pseudos.eq;for(s in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[s]=js(s);for(s in{submit:!0,reset:!0})c.pseudos[s]=zs(s);function as(){}as.prototype=c.filters=c.pseudos,c.setFilters=new as;function ri(C,V){var z,J,ne,be,Ne,He,xe,et=ot[C+" "];if(et)return V?0:et.slice(0);for(Ne=C,He=[],xe=c.preFilter;Ne;){(!z||(J=mt.exec(Ne)))&&(J&&(Ne=Ne.slice(J[0].length)||Ne),He.push(ne=[])),z=!1,(J=ei.exec(Ne))&&(z=J.shift(),ne.push({value:z,type:J[0].replace(Ye," ")}),Ne=Ne.slice(z.length));for(be in c.filter)(J=on[be].exec(Ne))&&(!xe[be]||(J=xe[be](J)))&&(z=J.shift(),ne.push({value:z,type:be,matches:J}),Ne=Ne.slice(z.length));if(!z)break}return V?Ne.length:Ne?dt.error(C):ot(C,He).slice(0)}function li(C){for(var V=0,z=C.length,J="";V<z;V++)J+=C[V].value;return J}function ci(C,V,z){var J=V.dir,ne=V.next,be=ne||J,Ne=z&&be==="parentNode",He=pe++;return V.first?function(xe,et,Ke){for(;xe=xe[J];)if(xe.nodeType===1||Ne)return C(xe,et,Ke);return!1}:function(xe,et,Ke){var Xe,tt,We=[X,He];if(Ke){for(;xe=xe[J];)if((xe.nodeType===1||Ne)&&C(xe,et,Ke))return!0}else for(;xe=xe[J];)if(xe.nodeType===1||Ne)if(tt=xe[ae]||(xe[ae]={}),ne&&re(xe,ne))xe=xe[J]||xe;else{if((Xe=tt[be])&&Xe[0]===X&&Xe[1]===He)return We[2]=Xe[2];if(tt[be]=We,We[2]=C(xe,et,Ke))return!0}return!1}}function Ni(C){return C.length>1?function(V,z,J){for(var ne=C.length;ne--;)if(!C[ne](V,z,J))return!1;return!0}:C[0]}function Ys(C,V,z){for(var J=0,ne=V.length;J<ne;J++)dt(C,V[J],z);return z}function ui(C,V,z,J,ne){for(var be,Ne=[],He=0,xe=C.length,et=V!=null;He<xe;He++)(be=C[He])&&(!z||z(be,J,ne))&&(Ne.push(be),et&&V.push(He));return Ne}function xi(C,V,z,J,ne,be){return J&&!J[ae]&&(J=xi(J)),ne&&!ne[ae]&&(ne=xi(ne,be)),zt(function(Ne,He,xe,et){var Ke,Xe,tt,We,ht=[],Mt=[],Tt=He.length,Ht=Ne||Ys(V||"*",xe.nodeType?[xe]:xe,[]),cn=C&&(Ne||!V)?ui(Ht,ht,C,xe,et):Ht;if(z?(We=ne||(Ne?C:Tt||J)?[]:He,z(cn,We,xe,et)):We=cn,J)for(Ke=ui(We,Mt),J(Ke,[],xe,et),Xe=Ke.length;Xe--;)(tt=Ke[Xe])&&(We[Mt[Xe]]=!(cn[Mt[Xe]]=tt));if(Ne){if(ne||C){if(ne){for(Ke=[],Xe=We.length;Xe--;)(tt=We[Xe])&&Ke.push(cn[Xe]=tt);ne(null,We=[],Ke,et)}for(Xe=We.length;Xe--;)(tt=We[Xe])&&(Ke=ne?m.call(Ne,tt):ht[Xe])>-1&&(Ne[Ke]=!(He[Ke]=tt))}}else We=ui(We===He?We.splice(Tt,We.length):We),ne?ne(null,He,We,et):y.apply(He,We)})}function Ii(C){for(var V,z,J,ne=C.length,be=c.relative[C[0].type],Ne=be||c.relative[" "],He=be?1:0,xe=ci(function(Xe){return Xe===V},Ne,!0),et=ci(function(Xe){return m.call(V,Xe)>-1},Ne,!0),Ke=[function(Xe,tt,We){var ht=!be&&(We||tt!=u)||((V=tt).nodeType?xe(Xe,tt,We):et(Xe,tt,We));return V=null,ht}];He<ne;He++)if(z=c.relative[C[He].type])Ke=[ci(Ni(Ke),z)];else{if(z=c.filter[C[He].type].apply(null,C[He].matches),z[ae]){for(J=++He;J<ne&&!c.relative[C[J].type];J++);return xi(He>1&&Ni(Ke),He>1&&li(C.slice(0,He-1).concat({value:C[He-2].type===" "?"*":""})).replace(Ye,"$1"),z,He<J&&Ii(C.slice(He,J)),J<ne&&Ii(C=C.slice(J)),J<ne&&li(C))}Ke.push(z)}return Ni(Ke)}function Ws(C,V){var z=V.length>0,J=C.length>0,ne=function(be,Ne,He,xe,et){var Ke,Xe,tt,We=0,ht="0",Mt=be&&[],Tt=[],Ht=u,cn=be||J&&c.find.TAG("*",et),aa=X+=Ht==null?1:Math.random()||.1,Ct=cn.length;for(et&&(u=Ne==v||Ne||et);ht!==Ct&&(Ke=cn[ht])!=null;ht++){if(J&&Ke){for(Xe=0,!Ne&&Ke.ownerDocument!=v&&(Vn(Ke),He=!N);tt=C[Xe++];)if(tt(Ke,Ne||v,He)){y.call(xe,Ke);break}et&&(X=aa)}z&&((Ke=!tt&&Ke)&&We--,be&&Mt.push(Ke))}if(We+=ht,z&&ht!==We){for(Xe=0;tt=V[Xe++];)tt(Mt,Tt,Ne,He);if(be){if(We>0)for(;ht--;)Mt[ht]||Tt[ht]||(Tt[ht]=ke.call(xe));Tt=ui(Tt)}y.apply(xe,Tt),et&&!be&&Tt.length>0&&We+V.length>1&&d.uniqueSort(xe)}return et&&(X=aa,u=Ht),Mt};return z?zt(ne):ne}function Ei(C,V){var z,J=[],ne=[],be=Qe[C+" "];if(!be){for(V||(V=ri(C)),z=V.length;z--;)be=Ii(V[z]),be[ae]?J.push(be):ne.push(be);be=Qe(C,Ws(ne,J)),be.selector=C}return be}function is(C,V,z,J){var ne,be,Ne,He,xe,et=typeof C=="function"&&C,Ke=!J&&ri(C=et.selector||C);if(z=z||[],Ke.length===1){if(be=Ke[0]=Ke[0].slice(0),be.length>2&&(Ne=be[0]).type==="ID"&&V.nodeType===9&&N&&c.relative[be[1].type]){if(V=(c.find.ID(Ne.matches[0].replace(mn,vn),V)||[])[0],V)et&&(V=V.parentNode);else return z;C=C.slice(be.shift().value.length)}for(ne=on.needsContext.test(C)?0:be.length;ne--&&(Ne=be[ne],!c.relative[He=Ne.type]);)if((xe=c.find[He])&&(J=xe(Ne.matches[0].replace(mn,vn),Ci.test(be[0].type)&&Bi(V.parentNode)||V))){if(be.splice(ne,1),C=J.length&&li(be),!C)return y.apply(z,J),z;break}}return(et||Ei(C,Ke))(J,V,!N,z,!V||Ci.test(C)&&Bi(V.parentNode)||V),z}A.sortStable=ae.split("").sort(yt).join("")===ae,Vn(),A.sortDetached=na(function(C){return C.compareDocumentPosition(v.createElement("fieldset"))&1}),d.find=dt,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,dt.compile=Ei,dt.select=is,dt.setDocument=Vn,dt.tokenize=ri,dt.escape=d.escapeSelector,dt.getText=d.text,dt.isXML=d.isXMLDoc,dt.selectors=d.expr,dt.support=d.support,dt.uniqueSort=d.uniqueSort})();var E=function(s,c,u){for(var p=[],g=u!==void 0;(s=s[c])&&s.nodeType!==9;)if(s.nodeType===1){if(g&&d(s).is(u))break;p.push(s)}return p},W=function(s,c){for(var u=[];s;s=s.nextSibling)s.nodeType===1&&s!==c&&u.push(s);return u},fe=d.expr.match.needsContext,T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(s,c,u){return H(c)?d.grep(s,function(p,g){return!!c.call(p,g,p)!==u}):c.nodeType?d.grep(s,function(p){return p===c!==u}):typeof c!="string"?d.grep(s,function(p){return m.call(c,p)>-1!==u}):d.filter(c,s,u)}d.filter=function(s,c,u){var p=c[0];return u&&(s=":not("+s+")"),c.length===1&&p.nodeType===1?d.find.matchesSelector(p,s)?[p]:[]:d.find.matches(s,d.grep(c,function(g){return g.nodeType===1}))},d.fn.extend({find:function(s){var c,u,p=this.length,g=this;if(typeof s!="string")return this.pushStack(d(s).filter(function(){for(c=0;c<p;c++)if(d.contains(g[c],this))return!0}));for(u=this.pushStack([]),c=0;c<p;c++)d.find(s,g[c],u);return p>1?d.uniqueSort(u):u},filter:function(s){return this.pushStack(I(this,s||[],!1))},not:function(s){return this.pushStack(I(this,s||[],!0))},is:function(s){return!!I(this,typeof s=="string"&&fe.test(s)?d(s):s||[],!1).length}});var S,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=d.fn.init=function(s,c,u){var p,g;if(!s)return this;if(u=u||S,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?p=[null,s,null]:p=P.exec(s),p&&(p[1]||!c))if(p[1]){if(c=c instanceof d?c[0]:c,d.merge(this,d.parseHTML(p[1],c&&c.nodeType?c.ownerDocument||c:q,!0)),T.test(p[1])&&d.isPlainObject(c))for(p in c)H(this[p])?this[p](c[p]):this.attr(p,c[p]);return this}else return g=q.getElementById(p[2]),g&&(this[0]=g,this.length=1),this;else return!c||c.jquery?(c||u).find(s):this.constructor(c).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(H(s))return u.ready!==void 0?u.ready(s):s(d)}return d.makeArray(s,this)};G.prototype=d.fn,S=d(q);var B=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(s){var c=d(s,this),u=c.length;return this.filter(function(){for(var p=0;p<u;p++)if(d.contains(this,c[p]))return!0})},closest:function(s,c){var u,p=0,g=this.length,y=[],v=typeof s!="string"&&d(s);if(!fe.test(s)){for(;p<g;p++)for(u=this[p];u&&u!==c;u=u.parentNode)if(u.nodeType<11&&(v?v.index(u)>-1:u.nodeType===1&&d.find.matchesSelector(u,s))){y.push(u);break}}return this.pushStack(y.length>1?d.uniqueSort(y):y)},index:function(s){return s?typeof s=="string"?m.call(d(s),this[0]):m.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,c){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(s,c))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function U(s,c){for(;(s=s[c])&&s.nodeType!==1;);return s}d.each({parent:function(s){var c=s.parentNode;return c&&c.nodeType!==11?c:null},parents:function(s){return E(s,"parentNode")},parentsUntil:function(s,c,u){return E(s,"parentNode",u)},next:function(s){return U(s,"nextSibling")},prev:function(s){return U(s,"previousSibling")},nextAll:function(s){return E(s,"nextSibling")},prevAll:function(s){return E(s,"previousSibling")},nextUntil:function(s,c,u){return E(s,"nextSibling",u)},prevUntil:function(s,c,u){return E(s,"previousSibling",u)},siblings:function(s){return W((s.parentNode||{}).firstChild,s)},children:function(s){return W(s.firstChild)},contents:function(s){return s.contentDocument!=null&&a(s.contentDocument)?s.contentDocument:(re(s,"template")&&(s=s.content||s),d.merge([],s.childNodes))}},function(s,c){d.fn[s]=function(u,p){var g=d.map(this,c,u);return s.slice(-5)!=="Until"&&(p=u),p&&typeof p=="string"&&(g=d.filter(p,g)),this.length>1&&(O[s]||d.uniqueSort(g),B.test(s)&&g.reverse()),this.pushStack(g)}});var Z=/[^\x20\t\r\n\f]+/g;function ee(s){var c={};return d.each(s.match(Z)||[],function(u,p){c[p]=!0}),c}d.Callbacks=function(s){s=typeof s=="string"?ee(s):d.extend({},s);var c,u,p,g,y=[],v=[],M=-1,N=function(){for(g=g||s.once,p=c=!0;v.length;M=-1)for(u=v.shift();++M<y.length;)y[M].apply(u[0],u[1])===!1&&s.stopOnFalse&&(M=y.length,u=!1);s.memory||(u=!1),c=!1,g&&(u?y=[]:y="")},R={add:function(){return y&&(u&&!c&&(M=y.length-1,v.push(u)),function te(ae){d.each(ae,function(X,pe){H(pe)?(!s.unique||!R.has(pe))&&y.push(pe):pe&&pe.length&&ge(pe)!=="string"&&te(pe)})}(arguments),u&&!c&&N()),this},remove:function(){return d.each(arguments,function(te,ae){for(var X;(X=d.inArray(ae,y,X))>-1;)y.splice(X,1),X<=M&&M--}),this},has:function(te){return te?d.inArray(te,y)>-1:y.length>0},empty:function(){return y&&(y=[]),this},disable:function(){return g=v=[],y=u="",this},disabled:function(){return!y},lock:function(){return g=v=[],!u&&!c&&(y=u=""),this},locked:function(){return!!g},fireWith:function(te,ae){return g||(ae=ae||[],ae=[te,ae.slice?ae.slice():ae],v.push(ae),c||N()),this},fire:function(){return R.fireWith(this,arguments),this},fired:function(){return!!p}};return R};function we(s){return s}function Se(s){throw s}function Ce(s,c,u,p){var g;try{s&&H(g=s.promise)?g.call(s).done(c).fail(u):s&&H(g=s.then)?g.call(s,c,u):c.apply(void 0,[s].slice(p))}catch(y){u.apply(void 0,[y])}}d.extend({Deferred:function(s){var c=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],u="pending",p={state:function(){return u},always:function(){return g.done(arguments).fail(arguments),this},catch:function(y){return p.then(null,y)},pipe:function(){var y=arguments;return d.Deferred(function(v){d.each(c,function(M,N){var R=H(y[N[4]])&&y[N[4]];g[N[1]](function(){var te=R&&R.apply(this,arguments);te&&H(te.promise)?te.promise().progress(v.notify).done(v.resolve).fail(v.reject):v[N[0]+"With"](this,R?[te]:arguments)})}),y=null}).promise()},then:function(y,v,M){var N=0;function R(te,ae,X,pe){return function(){var Ge=this,ot=arguments,Qe=function(){var yt,Kt;if(!(te<N)){if(yt=X.apply(Ge,ot),yt===ae.promise())throw new TypeError("Thenable self-resolution");Kt=yt&&(typeof yt=="object"||typeof yt=="function")&&yt.then,H(Kt)?pe?Kt.call(yt,R(N,ae,we,pe),R(N,ae,Se,pe)):(N++,Kt.call(yt,R(N,ae,we,pe),R(N,ae,Se,pe),R(N,ae,we,ae.notifyWith))):(X!==we&&(Ge=void 0,ot=[yt]),(pe||ae.resolveWith)(Ge,ot))}},bt=pe?Qe:function(){try{Qe()}catch(yt){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(yt,bt.error),te+1>=N&&(X!==Se&&(Ge=void 0,ot=[yt]),ae.rejectWith(Ge,ot))}};te?bt():(d.Deferred.getErrorHook?bt.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(bt.error=d.Deferred.getStackHook()),t.setTimeout(bt))}}return d.Deferred(function(te){c[0][3].add(R(0,te,H(M)?M:we,te.notifyWith)),c[1][3].add(R(0,te,H(y)?y:we)),c[2][3].add(R(0,te,H(v)?v:Se))}).promise()},promise:function(y){return y!=null?d.extend(y,p):p}},g={};return d.each(c,function(y,v){var M=v[2],N=v[5];p[v[1]]=M.add,N&&M.add(function(){u=N},c[3-y][2].disable,c[3-y][3].disable,c[0][2].lock,c[0][3].lock),M.add(v[3].fire),g[v[0]]=function(){return g[v[0]+"With"](this===g?void 0:this,arguments),this},g[v[0]+"With"]=M.fireWith}),p.promise(g),s&&s.call(g,g),g},when:function(s){var c=arguments.length,u=c,p=Array(u),g=o.call(arguments),y=d.Deferred(),v=function(M){return function(N){p[M]=this,g[M]=arguments.length>1?o.call(arguments):N,--c||y.resolveWith(p,g)}};if(c<=1&&(Ce(s,y.done(v(u)).resolve,y.reject,!c),y.state()==="pending"||H(g[u]&&g[u].then)))return y.then();for(;u--;)Ce(g[u],v(u),y.reject);return y.promise()}});var Je=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(s,c){t.console&&t.console.warn&&s&&Je.test(s.name)&&t.console.warn("jQuery.Deferred exception: "+s.message,s.stack,c)},d.readyException=function(s){t.setTimeout(function(){throw s})};var Pe=d.Deferred();d.fn.ready=function(s){return Pe.then(s).catch(function(c){d.readyException(c)}),this},d.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--d.readyWait:d.isReady)||(d.isReady=!0,!(s!==!0&&--d.readyWait>0)&&Pe.resolveWith(q,[d]))}}),d.ready.then=Pe.then;function qe(){q.removeEventListener("DOMContentLoaded",qe),t.removeEventListener("load",qe),d.ready()}q.readyState==="complete"||q.readyState!=="loading"&&!q.documentElement.doScroll?t.setTimeout(d.ready):(q.addEventListener("DOMContentLoaded",qe),t.addEventListener("load",qe));var rt=function(s,c,u,p,g,y,v){var M=0,N=s.length,R=u==null;if(ge(u)==="object"){g=!0;for(M in u)rt(s,c,M,u[M],!0,y,v)}else if(p!==void 0&&(g=!0,H(p)||(v=!0),R&&(v?(c.call(s,p),c=null):(R=c,c=function(te,ae,X){return R.call(d(te),X)})),c))for(;M<N;M++)c(s[M],u,v?p:p.call(s[M],M,c(s[M],u)));return g?s:R?c.call(s):N?c(s[0],u):y},Wt=/^-ms-/,wt=/-([a-z])/g;function Jn(s,c){return c.toUpperCase()}function Nt(s){return s.replace(Wt,"ms-").replace(wt,Jn)}var dn=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function fn(){this.expando=d.expando+fn.uid++}fn.uid=1,fn.prototype={cache:function(s){var c=s[this.expando];return c||(c={},dn(s)&&(s.nodeType?s[this.expando]=c:Object.defineProperty(s,this.expando,{value:c,configurable:!0}))),c},set:function(s,c,u){var p,g=this.cache(s);if(typeof c=="string")g[Nt(c)]=u;else for(p in c)g[Nt(p)]=c[p];return g},get:function(s,c){return c===void 0?this.cache(s):s[this.expando]&&s[this.expando][Nt(c)]},access:function(s,c,u){return c===void 0||c&&typeof c=="string"&&u===void 0?this.get(s,c):(this.set(s,c,u),u!==void 0?u:c)},remove:function(s,c){var u,p=s[this.expando];if(p!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(Nt):(c=Nt(c),c=c in p?[c]:c.match(Z)||[]),u=c.length;u--;)delete p[c[u]];(c===void 0||d.isEmptyObject(p))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var c=s[this.expando];return c!==void 0&&!d.isEmptyObject(c)}};var Le=new fn,gt=new fn,ia=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,sa=/[A-Z]/g;function oa(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:ia.test(s)?JSON.parse(s):s}function Ln(s,c,u){var p;if(u===void 0&&s.nodeType===1)if(p="data-"+c.replace(sa,"-$&").toLowerCase(),u=s.getAttribute(p),typeof u=="string"){try{u=oa(u)}catch{}gt.set(s,c,u)}else u=void 0;return u}d.extend({hasData:function(s){return gt.hasData(s)||Le.hasData(s)},data:function(s,c,u){return gt.access(s,c,u)},removeData:function(s,c){gt.remove(s,c)},_data:function(s,c,u){return Le.access(s,c,u)},_removeData:function(s,c){Le.remove(s,c)}}),d.fn.extend({data:function(s,c){var u,p,g,y=this[0],v=y&&y.attributes;if(s===void 0){if(this.length&&(g=gt.get(y),y.nodeType===1&&!Le.get(y,"hasDataAttrs"))){for(u=v.length;u--;)v[u]&&(p=v[u].name,p.indexOf("data-")===0&&(p=Nt(p.slice(5)),Ln(y,p,g[p])));Le.set(y,"hasDataAttrs",!0)}return g}return typeof s=="object"?this.each(function(){gt.set(this,s)}):rt(this,function(M){var N;if(y&&M===void 0)return N=gt.get(y,s),N!==void 0||(N=Ln(y,s),N!==void 0)?N:void 0;this.each(function(){gt.set(this,s,M)})},null,c,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){gt.remove(this,s)})}}),d.extend({queue:function(s,c,u){var p;if(s)return c=(c||"fx")+"queue",p=Le.get(s,c),u&&(!p||Array.isArray(u)?p=Le.access(s,c,d.makeArray(u)):p.push(u)),p||[]},dequeue:function(s,c){c=c||"fx";var u=d.queue(s,c),p=u.length,g=u.shift(),y=d._queueHooks(s,c),v=function(){d.dequeue(s,c)};g==="inprogress"&&(g=u.shift(),p--),g&&(c==="fx"&&u.unshift("inprogress"),delete y.stop,g.call(s,v,y)),!p&&y&&y.empty.fire()},_queueHooks:function(s,c){var u=c+"queueHooks";return Le.get(s,u)||Le.access(s,u,{empty:d.Callbacks("once memory").add(function(){Le.remove(s,[c+"queue",u])})})}}),d.fn.extend({queue:function(s,c){var u=2;return typeof s!="string"&&(c=s,s="fx",u--),arguments.length<u?d.queue(this[0],s):c===void 0?this:this.each(function(){var p=d.queue(this,s,c);d._queueHooks(this,s),s==="fx"&&p[0]!=="inprogress"&&d.dequeue(this,s)})},dequeue:function(s){return this.each(function(){d.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,c){var u,p=1,g=d.Deferred(),y=this,v=this.length,M=function(){--p||g.resolveWith(y,[y])};for(typeof s!="string"&&(c=s,s=void 0),s=s||"fx";v--;)u=Le.get(y[v],s+"queueHooks"),u&&u.empty&&(p++,u.empty.add(M));return M(),g.promise(c)}});var L=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+L+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],je=q.documentElement,ut=function(s){return d.contains(s.ownerDocument,s)},At={composed:!0};je.getRootNode&&(ut=function(s){return d.contains(s.ownerDocument,s)||s.getRootNode(At)===s.ownerDocument});var se=function(s,c){return s=c||s,s.style.display==="none"||s.style.display===""&&ut(s)&&d.css(s,"display")==="none"};function Ve(s,c,u,p){var g,y,v=20,M=p?function(){return p.cur()}:function(){return d.css(s,c,"")},N=M(),R=u&&u[3]||(d.cssNumber[c]?"":"px"),te=s.nodeType&&(d.cssNumber[c]||R!=="px"&&+N)&&oe.exec(d.css(s,c));if(te&&te[3]!==R){for(N=N/2,R=R||te[3],te=+N||1;v--;)d.style(s,c,te+R),(1-y)*(1-(y=M()/N||.5))<=0&&(v=0),te=te/y;te=te*2,d.style(s,c,te+R),u=u||[]}return u&&(te=+te||+N||0,g=u[1]?te+(u[1]+1)*u[2]:+u[2],p&&(p.unit=R,p.start=te,p.end=g)),g}var ft={};function St(s){var c,u=s.ownerDocument,p=s.nodeName,g=ft[p];return g||(c=u.body.appendChild(u.createElement(p)),g=d.css(c,"display"),c.parentNode.removeChild(c),g==="none"&&(g="block"),ft[p]=g,g)}function Ot(s,c){for(var u,p,g=[],y=0,v=s.length;y<v;y++)p=s[y],p.style&&(u=p.style.display,c?(u==="none"&&(g[y]=Le.get(p,"display")||null,g[y]||(p.style.display="")),p.style.display===""&&se(p)&&(g[y]=St(p))):u!=="none"&&(g[y]="none",Le.set(p,"display",u)));for(y=0;y<v;y++)g[y]!=null&&(s[y].style.display=g[y]);return s}d.fn.extend({show:function(){return Ot(this,!0)},hide:function(){return Ot(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){se(this)?d(this).show():d(this).hide()})}});var ze=/^(?:checkbox|radio)$/i,pn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ze=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=q.createDocumentFragment(),c=s.appendChild(q.createElement("div")),u=q.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),c.appendChild(u),A.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",A.option=!!c.lastChild})();var xt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};xt.tbody=xt.tfoot=xt.colgroup=xt.caption=xt.thead,xt.th=xt.td,A.option||(xt.optgroup=xt.option=[1,"<select multiple='multiple'>","</select>"]);function _t(s,c){var u;return typeof s.getElementsByTagName<"u"?u=s.getElementsByTagName(c||"*"):typeof s.querySelectorAll<"u"?u=s.querySelectorAll(c||"*"):u=[],c===void 0||c&&re(s,c)?d.merge([s],u):u}function di(s,c){for(var u=0,p=s.length;u<p;u++)Le.set(s[u],"globalEval",!c||Le.get(c[u],"globalEval"))}var ss=/<|&#?\w+;/;function $i(s,c,u,p,g){for(var y,v,M,N,R,te,ae=c.createDocumentFragment(),X=[],pe=0,Ge=s.length;pe<Ge;pe++)if(y=s[pe],y||y===0)if(ge(y)==="object")d.merge(X,y.nodeType?[y]:y);else if(!ss.test(y))X.push(c.createTextNode(y));else{for(v=v||ae.appendChild(c.createElement("div")),M=(pn.exec(y)||["",""])[1].toLowerCase(),N=xt[M]||xt._default,v.innerHTML=N[1]+d.htmlPrefilter(y)+N[2],te=N[0];te--;)v=v.lastChild;d.merge(X,v.childNodes),v=ae.firstChild,v.textContent=""}for(ae.textContent="",pe=0;y=X[pe++];){if(p&&d.inArray(y,p)>-1){g&&g.push(y);continue}if(R=ut(y),v=_t(ae.appendChild(y),"script"),R&&di(v),u)for(te=0;y=v[te++];)Ze.test(y.type||"")&&u.push(y)}return ae}var Mi=/^([^.]*)(?:\.(.+)|)/;function Qn(){return!0}function ea(){return!1}function hi(s,c,u,p,g,y){var v,M;if(typeof c=="object"){typeof u!="string"&&(p=p||u,u=void 0);for(M in c)hi(s,M,u,p,c[M],y);return s}if(p==null&&g==null?(g=u,p=u=void 0):g==null&&(typeof u=="string"?(g=p,p=void 0):(g=p,p=u,u=void 0)),g===!1)g=ea;else if(!g)return s;return y===1&&(v=g,g=function(N){return d().off(N),v.apply(this,arguments)},g.guid=v.guid||(v.guid=d.guid++)),s.each(function(){d.event.add(this,c,g,p,u)})}d.event={global:{},add:function(s,c,u,p,g){var y,v,M,N,R,te,ae,X,pe,Ge,ot,Qe=Le.get(s);if(dn(s))for(u.handler&&(y=u,u=y.handler,g=y.selector),g&&d.find.matchesSelector(je,g),u.guid||(u.guid=d.guid++),(N=Qe.events)||(N=Qe.events=Object.create(null)),(v=Qe.handle)||(v=Qe.handle=function(bt){return typeof d<"u"&&d.event.triggered!==bt.type?d.event.dispatch.apply(s,arguments):void 0}),c=(c||"").match(Z)||[""],R=c.length;R--;)M=Mi.exec(c[R])||[],pe=ot=M[1],Ge=(M[2]||"").split(".").sort(),pe&&(ae=d.event.special[pe]||{},pe=(g?ae.delegateType:ae.bindType)||pe,ae=d.event.special[pe]||{},te=d.extend({type:pe,origType:ot,data:p,handler:u,guid:u.guid,selector:g,needsContext:g&&d.expr.match.needsContext.test(g),namespace:Ge.join(".")},y),(X=N[pe])||(X=N[pe]=[],X.delegateCount=0,(!ae.setup||ae.setup.call(s,p,Ge,v)===!1)&&s.addEventListener&&s.addEventListener(pe,v)),ae.add&&(ae.add.call(s,te),te.handler.guid||(te.handler.guid=u.guid)),g?X.splice(X.delegateCount++,0,te):X.push(te),d.event.global[pe]=!0)},remove:function(s,c,u,p,g){var y,v,M,N,R,te,ae,X,pe,Ge,ot,Qe=Le.hasData(s)&&Le.get(s);if(!(!Qe||!(N=Qe.events))){for(c=(c||"").match(Z)||[""],R=c.length;R--;){if(M=Mi.exec(c[R])||[],pe=ot=M[1],Ge=(M[2]||"").split(".").sort(),!pe){for(pe in N)d.event.remove(s,pe+c[R],u,p,!0);continue}for(ae=d.event.special[pe]||{},pe=(p?ae.delegateType:ae.bindType)||pe,X=N[pe]||[],M=M[2]&&new RegExp("(^|\\.)"+Ge.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=y=X.length;y--;)te=X[y],(g||ot===te.origType)&&(!u||u.guid===te.guid)&&(!M||M.test(te.namespace))&&(!p||p===te.selector||p==="**"&&te.selector)&&(X.splice(y,1),te.selector&&X.delegateCount--,ae.remove&&ae.remove.call(s,te));v&&!X.length&&((!ae.teardown||ae.teardown.call(s,Ge,Qe.handle)===!1)&&d.removeEvent(s,pe,Qe.handle),delete N[pe])}d.isEmptyObject(N)&&Le.remove(s,"handle events")}},dispatch:function(s){var c,u,p,g,y,v,M=new Array(arguments.length),N=d.event.fix(s),R=(Le.get(this,"events")||Object.create(null))[N.type]||[],te=d.event.special[N.type]||{};for(M[0]=N,c=1;c<arguments.length;c++)M[c]=arguments[c];if(N.delegateTarget=this,!(te.preDispatch&&te.preDispatch.call(this,N)===!1)){for(v=d.event.handlers.call(this,N,R),c=0;(g=v[c++])&&!N.isPropagationStopped();)for(N.currentTarget=g.elem,u=0;(y=g.handlers[u++])&&!N.isImmediatePropagationStopped();)(!N.rnamespace||y.namespace===!1||N.rnamespace.test(y.namespace))&&(N.handleObj=y,N.data=y.data,p=((d.event.special[y.origType]||{}).handle||y.handler).apply(g.elem,M),p!==void 0&&(N.result=p)===!1&&(N.preventDefault(),N.stopPropagation()));return te.postDispatch&&te.postDispatch.call(this,N),N.result}},handlers:function(s,c){var u,p,g,y,v,M=[],N=c.delegateCount,R=s.target;if(N&&R.nodeType&&!(s.type==="click"&&s.button>=1)){for(;R!==this;R=R.parentNode||this)if(R.nodeType===1&&!(s.type==="click"&&R.disabled===!0)){for(y=[],v={},u=0;u<N;u++)p=c[u],g=p.selector+" ",v[g]===void 0&&(v[g]=p.needsContext?d(g,this).index(R)>-1:d.find(g,this,null,[R]).length),v[g]&&y.push(p);y.length&&M.push({elem:R,handlers:y})}}return R=this,N<c.length&&M.push({elem:R,handlers:c.slice(N)}),M},addProp:function(s,c){Object.defineProperty(d.Event.prototype,s,{enumerable:!0,configurable:!0,get:H(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(u){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(s){return s[d.expando]?s:new d.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var c=this||s;return ze.test(c.type)&&c.click&&re(c,"input")&&ni(c,"click",!0),!1},trigger:function(s){var c=this||s;return ze.test(c.type)&&c.click&&re(c,"input")&&ni(c,"click"),!0},_default:function(s){var c=s.target;return ze.test(c.type)&&c.click&&re(c,"input")&&Le.get(c,"click")||re(c,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function ni(s,c,u){if(!u){Le.get(s,c)===void 0&&d.event.add(s,c,Qn);return}Le.set(s,c,!1),d.event.add(s,c,{namespace:!1,handler:function(p){var g,y=Le.get(this,c);if(p.isTrigger&1&&this[c]){if(y)(d.event.special[c]||{}).delegateType&&p.stopPropagation();else if(y=o.call(arguments),Le.set(this,c,y),this[c](),g=Le.get(this,c),Le.set(this,c,!1),y!==g)return p.stopImmediatePropagation(),p.preventDefault(),g}else y&&(Le.set(this,c,d.event.trigger(y[0],y.slice(1),this)),p.stopPropagation(),p.isImmediatePropagationStopped=Qn)}})}d.removeEvent=function(s,c,u){s.removeEventListener&&s.removeEventListener(c,u)},d.Event=function(s,c){if(!(this instanceof d.Event))return new d.Event(s,c);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Qn:ea,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,c&&d.extend(this,c),this.timeStamp=s&&s.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:ea,isPropagationStopped:ea,isImmediatePropagationStopped:ea,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Qn,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Qn,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Qn,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(s,c){function u(p){if(q.documentMode){var g=Le.get(this,"handle"),y=d.event.fix(p);y.type=p.type==="focusin"?"focus":"blur",y.isSimulated=!0,g(p),y.target===y.currentTarget&&g(y)}else d.event.simulate(c,p.target,d.event.fix(p))}d.event.special[s]={setup:function(){var p;if(ni(this,s,!0),q.documentMode)p=Le.get(this,c),p||this.addEventListener(c,u),Le.set(this,c,(p||0)+1);else return!1},trigger:function(){return ni(this,s),!0},teardown:function(){var p;if(q.documentMode)p=Le.get(this,c)-1,p?Le.set(this,c,p):(this.removeEventListener(c,u),Le.remove(this,c));else return!1},_default:function(p){return Le.get(p.target,s)},delegateType:c},d.event.special[c]={setup:function(){var p=this.ownerDocument||this.document||this,g=q.documentMode?this:p,y=Le.get(g,c);y||(q.documentMode?this.addEventListener(c,u):p.addEventListener(s,u,!0)),Le.set(g,c,(y||0)+1)},teardown:function(){var p=this.ownerDocument||this.document||this,g=q.documentMode?this:p,y=Le.get(g,c)-1;y?Le.set(g,c,y):(q.documentMode?this.removeEventListener(c,u):p.removeEventListener(s,u,!0),Le.remove(g,c))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,c){d.event.special[s]={delegateType:c,bindType:c,handle:function(u){var p,g=this,y=u.relatedTarget,v=u.handleObj;return(!y||y!==g&&!d.contains(g,y))&&(u.type=v.origType,p=v.handler.apply(this,arguments),u.type=c),p}}}),d.fn.extend({on:function(s,c,u,p){return hi(this,s,c,u,p)},one:function(s,c,u,p){return hi(this,s,c,u,p,1)},off:function(s,c,u){var p,g;if(s&&s.preventDefault&&s.handleObj)return p=s.handleObj,d(s.delegateTarget).off(p.namespace?p.origType+"."+p.namespace:p.origType,p.selector,p.handler),this;if(typeof s=="object"){for(g in s)this.off(g,c,s[g]);return this}return(c===!1||typeof c=="function")&&(u=c,c=void 0),u===!1&&(u=ea),this.each(function(){d.event.remove(this,s,u,c)})}});var os=/<script|<style|<link/i,ls=/checked\s*(?:[^=]|=\s*.checked.)/i,cs=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Pi(s,c){return re(s,"table")&&re(c.nodeType!==11?c:c.firstChild,"tr")&&d(s).children("tbody")[0]||s}function us(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function ds(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function Vi(s,c){var u,p,g,y,v,M,N;if(c.nodeType===1){if(Le.hasData(s)&&(y=Le.get(s),N=y.events,N)){Le.remove(c,"handle events");for(g in N)for(u=0,p=N[g].length;u<p;u++)d.event.add(c,g,N[g][u])}gt.hasData(s)&&(v=gt.access(s),M=d.extend({},v),gt.set(c,M))}}function hs(s,c){var u=c.nodeName.toLowerCase();u==="input"&&ze.test(s.type)?c.checked=s.checked:(u==="input"||u==="textarea")&&(c.defaultValue=s.defaultValue)}function ta(s,c,u,p){c=l(c);var g,y,v,M,N,R,te=0,ae=s.length,X=ae-1,pe=c[0],Ge=H(pe);if(Ge||ae>1&&typeof pe=="string"&&!A.checkClone&&ls.test(pe))return s.each(function(ot){var Qe=s.eq(ot);Ge&&(c[0]=pe.call(this,ot,Qe.html())),ta(Qe,c,u,p)});if(ae&&(g=$i(c,s[0].ownerDocument,!1,s,p),y=g.firstChild,g.childNodes.length===1&&(g=y),y||p)){for(v=d.map(_t(g,"script"),us),M=v.length;te<ae;te++)N=g,te!==X&&(N=d.clone(N,!0,!0),M&&d.merge(v,_t(N,"script"))),u.call(s[te],N,te);if(M)for(R=v[v.length-1].ownerDocument,d.map(v,ds),te=0;te<M;te++)N=v[te],Ze.test(N.type||"")&&!Le.access(N,"globalEval")&&d.contains(R,N)&&(N.src&&(N.type||"").toLowerCase()!=="module"?d._evalUrl&&!N.noModule&&d._evalUrl(N.src,{nonce:N.nonce||N.getAttribute("nonce")},R):de(N.textContent.replace(cs,""),N,R))}return s}function Ai(s,c,u){for(var p,g=c?d.filter(c,s):s,y=0;(p=g[y])!=null;y++)!u&&p.nodeType===1&&d.cleanData(_t(p)),p.parentNode&&(u&&ut(p)&&di(_t(p,"script")),p.parentNode.removeChild(p));return s}d.extend({htmlPrefilter:function(s){return s},clone:function(s,c,u){var p,g,y,v,M=s.cloneNode(!0),N=ut(s);if(!A.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!d.isXMLDoc(s))for(v=_t(M),y=_t(s),p=0,g=y.length;p<g;p++)hs(y[p],v[p]);if(c)if(u)for(y=y||_t(s),v=v||_t(M),p=0,g=y.length;p<g;p++)Vi(y[p],v[p]);else Vi(s,M);return v=_t(M,"script"),v.length>0&&di(v,!N&&_t(s,"script")),M},cleanData:function(s){for(var c,u,p,g=d.event.special,y=0;(u=s[y])!==void 0;y++)if(dn(u)){if(c=u[Le.expando]){if(c.events)for(p in c.events)g[p]?d.event.remove(u,p):d.removeEvent(u,p,c.handle);u[Le.expando]=void 0}u[gt.expando]&&(u[gt.expando]=void 0)}}}),d.fn.extend({detach:function(s){return Ai(this,s,!0)},remove:function(s){return Ai(this,s)},text:function(s){return rt(this,function(c){return c===void 0?d.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,s,arguments.length)},append:function(){return ta(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Pi(this,s);c.appendChild(s)}})},prepend:function(){return ta(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Pi(this,s);c.insertBefore(s,c.firstChild)}})},before:function(){return ta(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return ta(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,c=0;(s=this[c])!=null;c++)s.nodeType===1&&(d.cleanData(_t(s,!1)),s.textContent="");return this},clone:function(s,c){return s=s??!1,c=c??s,this.map(function(){return d.clone(this,s,c)})},html:function(s){return rt(this,function(c){var u=this[0]||{},p=0,g=this.length;if(c===void 0&&u.nodeType===1)return u.innerHTML;if(typeof c=="string"&&!os.test(c)&&!xt[(pn.exec(c)||["",""])[1].toLowerCase()]){c=d.htmlPrefilter(c);try{for(;p<g;p++)u=this[p]||{},u.nodeType===1&&(d.cleanData(_t(u,!1)),u.innerHTML=c);u=0}catch{}}u&&this.empty().append(c)},null,s,arguments.length)},replaceWith:function(){var s=[];return ta(this,arguments,function(c){var u=this.parentNode;d.inArray(this,s)<0&&(d.cleanData(_t(this)),u&&u.replaceChild(c,this))},s)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,c){d.fn[s]=function(u){for(var p,g=[],y=d(u),v=y.length-1,M=0;M<=v;M++)p=M===v?this:this.clone(!0),d(y[M])[c](p),f.apply(g,p.get());return this.pushStack(g)}});var fi=new RegExp("^("+L+")(?!px)[a-z%]+$","i"),pi=/^--/,ai=function(s){var c=s.ownerDocument.defaultView;return(!c||!c.opener)&&(c=t),c.getComputedStyle(s)},Li=function(s,c,u){var p,g,y={};for(g in c)y[g]=s.style[g],s.style[g]=c[g];p=u.call(s);for(g in c)s.style[g]=y[g];return p},fs=new RegExp(Re.join("|"),"i");(function(){function s(){if(R){N.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",R.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",je.appendChild(N).appendChild(R);var te=t.getComputedStyle(R);u=te.top!=="1%",M=c(te.marginLeft)===12,R.style.right="60%",y=c(te.right)===36,p=c(te.width)===36,R.style.position="absolute",g=c(R.offsetWidth/3)===12,je.removeChild(N),R=null}}function c(te){return Math.round(parseFloat(te))}var u,p,g,y,v,M,N=q.createElement("div"),R=q.createElement("div");R.style&&(R.style.backgroundClip="content-box",R.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle=R.style.backgroundClip==="content-box",d.extend(A,{boxSizingReliable:function(){return s(),p},pixelBoxStyles:function(){return s(),y},pixelPosition:function(){return s(),u},reliableMarginLeft:function(){return s(),M},scrollboxSize:function(){return s(),g},reliableTrDimensions:function(){var te,ae,X,pe;return v==null&&(te=q.createElement("table"),ae=q.createElement("tr"),X=q.createElement("div"),te.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ae.style.cssText="box-sizing:content-box;border:1px solid",ae.style.height="1px",X.style.height="9px",X.style.display="block",je.appendChild(te).appendChild(ae).appendChild(X),pe=t.getComputedStyle(ae),v=parseInt(pe.height,10)+parseInt(pe.borderTopWidth,10)+parseInt(pe.borderBottomWidth,10)===ae.offsetHeight,je.removeChild(te)),v}}))})();function la(s,c,u){var p,g,y,v,M=pi.test(c),N=s.style;return u=u||ai(s),u&&(v=u.getPropertyValue(c)||u[c],M&&v&&(v=v.replace(Ye,"$1")||void 0),v===""&&!ut(s)&&(v=d.style(s,c)),!A.pixelBoxStyles()&&fi.test(v)&&fs.test(c)&&(p=N.width,g=N.minWidth,y=N.maxWidth,N.minWidth=N.maxWidth=N.width=v,v=u.width,N.width=p,N.minWidth=g,N.maxWidth=y)),v!==void 0?v+"":v}function Oi(s,c){return{get:function(){if(s()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var Ri=["Webkit","Moz","ms"],Fi=q.createElement("div").style,Ui={};function ps(s){for(var c=s[0].toUpperCase()+s.slice(1),u=Ri.length;u--;)if(s=Ri[u]+c,s in Fi)return s}function mi(s){var c=d.cssProps[s]||Ui[s];return c||(s in Fi?s:Ui[s]=ps(s)||s)}var ms=/^(none|table(?!-c[ea]).+)/,gs={position:"absolute",visibility:"hidden",display:"block"},Hi={letterSpacing:"0",fontWeight:"400"};function ji(s,c,u){var p=oe.exec(c);return p?Math.max(0,p[2]-(u||0))+(p[3]||"px"):c}function gi(s,c,u,p,g,y){var v=c==="width"?1:0,M=0,N=0,R=0;if(u===(p?"border":"content"))return 0;for(;v<4;v+=2)u==="margin"&&(R+=d.css(s,u+Re[v],!0,g)),p?(u==="content"&&(N-=d.css(s,"padding"+Re[v],!0,g)),u!=="margin"&&(N-=d.css(s,"border"+Re[v]+"Width",!0,g))):(N+=d.css(s,"padding"+Re[v],!0,g),u!=="padding"?N+=d.css(s,"border"+Re[v]+"Width",!0,g):M+=d.css(s,"border"+Re[v]+"Width",!0,g));return!p&&y>=0&&(N+=Math.max(0,Math.ceil(s["offset"+c[0].toUpperCase()+c.slice(1)]-y-N-M-.5))||0),N+R}function zi(s,c,u){var p=ai(s),g=!A.boxSizingReliable()||u,y=g&&d.css(s,"boxSizing",!1,p)==="border-box",v=y,M=la(s,c,p),N="offset"+c[0].toUpperCase()+c.slice(1);if(fi.test(M)){if(!u)return M;M="auto"}return(!A.boxSizingReliable()&&y||!A.reliableTrDimensions()&&re(s,"tr")||M==="auto"||!parseFloat(M)&&d.css(s,"display",!1,p)==="inline")&&s.getClientRects().length&&(y=d.css(s,"boxSizing",!1,p)==="border-box",v=N in s,v&&(M=s[N])),M=parseFloat(M)||0,M+gi(s,c,u||(y?"border":"content"),v,p,M)+"px"}d.extend({cssHooks:{opacity:{get:function(s,c){if(c){var u=la(s,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(s,c,u,p){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var g,y,v,M=Nt(c),N=pi.test(c),R=s.style;if(N||(c=mi(M)),v=d.cssHooks[c]||d.cssHooks[M],u!==void 0){if(y=typeof u,y==="string"&&(g=oe.exec(u))&&g[1]&&(u=Ve(s,c,g),y="number"),u==null||u!==u)return;y==="number"&&!N&&(u+=g&&g[3]||(d.cssNumber[M]?"":"px")),!A.clearCloneStyle&&u===""&&c.indexOf("background")===0&&(R[c]="inherit"),(!v||!("set"in v)||(u=v.set(s,u,p))!==void 0)&&(N?R.setProperty(c,u):R[c]=u)}else return v&&"get"in v&&(g=v.get(s,!1,p))!==void 0?g:R[c]}},css:function(s,c,u,p){var g,y,v,M=Nt(c),N=pi.test(c);return N||(c=mi(M)),v=d.cssHooks[c]||d.cssHooks[M],v&&"get"in v&&(g=v.get(s,!0,u)),g===void 0&&(g=la(s,c,p)),g==="normal"&&c in Hi&&(g=Hi[c]),u===""||u?(y=parseFloat(g),u===!0||isFinite(y)?y||0:g):g}}),d.each(["height","width"],function(s,c){d.cssHooks[c]={get:function(u,p,g){if(p)return ms.test(d.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?Li(u,gs,function(){return zi(u,c,g)}):zi(u,c,g)},set:function(u,p,g){var y,v=ai(u),M=!A.scrollboxSize()&&v.position==="absolute",N=M||g,R=N&&d.css(u,"boxSizing",!1,v)==="border-box",te=g?gi(u,c,g,R,v):0;return R&&M&&(te-=Math.ceil(u["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(v[c])-gi(u,c,"border",!1,v)-.5)),te&&(y=oe.exec(p))&&(y[3]||"px")!=="px"&&(u.style[c]=p,p=d.css(u,c)),ji(u,p,te)}}}),d.cssHooks.marginLeft=Oi(A.reliableMarginLeft,function(s,c){if(c)return(parseFloat(la(s,"marginLeft"))||s.getBoundingClientRect().left-Li(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(s,c){d.cssHooks[s+c]={expand:function(u){for(var p=0,g={},y=typeof u=="string"?u.split(" "):[u];p<4;p++)g[s+Re[p]+c]=y[p]||y[p-2]||y[0];return g}},s!=="margin"&&(d.cssHooks[s+c].set=ji)}),d.fn.extend({css:function(s,c){return rt(this,function(u,p,g){var y,v,M={},N=0;if(Array.isArray(p)){for(y=ai(u),v=p.length;N<v;N++)M[p[N]]=d.css(u,p[N],!1,y);return M}return g!==void 0?d.style(u,p,g):d.css(u,p)},s,c,arguments.length>1)}});function $t(s,c,u,p,g){return new $t.prototype.init(s,c,u,p,g)}d.Tween=$t,$t.prototype={constructor:$t,init:function(s,c,u,p,g,y){this.elem=s,this.prop=u,this.easing=g||d.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=p,this.unit=y||(d.cssNumber[u]?"":"px")},cur:function(){var s=$t.propHooks[this.prop];return s&&s.get?s.get(this):$t.propHooks._default.get(this)},run:function(s){var c,u=$t.propHooks[this.prop];return this.options.duration?this.pos=c=d.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=c=s,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):$t.propHooks._default.set(this),this}},$t.prototype.init.prototype=$t.prototype,$t.propHooks={_default:{get:function(s){var c;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(c=d.css(s.elem,s.prop,""),!c||c==="auto"?0:c)},set:function(s){d.fx.step[s.prop]?d.fx.step[s.prop](s):s.elem.nodeType===1&&(d.cssHooks[s.prop]||s.elem.style[mi(s.prop)]!=null)?d.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},$t.propHooks.scrollTop=$t.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},d.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},d.fx=$t.prototype.init,d.fx.step={};var ra,ii,ys=/^(?:toggle|show|hide)$/,_s=/queueHooks$/;function yi(){ii&&(q.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(yi):t.setTimeout(yi,d.fx.interval),d.fx.tick())}function Yi(){return t.setTimeout(function(){ra=void 0}),ra=Date.now()}function si(s,c){var u,p=0,g={height:s};for(c=c?1:0;p<4;p+=2-c)u=Re[p],g["margin"+u]=g["padding"+u]=s;return c&&(g.opacity=g.width=s),g}function Wi(s,c,u){for(var p,g=(jt.tweeners[c]||[]).concat(jt.tweeners["*"]),y=0,v=g.length;y<v;y++)if(p=g[y].call(u,c,s))return p}function vs(s,c,u){var p,g,y,v,M,N,R,te,ae="width"in c||"height"in c,X=this,pe={},Ge=s.style,ot=s.nodeType&&se(s),Qe=Le.get(s,"fxshow");u.queue||(v=d._queueHooks(s,"fx"),v.unqueued==null&&(v.unqueued=0,M=v.empty.fire,v.empty.fire=function(){v.unqueued||M()}),v.unqueued++,X.always(function(){X.always(function(){v.unqueued--,d.queue(s,"fx").length||v.empty.fire()})}));for(p in c)if(g=c[p],ys.test(g)){if(delete c[p],y=y||g==="toggle",g===(ot?"hide":"show"))if(g==="show"&&Qe&&Qe[p]!==void 0)ot=!0;else continue;pe[p]=Qe&&Qe[p]||d.style(s,p)}if(N=!d.isEmptyObject(c),!(!N&&d.isEmptyObject(pe))){ae&&s.nodeType===1&&(u.overflow=[Ge.overflow,Ge.overflowX,Ge.overflowY],R=Qe&&Qe.display,R==null&&(R=Le.get(s,"display")),te=d.css(s,"display"),te==="none"&&(R?te=R:(Ot([s],!0),R=s.style.display||R,te=d.css(s,"display"),Ot([s]))),(te==="inline"||te==="inline-block"&&R!=null)&&d.css(s,"float")==="none"&&(N||(X.done(function(){Ge.display=R}),R==null&&(te=Ge.display,R=te==="none"?"":te)),Ge.display="inline-block")),u.overflow&&(Ge.overflow="hidden",X.always(function(){Ge.overflow=u.overflow[0],Ge.overflowX=u.overflow[1],Ge.overflowY=u.overflow[2]})),N=!1;for(p in pe)N||(Qe?"hidden"in Qe&&(ot=Qe.hidden):Qe=Le.access(s,"fxshow",{display:R}),y&&(Qe.hidden=!ot),ot&&Ot([s],!0),X.done(function(){ot||Ot([s]),Le.remove(s,"fxshow");for(p in pe)d.style(s,p,pe[p])})),N=Wi(ot?Qe[p]:0,p,X),p in Qe||(Qe[p]=N.start,ot&&(N.end=N.start,N.start=0))}}function bs(s,c){var u,p,g,y,v;for(u in s)if(p=Nt(u),g=c[p],y=s[u],Array.isArray(y)&&(g=y[1],y=s[u]=y[0]),u!==p&&(s[p]=y,delete s[u]),v=d.cssHooks[p],v&&"expand"in v){y=v.expand(y),delete s[p];for(u in y)u in s||(s[u]=y[u],c[u]=g)}else c[p]=g}function jt(s,c,u){var p,g,y=0,v=jt.prefilters.length,M=d.Deferred().always(function(){delete N.elem}),N=function(){if(g)return!1;for(var ae=ra||Yi(),X=Math.max(0,R.startTime+R.duration-ae),pe=X/R.duration||0,Ge=1-pe,ot=0,Qe=R.tweens.length;ot<Qe;ot++)R.tweens[ot].run(Ge);return M.notifyWith(s,[R,Ge,X]),Ge<1&&Qe?X:(Qe||M.notifyWith(s,[R,1,0]),M.resolveWith(s,[R]),!1)},R=M.promise({elem:s,props:d.extend({},c),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},u),originalProperties:c,originalOptions:u,startTime:ra||Yi(),duration:u.duration,tweens:[],createTween:function(ae,X){var pe=d.Tween(s,R.opts,ae,X,R.opts.specialEasing[ae]||R.opts.easing);return R.tweens.push(pe),pe},stop:function(ae){var X=0,pe=ae?R.tweens.length:0;if(g)return this;for(g=!0;X<pe;X++)R.tweens[X].run(1);return ae?(M.notifyWith(s,[R,1,0]),M.resolveWith(s,[R,ae])):M.rejectWith(s,[R,ae]),this}}),te=R.props;for(bs(te,R.opts.specialEasing);y<v;y++)if(p=jt.prefilters[y].call(R,s,te,R.opts),p)return H(p.stop)&&(d._queueHooks(R.elem,R.opts.queue).stop=p.stop.bind(p)),p;return d.map(te,Wi,R),H(R.opts.start)&&R.opts.start.call(s,R),R.progress(R.opts.progress).done(R.opts.done,R.opts.complete).fail(R.opts.fail).always(R.opts.always),d.fx.timer(d.extend(N,{elem:s,anim:R,queue:R.opts.queue})),R}d.Animation=d.extend(jt,{tweeners:{"*":[function(s,c){var u=this.createTween(s,c);return Ve(u.elem,s,oe.exec(c),u),u}]},tweener:function(s,c){H(s)?(c=s,s=["*"]):s=s.match(Z);for(var u,p=0,g=s.length;p<g;p++)u=s[p],jt.tweeners[u]=jt.tweeners[u]||[],jt.tweeners[u].unshift(c)},prefilters:[vs],prefilter:function(s,c){c?jt.prefilters.unshift(s):jt.prefilters.push(s)}}),d.speed=function(s,c,u){var p=s&&typeof s=="object"?d.extend({},s):{complete:u||!u&&c||H(s)&&s,duration:s,easing:u&&c||c&&!H(c)&&c};return d.fx.off?p.duration=0:typeof p.duration!="number"&&(p.duration in d.fx.speeds?p.duration=d.fx.speeds[p.duration]:p.duration=d.fx.speeds._default),(p.queue==null||p.queue===!0)&&(p.queue="fx"),p.old=p.complete,p.complete=function(){H(p.old)&&p.old.call(this),p.queue&&d.dequeue(this,p.queue)},p},d.fn.extend({fadeTo:function(s,c,u,p){return this.filter(se).css("opacity",0).show().end().animate({opacity:c},s,u,p)},animate:function(s,c,u,p){var g=d.isEmptyObject(s),y=d.speed(c,u,p),v=function(){var M=jt(this,d.extend({},s),y);(g||Le.get(this,"finish"))&&M.stop(!0)};return v.finish=v,g||y.queue===!1?this.each(v):this.queue(y.queue,v)},stop:function(s,c,u){var p=function(g){var y=g.stop;delete g.stop,y(u)};return typeof s!="string"&&(u=c,c=s,s=void 0),c&&this.queue(s||"fx",[]),this.each(function(){var g=!0,y=s!=null&&s+"queueHooks",v=d.timers,M=Le.get(this);if(y)M[y]&&M[y].stop&&p(M[y]);else for(y in M)M[y]&&M[y].stop&&_s.test(y)&&p(M[y]);for(y=v.length;y--;)v[y].elem===this&&(s==null||v[y].queue===s)&&(v[y].anim.stop(u),g=!1,v.splice(y,1));(g||!u)&&d.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var c,u=Le.get(this),p=u[s+"queue"],g=u[s+"queueHooks"],y=d.timers,v=p?p.length:0;for(u.finish=!0,d.queue(this,s,[]),g&&g.stop&&g.stop.call(this,!0),c=y.length;c--;)y[c].elem===this&&y[c].queue===s&&(y[c].anim.stop(!0),y.splice(c,1));for(c=0;c<v;c++)p[c]&&p[c].finish&&p[c].finish.call(this);delete u.finish})}}),d.each(["toggle","show","hide"],function(s,c){var u=d.fn[c];d.fn[c]=function(p,g,y){return p==null||typeof p=="boolean"?u.apply(this,arguments):this.animate(si(c,!0),p,g,y)}}),d.each({slideDown:si("show"),slideUp:si("hide"),slideToggle:si("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,c){d.fn[s]=function(u,p,g){return this.animate(c,u,p,g)}}),d.timers=[],d.fx.tick=function(){var s,c=0,u=d.timers;for(ra=Date.now();c<u.length;c++)s=u[c],!s()&&u[c]===s&&u.splice(c--,1);u.length||d.fx.stop(),ra=void 0},d.fx.timer=function(s){d.timers.push(s),d.fx.start()},d.fx.interval=13,d.fx.start=function(){ii||(ii=!0,yi())},d.fx.stop=function(){ii=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(s,c){return s=d.fx&&d.fx.speeds[s]||s,c=c||"fx",this.queue(c,function(u,p){var g=t.setTimeout(u,s);p.stop=function(){t.clearTimeout(g)}})},function(){var s=q.createElement("input"),c=q.createElement("select"),u=c.appendChild(q.createElement("option"));s.type="checkbox",A.checkOn=s.value!=="",A.optSelected=u.selected,s=q.createElement("input"),s.value="t",s.type="radio",A.radioValue=s.value==="t"}();var qi,ca=d.expr.attrHandle;d.fn.extend({attr:function(s,c){return rt(this,d.attr,s,c,arguments.length>1)},removeAttr:function(s){return this.each(function(){d.removeAttr(this,s)})}}),d.extend({attr:function(s,c,u){var p,g,y=s.nodeType;if(!(y===3||y===8||y===2)){if(typeof s.getAttribute>"u")return d.prop(s,c,u);if((y!==1||!d.isXMLDoc(s))&&(g=d.attrHooks[c.toLowerCase()]||(d.expr.match.bool.test(c)?qi:void 0)),u!==void 0){if(u===null){d.removeAttr(s,c);return}return g&&"set"in g&&(p=g.set(s,u,c))!==void 0?p:(s.setAttribute(c,u+""),u)}return g&&"get"in g&&(p=g.get(s,c))!==null?p:(p=d.find.attr(s,c),p??void 0)}},attrHooks:{type:{set:function(s,c){if(!A.radioValue&&c==="radio"&&re(s,"input")){var u=s.value;return s.setAttribute("type",c),u&&(s.value=u),c}}}},removeAttr:function(s,c){var u,p=0,g=c&&c.match(Z);if(g&&s.nodeType===1)for(;u=g[p++];)s.removeAttribute(u)}}),qi={set:function(s,c,u){return c===!1?d.removeAttr(s,u):s.setAttribute(u,u),u}},d.each(d.expr.match.bool.source.match(/\w+/g),function(s,c){var u=ca[c]||d.find.attr;ca[c]=function(p,g,y){var v,M,N=g.toLowerCase();return y||(M=ca[N],ca[N]=v,v=u(p,g,y)!=null?N:null,ca[N]=M),v}});var ks=/^(?:input|select|textarea|button)$/i,ws=/^(?:a|area)$/i;d.fn.extend({prop:function(s,c){return rt(this,d.prop,s,c,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[d.propFix[s]||s]})}}),d.extend({prop:function(s,c,u){var p,g,y=s.nodeType;if(!(y===3||y===8||y===2))return(y!==1||!d.isXMLDoc(s))&&(c=d.propFix[c]||c,g=d.propHooks[c]),u!==void 0?g&&"set"in g&&(p=g.set(s,u,c))!==void 0?p:s[c]=u:g&&"get"in g&&(p=g.get(s,c))!==null?p:s[c]},propHooks:{tabIndex:{get:function(s){var c=d.find.attr(s,"tabindex");return c?parseInt(c,10):ks.test(s.nodeName)||ws.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(d.propHooks.selected={get:function(s){var c=s.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(s){var c=s.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});function Fn(s){var c=s.match(Z)||[];return c.join(" ")}function Un(s){return s.getAttribute&&s.getAttribute("class")||""}function _i(s){return Array.isArray(s)?s:typeof s=="string"?s.match(Z)||[]:[]}d.fn.extend({addClass:function(s){var c,u,p,g,y,v;return H(s)?this.each(function(M){d(this).addClass(s.call(this,M,Un(this)))}):(c=_i(s),c.length?this.each(function(){if(p=Un(this),u=this.nodeType===1&&" "+Fn(p)+" ",u){for(y=0;y<c.length;y++)g=c[y],u.indexOf(" "+g+" ")<0&&(u+=g+" ");v=Fn(u),p!==v&&this.setAttribute("class",v)}}):this)},removeClass:function(s){var c,u,p,g,y,v;return H(s)?this.each(function(M){d(this).removeClass(s.call(this,M,Un(this)))}):arguments.length?(c=_i(s),c.length?this.each(function(){if(p=Un(this),u=this.nodeType===1&&" "+Fn(p)+" ",u){for(y=0;y<c.length;y++)for(g=c[y];u.indexOf(" "+g+" ")>-1;)u=u.replace(" "+g+" "," ");v=Fn(u),p!==v&&this.setAttribute("class",v)}}):this):this.attr("class","")},toggleClass:function(s,c){var u,p,g,y,v=typeof s,M=v==="string"||Array.isArray(s);return H(s)?this.each(function(N){d(this).toggleClass(s.call(this,N,Un(this),c),c)}):typeof c=="boolean"&&M?c?this.addClass(s):this.removeClass(s):(u=_i(s),this.each(function(){if(M)for(y=d(this),g=0;g<u.length;g++)p=u[g],y.hasClass(p)?y.removeClass(p):y.addClass(p);else(s===void 0||v==="boolean")&&(p=Un(this),p&&Le.set(this,"__className__",p),this.setAttribute&&this.setAttribute("class",p||s===!1?"":Le.get(this,"__className__")||""))}))},hasClass:function(s){var c,u,p=0;for(c=" "+s+" ";u=this[p++];)if(u.nodeType===1&&(" "+Fn(Un(u))+" ").indexOf(c)>-1)return!0;return!1}});var Ss=/\r/g;d.fn.extend({val:function(s){var c,u,p,g=this[0];return arguments.length?(p=H(s),this.each(function(y){var v;this.nodeType===1&&(p?v=s.call(this,y,d(this).val()):v=s,v==null?v="":typeof v=="number"?v+="":Array.isArray(v)&&(v=d.map(v,function(M){return M==null?"":M+""})),c=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,v,"value")===void 0)&&(this.value=v))})):g?(c=d.valHooks[g.type]||d.valHooks[g.nodeName.toLowerCase()],c&&"get"in c&&(u=c.get(g,"value"))!==void 0?u:(u=g.value,typeof u=="string"?u.replace(Ss,""):u??"")):void 0}}),d.extend({valHooks:{option:{get:function(s){var c=d.find.attr(s,"value");return c??Fn(d.text(s))}},select:{get:function(s){var c,u,p,g=s.options,y=s.selectedIndex,v=s.type==="select-one",M=v?null:[],N=v?y+1:g.length;for(y<0?p=N:p=v?y:0;p<N;p++)if(u=g[p],(u.selected||p===y)&&!u.disabled&&(!u.parentNode.disabled||!re(u.parentNode,"optgroup"))){if(c=d(u).val(),v)return c;M.push(c)}return M},set:function(s,c){for(var u,p,g=s.options,y=d.makeArray(c),v=g.length;v--;)p=g[v],(p.selected=d.inArray(d.valHooks.option.get(p),y)>-1)&&(u=!0);return u||(s.selectedIndex=-1),y}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(s,c){if(Array.isArray(c))return s.checked=d.inArray(d(s).val(),c)>-1}},A.checkOn||(d.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var ua=t.location,Ki={guid:Date.now()},vi=/\?/;d.parseXML=function(s){var c,u;if(!s||typeof s!="string")return null;try{c=new t.DOMParser().parseFromString(s,"text/xml")}catch{}return u=c&&c.getElementsByTagName("parsererror")[0],(!c||u)&&d.error("Invalid XML: "+(u?d.map(u.childNodes,function(p){return p.textContent}).join(`
`):s)),c};var Gi=/^(?:focusinfocus|focusoutblur)$/,Xi=function(s){s.stopPropagation()};d.extend(d.event,{trigger:function(s,c,u,p){var g,y,v,M,N,R,te,ae,X=[u||q],pe=k.call(s,"type")?s.type:s,Ge=k.call(s,"namespace")?s.namespace.split("."):[];if(y=ae=v=u=u||q,!(u.nodeType===3||u.nodeType===8)&&!Gi.test(pe+d.event.triggered)&&(pe.indexOf(".")>-1&&(Ge=pe.split("."),pe=Ge.shift(),Ge.sort()),N=pe.indexOf(":")<0&&"on"+pe,s=s[d.expando]?s:new d.Event(pe,typeof s=="object"&&s),s.isTrigger=p?2:3,s.namespace=Ge.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+Ge.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=u),c=c==null?[s]:d.makeArray(c,[s]),te=d.event.special[pe]||{},!(!p&&te.trigger&&te.trigger.apply(u,c)===!1))){if(!p&&!te.noBubble&&!Q(u)){for(M=te.delegateType||pe,Gi.test(M+pe)||(y=y.parentNode);y;y=y.parentNode)X.push(y),v=y;v===(u.ownerDocument||q)&&X.push(v.defaultView||v.parentWindow||t)}for(g=0;(y=X[g++])&&!s.isPropagationStopped();)ae=y,s.type=g>1?M:te.bindType||pe,R=(Le.get(y,"events")||Object.create(null))[s.type]&&Le.get(y,"handle"),R&&R.apply(y,c),R=N&&y[N],R&&R.apply&&dn(y)&&(s.result=R.apply(y,c),s.result===!1&&s.preventDefault());return s.type=pe,!p&&!s.isDefaultPrevented()&&(!te._default||te._default.apply(X.pop(),c)===!1)&&dn(u)&&N&&H(u[pe])&&!Q(u)&&(v=u[N],v&&(u[N]=null),d.event.triggered=pe,s.isPropagationStopped()&&ae.addEventListener(pe,Xi),u[pe](),s.isPropagationStopped()&&ae.removeEventListener(pe,Xi),d.event.triggered=void 0,v&&(u[N]=v)),s.result}},simulate:function(s,c,u){var p=d.extend(new d.Event,u,{type:s,isSimulated:!0});d.event.trigger(p,null,c)}}),d.fn.extend({trigger:function(s,c){return this.each(function(){d.event.trigger(s,c,this)})},triggerHandler:function(s,c){var u=this[0];if(u)return d.event.trigger(s,c,u,!0)}});var Ds=/\[\]$/,Ji=/\r?\n/g,Ts=/^(?:submit|button|image|reset|file)$/i,Cs=/^(?:input|select|textarea|keygen)/i;function bi(s,c,u,p){var g;if(Array.isArray(c))d.each(c,function(y,v){u||Ds.test(s)?p(s,v):bi(s+"["+(typeof v=="object"&&v!=null?y:"")+"]",v,u,p)});else if(!u&&ge(c)==="object")for(g in c)bi(s+"["+g+"]",c[g],u,p);else p(s,c)}d.param=function(s,c){var u,p=[],g=function(y,v){var M=H(v)?v():v;p[p.length]=encodeURIComponent(y)+"="+encodeURIComponent(M??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!d.isPlainObject(s))d.each(s,function(){g(this.name,this.value)});else for(u in s)bi(u,s[u],c,g);return p.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=d.prop(this,"elements");return s?d.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!d(this).is(":disabled")&&Cs.test(this.nodeName)&&!Ts.test(s)&&(this.checked||!ze.test(s))}).map(function(s,c){var u=d(this).val();return u==null?null:Array.isArray(u)?d.map(u,function(p){return{name:c.name,value:p.replace(Ji,`\r
`)}}):{name:c.name,value:u.replace(Ji,`\r
`)}}).get()}});var Bs=/%20/g,Ns=/#.*$/,xs=/([?&])_=[^&]*/,Is=/^(.*?):[ \t]*([^\r\n]*)$/mg,Es=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$s=/^(?:GET|HEAD)$/,Ms=/^\/\//,Qi={},ki={},Zi="*/".concat("*"),wi=q.createElement("a");wi.href=ua.href;function es(s){return function(c,u){typeof c!="string"&&(u=c,c="*");var p,g=0,y=c.toLowerCase().match(Z)||[];if(H(u))for(;p=y[g++];)p[0]==="+"?(p=p.slice(1)||"*",(s[p]=s[p]||[]).unshift(u)):(s[p]=s[p]||[]).push(u)}}function ts(s,c,u,p){var g={},y=s===ki;function v(M){var N;return g[M]=!0,d.each(s[M]||[],function(R,te){var ae=te(c,u,p);if(typeof ae=="string"&&!y&&!g[ae])return c.dataTypes.unshift(ae),v(ae),!1;if(y)return!(N=ae)}),N}return v(c.dataTypes[0])||!g["*"]&&v("*")}function Si(s,c){var u,p,g=d.ajaxSettings.flatOptions||{};for(u in c)c[u]!==void 0&&((g[u]?s:p||(p={}))[u]=c[u]);return p&&d.extend(!0,s,p),s}function Ps(s,c,u){for(var p,g,y,v,M=s.contents,N=s.dataTypes;N[0]==="*";)N.shift(),p===void 0&&(p=s.mimeType||c.getResponseHeader("Content-Type"));if(p){for(g in M)if(M[g]&&M[g].test(p)){N.unshift(g);break}}if(N[0]in u)y=N[0];else{for(g in u){if(!N[0]||s.converters[g+" "+N[0]]){y=g;break}v||(v=g)}y=y||v}if(y)return y!==N[0]&&N.unshift(y),u[y]}function Vs(s,c,u,p){var g,y,v,M,N,R={},te=s.dataTypes.slice();if(te[1])for(v in s.converters)R[v.toLowerCase()]=s.converters[v];for(y=te.shift();y;)if(s.responseFields[y]&&(u[s.responseFields[y]]=c),!N&&p&&s.dataFilter&&(c=s.dataFilter(c,s.dataType)),N=y,y=te.shift(),y){if(y==="*")y=N;else if(N!=="*"&&N!==y){if(v=R[N+" "+y]||R["* "+y],!v){for(g in R)if(M=g.split(" "),M[1]===y&&(v=R[N+" "+M[0]]||R["* "+M[0]],v)){v===!0?v=R[g]:R[g]!==!0&&(y=M[0],te.unshift(M[1]));break}}if(v!==!0)if(v&&s.throws)c=v(c);else try{c=v(c)}catch(ae){return{state:"parsererror",error:v?ae:"No conversion from "+N+" to "+y}}}}return{state:"success",data:c}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ua.href,type:"GET",isLocal:Es.test(ua.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,c){return c?Si(Si(s,d.ajaxSettings),c):Si(d.ajaxSettings,s)},ajaxPrefilter:es(Qi),ajaxTransport:es(ki),ajax:function(s,c){typeof s=="object"&&(c=s,s=void 0),c=c||{};var u,p,g,y,v,M,N,R,te,ae,X=d.ajaxSetup({},c),pe=X.context||X,Ge=X.context&&(pe.nodeType||pe.jquery)?d(pe):d.event,ot=d.Deferred(),Qe=d.Callbacks("once memory"),bt=X.statusCode||{},yt={},Kt={},Gt="canceled",st={readyState:0,getResponseHeader:function(ct){var mt;if(N){if(!y)for(y={};mt=Is.exec(g);)y[mt[1].toLowerCase()+" "]=(y[mt[1].toLowerCase()+" "]||[]).concat(mt[2]);mt=y[ct.toLowerCase()+" "]}return mt==null?null:mt.join(", ")},getAllResponseHeaders:function(){return N?g:null},setRequestHeader:function(ct,mt){return N==null&&(ct=Kt[ct.toLowerCase()]=Kt[ct.toLowerCase()]||ct,yt[ct]=mt),this},overrideMimeType:function(ct){return N==null&&(X.mimeType=ct),this},statusCode:function(ct){var mt;if(ct)if(N)st.always(ct[st.status]);else for(mt in ct)bt[mt]=[bt[mt],ct[mt]];return this},abort:function(ct){var mt=ct||Gt;return u&&u.abort(mt),Yn(0,mt),this}};if(ot.promise(st),X.url=((s||X.url||ua.href)+"").replace(Ms,ua.protocol+"//"),X.type=c.method||c.type||X.method||X.type,X.dataTypes=(X.dataType||"*").toLowerCase().match(Z)||[""],X.crossDomain==null){M=q.createElement("a");try{M.href=X.url,M.href=M.href,X.crossDomain=wi.protocol+"//"+wi.host!=M.protocol+"//"+M.host}catch{X.crossDomain=!0}}if(X.data&&X.processData&&typeof X.data!="string"&&(X.data=d.param(X.data,X.traditional)),ts(Qi,X,c,st),N)return st;R=d.event&&X.global,R&&d.active++===0&&d.event.trigger("ajaxStart"),X.type=X.type.toUpperCase(),X.hasContent=!$s.test(X.type),p=X.url.replace(Ns,""),X.hasContent?X.data&&X.processData&&(X.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(X.data=X.data.replace(Bs,"+")):(ae=X.url.slice(p.length),X.data&&(X.processData||typeof X.data=="string")&&(p+=(vi.test(p)?"&":"?")+X.data,delete X.data),X.cache===!1&&(p=p.replace(xs,"$1"),ae=(vi.test(p)?"&":"?")+"_="+Ki.guid+++ae),X.url=p+ae),X.ifModified&&(d.lastModified[p]&&st.setRequestHeader("If-Modified-Since",d.lastModified[p]),d.etag[p]&&st.setRequestHeader("If-None-Match",d.etag[p])),(X.data&&X.hasContent&&X.contentType!==!1||c.contentType)&&st.setRequestHeader("Content-Type",X.contentType),st.setRequestHeader("Accept",X.dataTypes[0]&&X.accepts[X.dataTypes[0]]?X.accepts[X.dataTypes[0]]+(X.dataTypes[0]!=="*"?", "+Zi+"; q=0.01":""):X.accepts["*"]);for(te in X.headers)st.setRequestHeader(te,X.headers[te]);if(X.beforeSend&&(X.beforeSend.call(pe,st,X)===!1||N))return st.abort();if(Gt="abort",Qe.add(X.complete),st.done(X.success),st.fail(X.error),u=ts(ki,X,c,st),!u)Yn(-1,"No Transport");else{if(st.readyState=1,R&&Ge.trigger("ajaxSend",[st,X]),N)return st;X.async&&X.timeout>0&&(v=t.setTimeout(function(){st.abort("timeout")},X.timeout));try{N=!1,u.send(yt,Yn)}catch(ct){if(N)throw ct;Yn(-1,ct)}}function Yn(ct,mt,ei,Ti){var Zt,ti,on,kn,En,Rt=mt;N||(N=!0,v&&t.clearTimeout(v),u=void 0,g=Ti||"",st.readyState=ct>0?4:0,Zt=ct>=200&&ct<300||ct===304,ei&&(kn=Ps(X,st,ei)),!Zt&&d.inArray("script",X.dataTypes)>-1&&d.inArray("json",X.dataTypes)<0&&(X.converters["text script"]=function(){}),kn=Vs(X,kn,st,Zt),Zt?(X.ifModified&&(En=st.getResponseHeader("Last-Modified"),En&&(d.lastModified[p]=En),En=st.getResponseHeader("etag"),En&&(d.etag[p]=En)),ct===204||X.type==="HEAD"?Rt="nocontent":ct===304?Rt="notmodified":(Rt=kn.state,ti=kn.data,on=kn.error,Zt=!on)):(on=Rt,(ct||!Rt)&&(Rt="error",ct<0&&(ct=0))),st.status=ct,st.statusText=(mt||Rt)+"",Zt?ot.resolveWith(pe,[ti,Rt,st]):ot.rejectWith(pe,[st,Rt,on]),st.statusCode(bt),bt=void 0,R&&Ge.trigger(Zt?"ajaxSuccess":"ajaxError",[st,X,Zt?ti:on]),Qe.fireWith(pe,[st,Rt]),R&&(Ge.trigger("ajaxComplete",[st,X]),--d.active||d.event.trigger("ajaxStop")))}return st},getJSON:function(s,c,u){return d.get(s,c,u,"json")},getScript:function(s,c){return d.get(s,void 0,c,"script")}}),d.each(["get","post"],function(s,c){d[c]=function(u,p,g,y){return H(p)&&(y=y||g,g=p,p=void 0),d.ajax(d.extend({url:u,type:c,dataType:y,data:p,success:g},d.isPlainObject(u)&&u))}}),d.ajaxPrefilter(function(s){var c;for(c in s.headers)c.toLowerCase()==="content-type"&&(s.contentType=s.headers[c]||"")}),d._evalUrl=function(s,c,u){return d.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(p){d.globalEval(p,c,u)}})},d.fn.extend({wrapAll:function(s){var c;return this[0]&&(H(s)&&(s=s.call(this[0])),c=d(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(s){return H(s)?this.each(function(c){d(this).wrapInner(s.call(this,c))}):this.each(function(){var c=d(this),u=c.contents();u.length?u.wrapAll(s):c.append(s)})},wrap:function(s){var c=H(s);return this.each(function(u){d(this).wrapAll(c?s.call(this,u):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(s){return!d.expr.pseudos.visible(s)},d.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var As={0:200,1223:204},da=d.ajaxSettings.xhr();A.cors=!!da&&"withCredentials"in da,A.ajax=da=!!da,d.ajaxTransport(function(s){var c,u;if(A.cors||da&&!s.crossDomain)return{send:function(p,g){var y,v=s.xhr();if(v.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(y in s.xhrFields)v[y]=s.xhrFields[y];s.mimeType&&v.overrideMimeType&&v.overrideMimeType(s.mimeType),!s.crossDomain&&!p["X-Requested-With"]&&(p["X-Requested-With"]="XMLHttpRequest");for(y in p)v.setRequestHeader(y,p[y]);c=function(M){return function(){c&&(c=u=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,M==="abort"?v.abort():M==="error"?typeof v.status!="number"?g(0,"error"):g(v.status,v.statusText):g(As[v.status]||v.status,v.statusText,(v.responseType||"text")!=="text"||typeof v.responseText!="string"?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=c(),u=v.onerror=v.ontimeout=c("error"),v.onabort!==void 0?v.onabort=u:v.onreadystatechange=function(){v.readyState===4&&t.setTimeout(function(){c&&u()})},c=c("abort");try{v.send(s.hasContent&&s.data||null)}catch(M){if(c)throw M}},abort:function(){c&&c()}}}),d.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return d.globalEval(s),s}}}),d.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),d.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var c,u;return{send:function(p,g){c=d("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",u=function(y){c.remove(),u=null,y&&g(y.type==="error"?404:200,y.type)}),q.head.appendChild(c[0])},abort:function(){u&&u()}}}});var rs=[],Di=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=rs.pop()||d.expando+"_"+Ki.guid++;return this[s]=!0,s}}),d.ajaxPrefilter("json jsonp",function(s,c,u){var p,g,y,v=s.jsonp!==!1&&(Di.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Di.test(s.data)&&"data");if(v||s.dataTypes[0]==="jsonp")return p=s.jsonpCallback=H(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,v?s[v]=s[v].replace(Di,"$1"+p):s.jsonp!==!1&&(s.url+=(vi.test(s.url)?"&":"?")+s.jsonp+"="+p),s.converters["script json"]=function(){return y||d.error(p+" was not called"),y[0]},s.dataTypes[0]="json",g=t[p],t[p]=function(){y=arguments},u.always(function(){g===void 0?d(t).removeProp(p):t[p]=g,s[p]&&(s.jsonpCallback=c.jsonpCallback,rs.push(p)),y&&H(g)&&g(y[0]),y=g=void 0}),"script"}),A.createHTMLDocument=function(){var s=q.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2}(),d.parseHTML=function(s,c,u){if(typeof s!="string")return[];typeof c=="boolean"&&(u=c,c=!1);var p,g,y;return c||(A.createHTMLDocument?(c=q.implementation.createHTMLDocument(""),p=c.createElement("base"),p.href=q.location.href,c.head.appendChild(p)):c=q),g=T.exec(s),y=!u&&[],g?[c.createElement(g[1])]:(g=$i([s],c,y),y&&y.length&&d(y).remove(),d.merge([],g.childNodes))},d.fn.load=function(s,c,u){var p,g,y,v=this,M=s.indexOf(" ");return M>-1&&(p=Fn(s.slice(M)),s=s.slice(0,M)),H(c)?(u=c,c=void 0):c&&typeof c=="object"&&(g="POST"),v.length>0&&d.ajax({url:s,type:g||"GET",dataType:"html",data:c}).done(function(N){y=arguments,v.html(p?d("<div>").append(d.parseHTML(N)).find(p):N)}).always(u&&function(N,R){v.each(function(){u.apply(this,y||[N.responseText,R,N])})}),this},d.expr.pseudos.animated=function(s){return d.grep(d.timers,function(c){return s===c.elem}).length},d.offset={setOffset:function(s,c,u){var p,g,y,v,M,N,R,te=d.css(s,"position"),ae=d(s),X={};te==="static"&&(s.style.position="relative"),M=ae.offset(),y=d.css(s,"top"),N=d.css(s,"left"),R=(te==="absolute"||te==="fixed")&&(y+N).indexOf("auto")>-1,R?(p=ae.position(),v=p.top,g=p.left):(v=parseFloat(y)||0,g=parseFloat(N)||0),H(c)&&(c=c.call(s,u,d.extend({},M))),c.top!=null&&(X.top=c.top-M.top+v),c.left!=null&&(X.left=c.left-M.left+g),"using"in c?c.using.call(s,X):ae.css(X)}},d.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(g){d.offset.setOffset(this,s,g)});var c,u,p=this[0];if(p)return p.getClientRects().length?(c=p.getBoundingClientRect(),u=p.ownerDocument.defaultView,{top:c.top+u.pageYOffset,left:c.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var s,c,u,p=this[0],g={top:0,left:0};if(d.css(p,"position")==="fixed")c=p.getBoundingClientRect();else{for(c=this.offset(),u=p.ownerDocument,s=p.offsetParent||u.documentElement;s&&(s===u.body||s===u.documentElement)&&d.css(s,"position")==="static";)s=s.parentNode;s&&s!==p&&s.nodeType===1&&(g=d(s).offset(),g.top+=d.css(s,"borderTopWidth",!0),g.left+=d.css(s,"borderLeftWidth",!0))}return{top:c.top-g.top-d.css(p,"marginTop",!0),left:c.left-g.left-d.css(p,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&d.css(s,"position")==="static";)s=s.offsetParent;return s||je})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,c){var u=c==="pageYOffset";d.fn[s]=function(p){return rt(this,function(g,y,v){var M;if(Q(g)?M=g:g.nodeType===9&&(M=g.defaultView),v===void 0)return M?M[c]:g[y];M?M.scrollTo(u?M.pageXOffset:v,u?v:M.pageYOffset):g[y]=v},s,p,arguments.length)}}),d.each(["top","left"],function(s,c){d.cssHooks[c]=Oi(A.pixelPosition,function(u,p){if(p)return p=la(u,c),fi.test(p)?d(u).position()[c]+"px":p})}),d.each({Height:"height",Width:"width"},function(s,c){d.each({padding:"inner"+s,content:c,"":"outer"+s},function(u,p){d.fn[p]=function(g,y){var v=arguments.length&&(u||typeof g!="boolean"),M=u||(g===!0||y===!0?"margin":"border");return rt(this,function(N,R,te){var ae;return Q(N)?p.indexOf("outer")===0?N["inner"+s]:N.document.documentElement["client"+s]:N.nodeType===9?(ae=N.documentElement,Math.max(N.body["scroll"+s],ae["scroll"+s],N.body["offset"+s],ae["offset"+s],ae["client"+s])):te===void 0?d.css(N,R,M):d.style(N,R,te,M)},c,v?g:void 0,v)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,c){d.fn[c]=function(u){return this.on(c,u)}}),d.fn.extend({bind:function(s,c,u){return this.on(s,null,c,u)},unbind:function(s,c){return this.off(s,null,c)},delegate:function(s,c,u,p){return this.on(c,s,u,p)},undelegate:function(s,c,u){return arguments.length===1?this.off(s,"**"):this.off(c,s||"**",u)},hover:function(s,c){return this.on("mouseenter",s).on("mouseleave",c||s)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,c){d.fn[c]=function(u,p){return arguments.length>0?this.on(c,null,u,p):this.trigger(c)}});var Ls=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(s,c){var u,p,g;if(typeof c=="string"&&(u=s[c],c=s,s=u),!!H(s))return p=o.call(arguments,2),g=function(){return s.apply(c||this,p.concat(o.call(arguments)))},g.guid=s.guid=s.guid||d.guid++,g},d.holdReady=function(s){s?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=re,d.isFunction=H,d.isWindow=Q,d.camelCase=Nt,d.type=ge,d.now=Date.now,d.isNumeric=function(s){var c=d.type(s);return(c==="number"||c==="string")&&!isNaN(s-parseFloat(s))},d.trim=function(s){return s==null?"":(s+"").replace(Ls,"$1")};var Os=t.jQuery,Rs=t.$;return d.noConflict=function(s){return t.$===d&&(t.$=Rs),s&&t.jQuery===d&&(t.jQuery=Os),d},typeof r>"u"&&(t.jQuery=t.$=d),d})})(jquery);var jqueryExports=jquery.exports;const $$1=getDefaultExportFromCjs(jqueryExports),TokenLinkButton_vue_vue_type_style_index_0_lang="",_sfc_main$n={props:["resourcesOrthancId","linkUrl","level","tokenType","validityDuration","title","iconClass","opensInNewTab","linkType","disabled"],setup(){return{}},data(){return{}},mounted(){},methods:{async clicked(e){if(!this.tokens.RequiredForLinks)return;e.preventDefault();let t=this.validityDuration;(t==null||t===void 0)&&(t=this.tokens.InstantLinksValidity);let r=await api.createToken({tokenType:this.tokenType,resourcesIds:this.resourcesOrthancId,level:this.level,validityDuration:t}),n=this.linkUrl;r.Url!=null?n=r.Url:this.linkUrl.indexOf("?")==-1?n=n+"?token="+r.Token:n=n+"&token="+r.Token;let a=document.querySelector("#hidden-link-for-tokens");a==null&&(a=document.createElement("a"),document.body.appendChild(a),a.setAttribute("id","hidden-link-for-tokens"),a.setAttribute("type","hidden")),a.target=this.target,a.href=n,a.click()}},computed:{...mapState({tokens:e=>e.configuration.tokens}),target(){return this.opensInNewTab===void 0||this.opensInNewTab==!1?"_self":"_blank"},isButton(){return this.linkType===void 0||this.linkType=="button"},isDropDownItem(){return this.linkType=="dropdown-item"},classes(){return this.disabled?"btn-secondary disabled-link":"btn-secondary"}},components:{}},_hoisted_1$n=["title","target","href"],_hoisted_2$m=["target","href"];function _sfc_render$n(e,t,r,n,a,o){return openBlock(),createElementBlock("div",null,[o.isButton?(openBlock(),createElementBlock("a",{key:0,class:normalizeClass(["btn btn-sm m-1",o.classes]),type:"button","data-bs-toggle":"tooltip",title:r.title,onClick:t[0]||(t[0]=(...l)=>o.clicked&&o.clicked(...l)),target:o.target,href:r.linkUrl},[createBaseVNode("i",{class:normalizeClass(r.iconClass)},null,2)],10,_hoisted_1$n)):createCommentVNode("",!0),o.isDropDownItem?(openBlock(),createElementBlock("a",{key:1,class:"dropdown-item",target:o.target,onClick:t[1]||(t[1]=(...l)=>o.clicked&&o.clicked(...l)),href:r.linkUrl},toDisplayString(r.title),9,_hoisted_2$m)):createCommentVNode("",!0)])}const TokenLinkButton=_export_sfc(_sfc_main$n,[["render",_sfc_render$n]]),DEFAULTS={items:[],allowNew:!1,showAllSuggestions:!1,badgeStyle:"primary",allowClear:!1,clearEnd:!1,selected:[],regex:"",separator:[],max:0,clearLabel:"Clear",searchLabel:"Type a value",showDropIcon:!0,keepOpen:!1,allowSame:!1,baseClass:"",placeholder:"",addOnBlur:!1,showDisabled:!1,hideNativeValidation:!1,suggestionsThreshold:-1,maximumItems:0,autoselectFirst:!0,updateOnSelect:!1,highlightTyped:!1,highlightClass:"",fullWidth:!0,fixed:!1,fuzzy:!1,startsWith:!1,singleBadge:!1,activeClasses:["bg-primary","text-white"],labelField:"label",valueField:"value",searchFields:["label"],queryParam:"query",server:"",serverMethod:"GET",serverParams:{},serverDataKey:"data",fetchOptions:{},liveServer:!1,noCache:!0,debounceTime:300,notFoundMessage:"",onRenderItem:(e,t,r)=>t,onSelectItem:(e,t)=>{},onClearItem:(e,t)=>{},onCreateItem:(e,t)=>{},onBlur:(e,t)=>{},onFocus:(e,t)=>{},onCanAdd:(e,t,r)=>{},confirmClear:(e,t)=>Promise.resolve(),confirmAdd:(e,t)=>Promise.resolve(),onServerResponse:(e,t)=>e.json()},CLASS_PREFIX="tags-",LOADING_CLASS="is-loading",ACTIVE_CLASS="is-active",INVALID_CLASS="is-invalid",MAX_REACHED_CLASS="is-max-reached",SHOW_CLASS="show",VALUE_ATTRIBUTE="data-value",NEXT="next",PREV="prev",FOCUS_CLASS="form-control-focus",PLACEHOLDER_CLASS="form-placeholder-shown",DISABLED_CLASS="form-control-disabled",INSTANCE_MAP=new WeakMap;let counter=0,tooltip=window.bootstrap&&window.bootstrap.Tooltip;function debounce(e,t=300){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>{e.apply(this,n)},t)}}function calcTextWidth(e,t=null){const r=ce("span");document.body.appendChild(r),r.style.fontSize=t||"inherit",r.style.height="auto",r.style.width="auto",r.style.position="absolute",r.style.whiteSpace="no-wrap",r.innerHTML=e;const n=Math.ceil(r.clientWidth);return document.body.removeChild(r),n}function removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function normalize(e){return e?removeDiacritics(e.toString()).toLowerCase():""}function fuzzyMatch(e,t){if(e.indexOf(t)>=0)return!0;let r=0;for(let n=0;n<t.length;n++){const a=t[n];if(a!=" "&&(r=e.indexOf(a,r)+1,r<=0))return!1}return!0}function hideItem(e){e.style.display="none",attrs(e,{"aria-hidden":"true"})}function showItem(e){e.style.display="list-item",attrs(e,{"aria-hidden":"false"})}function attrs(e,t){for(const[r,n]of Object.entries(t))e.setAttribute(r,n)}function rmAttr(e,t){e.hasAttribute(t)&&e.removeAttribute(t)}function parseBool(e){return["true","false","1","0",!0,!1].includes(e)&&!!JSON.parse(e)}function ce(e){return document.createElement(e)}function splitMulti(e,t){let r=t[0];for(let n=1;n<t.length;n++)e=e.split(t[n]).join(r);return e.split(r)}class Tags{constructor(t,r={}){if(!(t instanceof HTMLElement)){console.error("Invalid element",t);return}INSTANCE_MAP.set(t,this),counter++,this._selectElement=t,this._configure(r),this._keyboardNavigation=!1,this._searchFunc=debounce(()=>{this._loadFromServer(!0)},this._config.debounceTime),this._fireEvents=!0,this._configureParent(),this._holderElement=ce("div"),this._containerElement=ce("div"),this._dropElement=ce("ul"),this._searchInput=ce("input"),this._holderElement.appendChild(this._containerElement),this._selectElement.parentElement.insertBefore(this._holderElement,this._selectElement),this._configureHolderElement(),this._configureContainerElement(),this._configureSelectElement(),this._configureSearchInput(),this._configureDropElement(),this.resetState(),this.handleEvent=n=>{this._handleEvent(n)},this._config.fixed&&(document.addEventListener("scroll",this,!0),window.addEventListener("resize",this)),["focus","blur","input","keydown","paste"].forEach(n=>{this._searchInput.addEventListener(n,this)}),["mousemove","mouseleave"].forEach(n=>{this._dropElement.addEventListener(n,this)}),this.loadData(!0)}static init(t="select[multiple]",r={}){let n=document.querySelectorAll(t);for(let a=0;a<n.length;a++)Tags.getInstance(n[a])||new Tags(n[a],r)}static getInstance(t){if(INSTANCE_MAP.has(t))return INSTANCE_MAP.get(t)}dispose(){["focus","blur","input","keydown","paste"].forEach(t=>{this._searchInput.removeEventListener(t,this)}),["mousemove","mouseleave"].forEach(t=>{this._dropElement.removeEventListener(t,this)}),this._config.fixed&&(document.removeEventListener("scroll",this,!0),window.removeEventListener("resize",this)),this._selectElement.style.display="block",this._holderElement.parentElement.removeChild(this._holderElement),this.parentForm&&this.parentForm.removeEventListener("reset",this),INSTANCE_MAP.delete(this._selectElement)}handleEvent(t){this._handleEvent(t)}_handleEvent(t){["scroll","resize"].includes(t.type)?(this._timer&&window.cancelAnimationFrame(this._timer),this._timer=window.requestAnimationFrame(()=>{this[`on${t.type}`](t)})):this[`on${t.type}`](t)}_configure(t={}){this._config=Object.assign({},DEFAULTS,{showDropIcon:!!this._findOption()});const r=this._selectElement.dataset.config?JSON.parse(this._selectElement.dataset.config):{},n={...t,...r,...this._selectElement.dataset};for(const[a,o]of Object.entries(DEFAULTS)){if(a=="config"||n[a]===void 0)continue;const l=n[a];switch(typeof o){case"number":this._config[a]=parseInt(l);break;case"boolean":this._config[a]=parseBool(l);break;case"string":this._config[a]=l.toString();break;case"object":this._config[a]=l,typeof l=="string"&&(["{","["].includes(l[0])?this._config[a]=JSON.parse(l):this._config[a]=l.split(l.includes("|")?"|":","));break;case"function":this._config[a]=typeof l=="string"?l.split(".").reduce((f,m)=>f[m],window):l,this._config[a]||console.error("Invalid function",l);break;default:this._config[a]=l;break}}this._config.placeholder||(this._config.placeholder=this._getPlaceholder()),this._config.suggestionsThreshold==-1&&(this._config.suggestionsThreshold=this._config.liveServer?1:0)}config(t=null){return t?this._config[t]:this._config}setConfig(t,r){this._config[t]=r}_configureParent(){for(this.overflowParent=null,this.parentForm=this._selectElement.parentElement;this.parentForm&&(this.parentForm.style.overflow==="hidden"&&(this.overflowParent=this.parentForm),this.parentForm=this.parentForm.parentElement,!(this.parentForm&&this.parentForm.nodeName=="FORM")););this.parentForm&&this.parentForm.addEventListener("reset",this)}_getPlaceholder(){if(this._selectElement.hasAttribute("placeholder"))return this._selectElement.getAttribute("placeholder");if(this._selectElement.dataset.placeholder)return this._selectElement.dataset.placeholder;let t=this._selectElement.querySelector("option");return!t||!this._config.autoselectFirst?"":(rmAttr(t,"selected"),t.selected=!1,t.value?"":t.textContent)}_configureSelectElement(){const t=this._selectElement;this._config.hideNativeValidation?(t.style.position="absolute",t.style.left="-9999px"):t.style.cssText="height:1px;width:1px;opacity:0;padding:0;margin:0;border:0;float:left;flex-basis:100%;min-height:unset;",t.tabIndex=-1,t.addEventListener("focus",r=>{this.onclick(r)}),t.addEventListener("invalid",r=>{this._holderElement.classList.add(INVALID_CLASS)})}_configureDropElement(){const t=this._dropElement;t.classList.add("dropdown-menu",CLASS_PREFIX+"menu"),t.id=CLASS_PREFIX+"menu-"+counter,t.setAttribute("role","menu");const r=t.style;r.padding="0",r.maxHeight="280px",this._config.fullWidth||(r.maxWidth="360px"),this._config.fixed&&(r.position="fixed"),r.overflowY="auto",r.overscrollBehavior="contain",r.textAlign="unset",t.addEventListener("mouseenter",n=>{this._keyboardNavigation=!1}),this._holderElement.appendChild(t),this._searchInput.setAttribute("aria-controls",t.id)}_configureHolderElement(){const t=this._holderElement;t.classList.add("form-control","dropdown"),["form-select-lg","form-select-sm","is-invalid","is-valid"].forEach(r=>{this._selectElement.classList.contains(r)&&t.classList.add(r)}),this._config.suggestionsThreshold==0&&this._config.showDropIcon&&t.classList.add("form-select"),this.overflowParent&&(t.style.position="inherit"),t.style.height="auto",t.addEventListener("click",this)}_configureContainerElement(){this._containerElement.addEventListener("click",r=>{this.isDisabled()||this._searchInput.style.visibility!="hidden"&&this._searchInput.focus()});const t=this._containerElement.style;t.display="flex",t.alignItems="center",t.flexWrap="wrap"}_configureSearchInput(){const t=this._searchInput;t.type="text",t.autocomplete="off",t.spellcheck=!1,attrs(t,{"aria-autocomplete":"list","aria-haspopup":"menu","aria-expanded":"false","aria-label":this._config.searchLabel,role:"combobox"}),t.style.cssText="background-color:transparent;color:currentColor;border:0;padding:0;outline:0;max-width:100%",this.resetSearchInput(!0),this._containerElement.appendChild(t),this._rtl=window.getComputedStyle(t).direction==="rtl"}onfocus(t){this._holderElement.classList.add(FOCUS_CLASS),this.showOrSearch(),this._config.onFocus(t,this)}onblur(t){this._abortController&&this._abortController.abort();let r=!0;if(this._config.addOnBlur&&this._searchInput.value&&(r=this._enterValue()),this._holderElement.classList.remove(FOCUS_CLASS),this.hideSuggestions(r),this._fireEvents){const n=this.getSelection(),a={selection:n?n.dataset.value:null,input:this._searchInput.value};this._config.onBlur(t,this),this._selectElement.dispatchEvent(new CustomEvent("tags.blur",{bubbles:!0,detail:a}))}}onpaste(t){const n=(t.clipboardData||window.clipboardData).getData("text/plain").replace(/\r\n|\n/g," ");if(n.length>2&&this._config.separator.length){const a=splitMulti(n,this._config.separator).filter(o=>o);a.length>1&&(t.preventDefault(),a.forEach(o=>{this._addPastedValue(o)}))}}_addPastedValue(t){let r=t,n={};if(this._config.allowNew)n.new=1;else{const a=this.getSelection();if(!a)return;t=a.getAttribute(VALUE_ATTRIBUTE),r=a.dataset.label}this._config.confirmAdd(t,this).then(()=>{this._add(r,t,n)}).catch(()=>{})}oninput(t){const r=this._searchInput.value;if(r){const n=r.slice(-1);if(this._config.separator.length&&this._config.separator.includes(n)){this._searchInput.value=this._searchInput.value.slice(0,-1);let a=this._searchInput.value;this._addPastedValue(a);return}}setTimeout(()=>{this._adjustWidth()}),this.showOrSearch()}onkeydown(t){let r=t.keyCode||t.key;const n=t.target;switch(t.keyCode==229&&(r=n.value.charAt(n.selectionStart-1).charCodeAt(0)),r){case 13:case"Enter":t.preventDefault(),this._enterValue();break;case 38:case"ArrowUp":t.preventDefault(),this._keyboardNavigation=!0,this._moveSelection(PREV);break;case 40:case"ArrowDown":t.preventDefault(),this._keyboardNavigation=!0,this.isDropdownVisible()?this._moveSelection(NEXT):this.showOrSearch(!1);break;case 8:case"Backspace":const a=this.getLastItem();this._searchInput.value.length==0&&a&&this._config.confirmClear(a,this).then(()=>{this.removeLastItem(),this._adjustWidth(),this.showOrSearch()}).catch(()=>{});break;case 27:case"Escape":this._searchInput.focus(),this.hideSuggestions();break}}onmousemove(t){this._keyboardNavigation=!1}onmouseleave(t){this.removeSelection()}onscroll(t){this._positionMenu()}onresize(t){this._positionMenu()}onclick(t=null){t&&t.preventDefault(),!(!this.isSingle()&&this.isMaxReached())&&this._searchInput.focus()}onreset(t){this.reset()}loadData(t=!1){Object.keys(this._config.items).length>0?this.setData(this._config.items,!0):this.resetSuggestions(!0),this._config.server&&(this._config.liveServer||this._loadFromServer(!t))}_setSelectedAttributes(){const t=this._selectElement.selectedOptions||[];for(let r=0;r<t.length;r++)t[r].value&&!t[r].hasAttribute("selected")&&t[r].setAttribute("selected","selected")}resetState(){this.isDisabled()?(this._holderElement.setAttribute("readonly",""),this._searchInput.setAttribute("disabled",""),this._holderElement.classList.add(DISABLED_CLASS)):(rmAttr(this._holderElement,"readonly"),rmAttr(this._searchInput,"disabled"),this._holderElement.classList.remove(DISABLED_CLASS))}resetSuggestions(t=!1){this._setSelectedAttributes();const r=a=>({value:a.getAttribute("value"),label:a.textContent,disabled:a.disabled,selected:a.selected,data:Object.assign({disabled:a.disabled},a.dataset)});let n=Array.from(this._selectElement.children).filter(a=>a.hasAttribute("label")||!a.disabled||this._config.showDisabled).map(a=>a.hasAttribute("label")?{group:a.getAttribute("label"),items:Array.from(a.children).map(o=>r(o))}:r(a));this.setData(n,t)}_enterValue(){let t=this.getSelection();if(t)return t.click(),!0;if(this._config.allowNew&&this._searchInput.value){let r=this._searchInput.value;return this._config.confirmAdd(r,this).then(()=>{this._add(r,r,{new:1})}).catch(()=>{}),!0}return!1}_loadFromServer(t=!1){this._abortController&&this._abortController.abort(),this._abortController=new AbortController;let r=this._selectElement.dataset.serverParams||{};typeof r=="string"&&(r=JSON.parse(r));const n=Object.assign({},this._config.serverParams,r);if(n[this._config.queryParam]=this._searchInput.value,this._config.noCache&&(n.t=Date.now()),n.related){const f=document.getElementById(n.related);if(f){n.related=f.value;const m=f.getAttribute("name");m&&(n[m]=f.value)}}const a=new URLSearchParams(n);let o=this._config.server,l=Object.assign(this._config.fetchOptions,{method:this._config.serverMethod||"GET",signal:this._abortController.signal});l.method==="POST"?l.body=a:o+="?"+a.toString(),this._holderElement.classList.add(LOADING_CLASS),fetch(o,l).then(f=>this._config.onServerResponse(f,this)).then(f=>{const m=f[this._config.serverDataKey]||f;this.setData(m,!t),this._abortController=null,t&&this._showSuggestions()}).catch(f=>{f.name==="AbortError"||this._abortController.signal.aborted||console.error(f)}).finally(f=>{this._holderElement.classList.remove(LOADING_CLASS)})}_add(t,r=null,n={}){if(!this.canAdd(t,n))return null;const a=this.addItem(t,r,n);return this._resetHtmlState(),this._config.keepOpen?this._showSuggestions():this.resetSearchInput(),a}_isItemEnabled(t){if(t.style.display==="none")return!1;const r=t.firstElementChild;return r.tagName==="A"&&!r.classList.contains("disabled")}_moveSelection(t=NEXT,r=null){const n=this.getSelection();if(n){const a=t===NEXT?"nextSibling":"previousSibling";r=n.parentNode;do r=r[a];while(r&&!this._isItemEnabled(r));r?n.classList.remove(...this._activeClasses()):n&&(r=n.parentElement)}else{if(t===PREV)return r;if(!r)for(r=this._dropElement.firstChild;r&&!this._isItemEnabled(r);)r=r.nextSibling}if(r){const a=r.offsetHeight,o=r.offsetTop,l=r.parentNode,f=l.offsetHeight,m=l.scrollHeight,_=l.offsetTop;if(a===0&&setTimeout(()=>{l.scrollTop=0}),t===PREV){const k=o-_>10?o-_:0;l.scrollTop=k}else o+a-(f+l.scrollTop)>0&&a>0&&(l.scrollTop=o+a-f+1,l.scrollTop+f>=m-10&&(l.scrollTop=o-_));const b=r.querySelector("a");b.classList.add(...this._activeClasses()),this._searchInput.setAttribute("aria-activedescendant",b.id),this._config.updateOnSelect&&(this._searchInput.value=b.dataset.label,this._adjustWidth())}else this._searchInput.setAttribute("aria-activedescendant","");return r}_adjustWidth(){this._holderElement.classList.remove(PLACEHOLDER_CLASS),this._searchInput.value?this._searchInput.size=this._searchInput.value.length:this.getSelectedValues().length?(this._searchInput.placeholder="",this._searchInput.size=1):(this._searchInput.size=this._config.placeholder.length>0?this._config.placeholder.length:1,this._searchInput.placeholder=this._config.placeholder,this._holderElement.classList.add(PLACEHOLDER_CLASS));const t=this._searchInput.value||this._searchInput.placeholder,r=window.getComputedStyle(this._holderElement).fontSize,n=calcTextWidth(t,r)+16;this._searchInput.style.width=n+"px"}_buildSuggestions(t){for(;this._dropElement.lastChild;)this._dropElement.removeChild(this._dropElement.lastChild);let r=0,n=1;for(let a=0;a<t.length;a++){const o=t[a];if(o){if(o.group&&o.items){const l=ce("li");l.setAttribute("role","presentation"),l.dataset.id=""+n;const f=ce("span");if(l.append(f),f.classList.add("dropdown-header","text-truncate"),f.innerHTML=o.group,this._dropElement.appendChild(l),o.items)for(let m=0;m<o.items.length;m++){const _=o.items[m];_.group_id=n,this._buildSuggestionsItem(o.items[m],r),r++}n++}this._buildSuggestionsItem(o,r),r++}}if(this._config.notFoundMessage){const a=ce("li");a.setAttribute("role","presentation"),a.classList.add(CLASS_PREFIX+"not-found"),a.innerHTML='<span class="dropdown-item"></span>',this._dropElement.appendChild(a)}}_buildSuggestionsItem(t,r){if(!t[this._config.valueField])return;const n=t[this._config.valueField],a=t[this._config.labelField];let o=this._config.onRenderItem(t,a,this);const l=ce("li");l.setAttribute("role","presentation"),t.group_id&&l.setAttribute("data-group-id",""+t.group_id);const f=ce("a");l.append(f),f.id=this._dropElement.id+"-"+r,f.classList.add("dropdown-item","text-truncate"),t.disabled&&f.classList.add("disabled"),f.setAttribute(VALUE_ATTRIBUTE,n),f.dataset.label=a,this._config.searchFields.forEach(m=>{l.dataset[m]=t[m]}),f.setAttribute("href","#"),f.innerHTML=o,this._dropElement.appendChild(l),f.addEventListener("mouseenter",m=>{this._keyboardNavigation||(this.removeSelection(),l.querySelector("a").classList.add(...this._activeClasses()))}),f.addEventListener("mousedown",m=>{m.preventDefault()}),f.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation(),this._config.confirmAdd(n,this).then(()=>{this._add(a,n,t.data),this._config.onSelectItem(t,this)}).catch(()=>{})})}initialOptions(){return this._selectElement.querySelectorAll("option[data-init]")}_removeSelectedAttrs(){this._selectElement.querySelectorAll("option").forEach(t=>{rmAttr(t,"selected")})}reset(){this.removeAll(),this._fireEvents=!1;const t=this.initialOptions();this._removeSelectedAttrs();for(let r=0;r<t.length;r++){const n=t[r],a=Object.assign({},{disabled:n.hasAttribute("disabled")},n.dataset);this.addItem(n.textContent,n.value,a)}this._resetHtmlState(),this._fireEvents=!0}resetSearchInput(t=!1){this._searchInput.value="",this._adjustWidth(),t||(this._shouldShow()||this.hideSuggestions(),this._searchInput===document.activeElement&&this._searchInput.dispatchEvent(new Event("input"))),this.isMaxReached()?(this._holderElement.classList.add(MAX_REACHED_CLASS),this._searchInput.style.visibility="hidden"):this._searchInput.style.visibility=="hidden"&&(this._searchInput.style.visibility="visible"),this.isSingle()&&!t&&document.activeElement.blur()}getSelectedValues(){const t=this._selectElement.querySelectorAll("option[selected]");return Array.from(t).map(r=>r.value)}getAvailableValues(){const t=this._selectElement.querySelectorAll("option");return Array.from(t).map(r=>r.value)}showOrSearch(t=!0){if(t&&!this._shouldShow()){this.hideSuggestions(!1);return}this._config.liveServer?this._searchFunc():this._showSuggestions()}hideSuggestions(t=!0){this._dropElement.classList.remove(SHOW_CLASS),attrs(this._searchInput,{"aria-expanded":"false"}),this.removeSelection(),t&&this._holderElement.classList.remove(INVALID_CLASS)}toggleSuggestions(t=!0,r=!0){this._dropElement.classList.contains(SHOW_CLASS)?this.hideSuggestions(r):this.showOrSearch(t)}_shouldShow(){return this.isDisabled()||this.isMaxReached()?!1:this._searchInput.value.length>=this._config.suggestionsThreshold}_showSuggestions(){if(document.activeElement!=this._searchInput||this._searchInput.style.visibility=="hidden")return;const t=normalize(this._searchInput.value),r={},n=this._dropElement.querySelectorAll("li");let a=0,o=null,l=!1,f={};for(let m=0;m<n.length;m++){let _=n[m],b=_.firstElementChild;if(b instanceof HTMLSpanElement){_.dataset.id&&(f[_.dataset.id]=!1),hideItem(_);continue}if(b.classList.remove(...this._activeClasses()),!this._config.allowSame){const A=b.getAttribute(VALUE_ATTRIBUTE);if(r[A]=r[A]||0,this._findOption(b.getAttribute(VALUE_ATTRIBUTE),"[selected]",r[A]++)){hideItem(_);continue}}const k=this._config.showAllSuggestions||t.length===0;let D=t.length==0&&this._config.suggestionsThreshold===0;!k&&t.length>0&&this._config.searchFields.forEach(A=>{const H=normalize(b.dataset[A]);let Q=!1;if(this._config.fuzzy)Q=fuzzyMatch(H,t);else{const q=H.indexOf(t);Q=this._config.startsWith?q===0:q>=0}Q&&(D=!0)});const x=D||t.length===0;if(k||D?(a++,showItem(_),_.dataset.groupId&&(f[_.dataset.groupId]=!0),!o&&this._isItemEnabled(_)&&x&&(o=_),this._config.maximumItems>0&&a>this._config.maximumItems&&hideItem(_)):hideItem(_),this._config.highlightTyped){const A=b.textContent,H=normalize(A).indexOf(t),Q=A.substring(0,H)+`<mark class="${this._config.highlightClass}">${A.substring(H,H+t.length)}</mark>`+A.substring(H+t.length,A.length);b.innerHTML=Q}this._isItemEnabled(_)&&(l=!0)}if(!this._config.allowNew&&!(t.length===0&&!l)&&this._holderElement.classList.add(INVALID_CLASS),this._config.allowNew&&this._config.regex&&this.isInvalid()&&this._holderElement.classList.remove(INVALID_CLASS),Array.from(n).filter(m=>m.dataset.id).forEach(m=>{f[m.dataset.id]===!0&&showItem(m)}),l&&(this._holderElement.classList.remove(INVALID_CLASS),o&&this._config.autoselectFirst&&(this.removeSelection(),this._moveSelection(NEXT,o))),a===0)if(this._config.notFoundMessage){const m=this._dropElement.querySelector("."+CLASS_PREFIX+"not-found");m.style.display="block";const _=this._config.notFoundMessage.replace("{{tag}}",this._searchInput.value);m.innerHTML=`<span class="dropdown-item">${_}</span>`,this._showDropdown()}else this.hideSuggestions(!1);else this._showDropdown()}_showDropdown(){const t=this._dropElement.classList.contains(SHOW_CLASS);t||(this._dropElement.classList.add(SHOW_CLASS),attrs(this._searchInput,{"aria-expanded":"true"})),this._positionMenu(t)}_positionMenu(t=!1){const r=this._rtl,n=this._config.fixed,a=this._config.fullWidth,o=this._searchInput.getBoundingClientRect(),l=this._holderElement.getBoundingClientRect();let f=0,m=0;if(n?a?(f=l.x,m=l.y+l.height+2):(f=o.x,m=o.y+o.height):a?(f=0,m=l.height+2):(f=this._searchInput.offsetLeft,m=this._searchInput.offsetHeight+this._searchInput.offsetTop),r&&!a&&(f-=this._dropElement.offsetWidth-o.width),!a){const k=Math.min(window.innerWidth,document.body.offsetWidth),D=r?o.x+o.width-this._dropElement.offsetWidth-1:k-1-(o.x+this._dropElement.offsetWidth);D<0&&(f=r?f-D:f+D)}a&&(this._dropElement.style.width=this._holderElement.offsetWidth+"px"),t||(this._dropElement.style.transform="unset"),Object.assign(this._dropElement.style,{left:f+"px",top:m+"px"});const _=this._dropElement.getBoundingClientRect(),b=window.innerHeight;if(_.y+_.height>b||this._dropElement.style.transform.includes("translateY")){const k=a?l.height+4:o.height;this._dropElement.style.transform="translateY(calc(-100.1% - "+k+"px))"}}_getBootstrapVersion(){let t=5,r=window.jQuery;return r&&r.fn.tooltip&&r.fn.tooltip.Constructor&&(t=parseInt(r.fn.tooltip.Constructor.VERSION.charAt(0))),t}_isSelected(t){return!!Array.from(this._selectElement.querySelectorAll("option")).find(a=>a.textContent==t&&a.getAttribute("selected"))}_isSelectable(t){const n=Array.from(this._selectElement.querySelectorAll("option")).filter(a=>a.textContent==t);return!(n.length>0&&!n.find(o=>!o.getAttribute("selected")))}hasItem(t){for(let r of this._config.items){const n=r.items||[r];for(let a of n)if(a[this._config.labelField]==t)return!0}return!1}_validateRegex(t){return new RegExp(this._config.regex.trim()).test(t)}getSelection(){return this._dropElement.querySelector("a."+ACTIVE_CLASS)}removeSelection(){const t=this.getSelection();t&&t.classList.remove(...this._activeClasses())}_activeClasses(){return[...this._config.activeClasses,ACTIVE_CLASS]}getActiveSelection(){return this.getSelection()}removeActiveSelection(){return this.removeSelection()}removeAll(){this.getSelectedValues().forEach(r=>{this.removeItem(r,!0)}),this._adjustWidth()}removeLastItem(t=!1){let r=this.getLastItem();r&&this.removeItem(r,t)}getLastItem(){let t=this._containerElement.querySelectorAll("span."+CLASS_PREFIX+"badge");return t.length?t[t.length-1].getAttribute(VALUE_ATTRIBUTE):void 0}enable(){this._selectElement.setAttribute("disabled",""),this.resetState()}disable(){rmAttr(this._selectElement,"disabled"),this.resetState()}isDisabled(){return this._selectElement.hasAttribute("disabled")||this._selectElement.disabled||this._selectElement.hasAttribute("readonly")}isDropdownVisible(){return this._dropElement.classList.contains(SHOW_CLASS)}isInvalid(){return this._holderElement.classList.contains(INVALID_CLASS)}isSingle(){return!this._selectElement.hasAttribute("multiple")}isMaxReached(){return this._config.max&&this.getSelectedValues().length>=this._config.max}canAdd(t,r={}){if(!t||r.new&&!this._config.allowNew||!r.new&&!this.hasItem(t)||this.isDisabled())return!1;if(!this.isSingle()&&!this._config.allowSame){if(r.new){if(this._isSelected(t))return!1}else if(!this._isSelectable(t))return!1}return this.isMaxReached()?!1:this._config.regex&&r.new&&!this._validateRegex(t)?(this._holderElement.classList.add(INVALID_CLASS),!1):this._config.onCanAdd&&this._config.onCanAdd(t,r,this)===!1?(this._holderElement.classList.add(INVALID_CLASS),!1):!0}getData(){return this._config.items}setData(t,r=!1){Array.isArray(t)||(t=Object.entries(t).map(([n,a])=>({value:n,label:a}))),this._config.items!=t&&(this._config.items=t),r&&(this._removeSelectedAttrs(),t.forEach(n=>{const a=n[this._config.valueField],o=n[this._config.labelField];if(a&&(n.selected||this._config.selected.includes(a))){const l=this.addItem(o,a,n.data);l&&l.setAttribute("data-init","true")}})),this._buildSuggestions(t),this._resetHtmlState()}_findOption(t=null,r="",n=0){const o="option"+(t===null?"":'[value="'+CSS.escape(t)+'"]')+r;return this._selectElement.querySelectorAll(o)[n]||null}addItem(t,r=null,n={}){r||(r=t),this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let a=this._findOption(r,":not([selected])");if(!a){a=ce("option"),a.value=r,a.textContent=t;for(const[o,l]of Object.entries(n))a.dataset[o]=l;this._selectElement.appendChild(a),this._config.onCreateItem(a,this)}return a&&(n=Object.assign({title:a.getAttribute("title")},n,a.dataset)),a.setAttribute("selected","selected"),a.selected=!0,this._createBadge(t,r,n),this._fireEvents&&this._selectElement.dispatchEvent(new Event("change",{bubbles:!0})),a}_resetHtmlState(){const t=this._selectElement.innerHTML;this._selectElement.innerHTML="",this._selectElement.innerHTML=t,this._adjustWidth()}_createBadge(t,r=null,n={}){const a=this._getBootstrapVersion()===5,o=n.disabled&&parseBool(n.disabled),l=this._config.allowClear&&!o;let f=t,m=ce("span"),_=[CLASS_PREFIX+"badge"];const b=this.isSingle()&&!this._config.singleBadge;if(!b){_.push("badge");let D=this._config.badgeStyle;n.badgeStyle&&(D=n.badgeStyle),n.badgeClass&&_.push(...n.badgeClass.split(" ")),this._config.baseClass?_.push(...this._config.baseClass.split(" ")):a?_=[..._,"bg-"+D,"text-truncate"]:_=[..._,"badge-"+D],m.style.maxWidth="100%"}o&&_.push("disabled","opacity-50");const k=b?0:2;if(m.style.margin=k+"px 6px "+k+"px 0px",m.style.marginBlock=k+"px",m.style.marginInline="0px 6px",m.classList.add(..._),m.setAttribute(VALUE_ATTRIBUTE,r),n.title&&m.setAttribute("title",n.title),l){const D=_.includes("text-dark")||b?"btn-close":"btn-close btn-close-white";let x="margin-inline: 0px 6px;",A="left";this._config.clearEnd&&(A="right"),A=="right"&&(x="margin-inline: 6px 0px;");const H=a?'<button type="button" style="font-size:0.65em;'+x+'" class="'+D+'" aria-label="'+this._config.clearLabel+'"></button>':'<button type="button" style="font-size:1em;'+x+'text-shadow:none;color:currentColor;transform:scale(1.2);float:none" class="close" aria-label="'+this._config.clearLabel+'"><span aria-hidden="true">&times;</span></button>';f=A=="left"?H+f:f+H}m.innerHTML=f,this._containerElement.insertBefore(m,this._searchInput),n.title&&tooltip&&a&&tooltip.getOrCreateInstance(m),l&&m.querySelector("button").addEventListener("click",D=>{D.preventDefault(),D.stopPropagation(),this.isDisabled()||this._config.confirmClear(r,this).then(()=>{this.removeItem(r),document.activeElement.blur(),this._adjustWidth()}).catch(()=>{})})}removeItem(t,r=!1){const n=CSS.escape(t);let a=this._containerElement.querySelectorAll("span["+VALUE_ATTRIBUTE+'="'+n+'"]');if(!a.length)return;const o=a.length-1,l=a[o];l&&(l.dataset.bsOriginalTitle&&tooltip.getOrCreateInstance(l).dispose(),l.remove());let f=this._findOption(t,"[selected]",o);f&&(rmAttr(f,"selected"),f.selected=!1,this._fireEvents&&!r&&this._selectElement.dispatchEvent(new Event("change",{bubbles:!0}))),this._searchInput.style.visibility=="hidden"&&!this.isMaxReached()&&(this._searchInput.style.visibility="visible",this._holderElement.classList.remove(MAX_REACHED_CLASS)),r||this._config.onClearItem(t,this)}}const BulkLabelsModal_vue_vue_type_style_index_0_lang="",_sfc_main$m={props:["resourcesOrthancId","resourceLevel"],emits:["bulkModalClosed"],data(){return{labelsToRemove:[],labelsToAdd:[],removedLabels:[],messages:[],addInProgress:!1,clearAllInProgress:!1,removeInProgress:!1}},async mounted(){this.reset(),Tags.init(),this.$refs["modal-main-div"].addEventListener("show.bs.modal",e=>{document.querySelector("body").appendChild(e.target)}),this.$refs["modal-main-div"].addEventListener("hide.bs.modal",e=>{this.$emit("bulkModalClosed")})},watch:{},methods:{async showModal(){var e=new bootstrap.Modal(this.$el,{});e.show()},async reset(){this.labelsToRemove=[],this.labelsToAdd=[],this.removedLabels=[],this.messages=[],this.addInProgress=!1,this.clearAllInProgress=!1,this.removeInProgress=!1},async clearAllLabels(){this.clearAllInProgress=!0;let e=[];for(const n of this.resourcesOrthancId)e.push(await api.removeAllLabels(n));const t=await Promise.all(e);let r=new Set;for(const n of t)for(const a of n)r.add(a);this.messages.push({labels:r,part1:this.$t("labels.cleared_labels_message_part_1_html",{count:this.resourcesOrthancId.length}),part2:this.$t("labels.cleared_labels_message_part_2_html",{count:this.resourcesOrthancId.length})}),this.clearAllInProgress=!1,this.$store.dispatch("studies/refreshStudiesLabels",{studiesIds:this.resourcesOrthancId})},async addLabels(){this.addInProgress=!0;let e=[];for(const n of this.labelsToAdd)for(const a of this.resourcesOrthancId)e.push(api.addLabel({studyId:a,label:n}));const t=await Promise.all(e);let r=new Set;for(const n of t)r.add(n);this.messages.push({labels:r,part1:this.$t("labels.added_labels_message_part_1_html",{count:this.resourcesOrthancId.length}),part2:this.$t("labels.added_labels_message_part_2_html",{count:this.resourcesOrthancId.length})}),this.addInProgress=!1,this.$store.dispatch("studies/refreshStudiesLabels",{studiesIds:this.resourcesOrthancId})},isLabelToAdd(e){return this.labelsToAdd.includes(e)},isLabelToRemove(e){return this.labelsToRemove.includes(e)},async removeLabels(){this.removeInProgress=!0;let e=[];for(const n of this.labelsToRemove)for(const a of this.resourcesOrthancId)e.push(api.removeLabel({studyId:a,label:n}));const t=await Promise.all(e);let r=new Set;for(const n of t)r.add(n);this.messages.push({labels:r,part1:this.$t("labels.removed_labels_message_part_1_html",{count:this.resourcesOrthancId.length}),part2:this.$t("labels.removed_labels_message_part_2_html",{count:this.resourcesOrthancId.length})}),this.removeInProgress=!1,this.$store.dispatch("studies/refreshStudiesLabels",{studiesIds:this.resourcesOrthancId})}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,allLabels:e=>e.labels.allLabels})}},_hoisted_1$m={class:"modal fade",id:"bulk-labels-modal",tabindex:"-1","aria-labelledby":"modalLabel",ref:"modal-main-div"},_hoisted_2$l={class:"modal-dialog modal-lg modal-dialog-scrollable"},_hoisted_3$k={class:"modal-content"},_hoisted_4$i={class:"modal-header"},_hoisted_5$g={class:"modal-title",id:"modalLabel"},_hoisted_6$e=createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_hoisted_7$b={class:"modal-body"},_hoisted_8$a={class:"container"},_hoisted_9$8={class:"row border-bottom py-3"},_hoisted_10$8={class:"col-md-9"},_hoisted_11$8=["innerHTML"],_hoisted_12$8={class:"col-md-3"},_hoisted_13$8=["disabled"],_hoisted_14$5={key:0,class:"spinner-border spinner-border-sm alert-icon",role:"status","aria-hidden":"true"},_hoisted_15$5={class:"row border-bottom py-3"},_hoisted_16$5={class:"col-md-12"},_hoisted_17$4=["innerHTML"],_hoisted_18$4={class:"col-md-9"},_hoisted_19$4=["placeholder"],_hoisted_20$4=["value","selected"],_hoisted_21$4={class:"col-md-3"},_hoisted_22$4=["disabled"],_hoisted_23$4={key:0,class:"spinner-border spinner-border-sm alert-icon",role:"status","aria-hidden":"true"},_hoisted_24$3={class:"row border-bottom py-3"},_hoisted_25$3={class:"col-md-12"},_hoisted_26$3=["innerHTML"],_hoisted_27$3={class:"col-md-9"},_hoisted_28$3=["placeholder"],_hoisted_29$3=["value","selected"],_hoisted_30$3={class:"col-md-3"},_hoisted_31$3=["disabled"],_hoisted_32$3={key:0,class:"spinner-border spinner-border-sm alert-icon",role:"status","aria-hidden":"true"},_hoisted_33$3={class:"row border-bottom py-3"},_hoisted_34$3={class:"col-md-12"},_hoisted_35$3=["innerHTML"],_hoisted_36$3=["innerHTML"],_hoisted_37$3={class:"row py-3"},_hoisted_38$3={class:"col-md-12"},_hoisted_39$3={type:"button",class:"btn btn-primary w-100","data-bs-dismiss":"modal","aria-label":"Close"};function _sfc_render$m(e,t,r,n,a,o){return openBlock(),createElementBlock("div",_hoisted_1$m,[createBaseVNode("div",_hoisted_2$l,[createBaseVNode("div",_hoisted_3$k,[createBaseVNode("div",_hoisted_4$i,[createBaseVNode("h5",_hoisted_5$g,toDisplayString(e.$t("labels.modal_title")),1),_hoisted_6$e]),createBaseVNode("div",_hoisted_7$b,[createBaseVNode("div",_hoisted_8$a,[createBaseVNode("div",_hoisted_9$8,[createBaseVNode("div",_hoisted_10$8,[createBaseVNode("p",{innerHTML:e.$t("labels.clear_all_labels_message_html")},null,8,_hoisted_11$8)]),createBaseVNode("div",_hoisted_12$8,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",onClick:t[0]||(t[0]=l=>o.clearAllLabels()),disabled:a.clearAllInProgress},[createBaseVNode("span",null,toDisplayString(e.$t("labels.clear_all_button")),1),a.clearAllInProgress?(openBlock(),createElementBlock("span",_hoisted_14$5)):createCommentVNode("",!0)],8,_hoisted_13$8)])]),createBaseVNode("div",_hoisted_15$5,[createBaseVNode("div",_hoisted_16$5,[createBaseVNode("p",{innerHTML:e.$t("labels.add_labels_message_html")},null,8,_hoisted_17$4)]),createBaseVNode("div",_hoisted_18$4,[withDirectives(createBaseVNode("select",{class:"form-select",id:"addLabels",name:"tags[]","onUpdate:modelValue":t[1]||(t[1]=l=>a.labelsToAdd=l),multiple:"","data-allow-clear":"true","data-show-all-suggestions":"true","data-allow-new":"true","data-badge-style":"info",placeholder:e.$t("labels.add_labels_placeholder")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.allLabels,l=>(openBlock(),createElementBlock("option",{key:l,value:l,selected:o.isLabelToAdd(l)},toDisplayString(l),9,_hoisted_20$4))),128))],8,_hoisted_19$4),[[vModelSelect,a.labelsToAdd]])]),createBaseVNode("div",_hoisted_21$4,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",onClick:t[2]||(t[2]=l=>o.addLabels()),disabled:a.addInProgress},[createBaseVNode("span",null,toDisplayString(e.$t("labels.add_button")),1),a.addInProgress?(openBlock(),createElementBlock("span",_hoisted_23$4)):createCommentVNode("",!0)],8,_hoisted_22$4)])]),createBaseVNode("div",_hoisted_24$3,[createBaseVNode("div",_hoisted_25$3,[createBaseVNode("p",{innerHTML:e.$t("labels.remove_labels_message_html")},null,8,_hoisted_26$3)]),createBaseVNode("div",_hoisted_27$3,[withDirectives(createBaseVNode("select",{class:"form-select",id:"removeLabels",name:"tags[]","onUpdate:modelValue":t[3]||(t[3]=l=>a.labelsToRemove=l),multiple:"","data-allow-clear":"true","data-show-all-suggestions":"true","data-allow-new":"true","data-badge-style":"info",placeholder:e.$t("labels.remove_labels_placeholder")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.allLabels,l=>(openBlock(),createElementBlock("option",{key:l,value:l,selected:o.isLabelToRemove(l)},toDisplayString(l),9,_hoisted_29$3))),128))],8,_hoisted_28$3),[[vModelSelect,a.labelsToRemove]])]),createBaseVNode("div",_hoisted_30$3,[createBaseVNode("button",{type:"button",class:"btn btn-primary w-100",onClick:t[4]||(t[4]=l=>o.removeLabels()),disabled:a.removeInProgress},[createBaseVNode("span",null,toDisplayString(e.$t("labels.remove_button")),1),a.removeInProgress?(openBlock(),createElementBlock("span",_hoisted_32$3)):createCommentVNode("",!0)],8,_hoisted_31$3)])]),createBaseVNode("div",_hoisted_33$3,[createBaseVNode("div",_hoisted_34$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.messages,l=>(openBlock(),createElementBlock("p",{key:l},[createBaseVNode("span",{innerHTML:l.part1},null,8,_hoisted_35$3),(openBlock(!0),createElementBlock(Fragment,null,renderList(l.labels,f=>(openBlock(),createElementBlock("span",{key:f,class:"label badge bg-info"},toDisplayString(f),1))),128)),createBaseVNode("span",{innerHTML:l.part2},null,8,_hoisted_36$3)]))),128))])]),createBaseVNode("div",_hoisted_37$3,[createBaseVNode("div",_hoisted_38$3,[createBaseVNode("button",_hoisted_39$3,toDisplayString(e.$t("close")),1)])])])])])])],512)}const BulkLabelsModal=_export_sfc(_sfc_main$m,[["render",_sfc_render$m]]),ResourceButtonGroup_vue_vue_type_style_index_0_lang="",_sfc_main$l={props:["resourceOrthancId","resourceDicomUid","resourceLevel","customClass","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags","instanceTags"],setup(){return{}},data(){return{isBulkLabelModalVisible:!1,isWsiButtonEnabled:!1}},async mounted(){if(this.resourceLevel=="series"){let e=await api.getSeriesInstances(this.resourceOrthancId),t=await api.getSimplifiedInstanceTags(e[0].ID);this.isWsiButtonEnabled=t.SOPClassUID=="1.2.840.10008.5.1.4.1.1.77.1.6"}},methods:{toggleSubMenu(e){let t=e.target.parentElement;e.target.tagName=="I"&&(t=t.parentElement),$$1(t.querySelector(".dropdown-menu")).toggle(),e.stopPropagation(),e.preventDefault()},deleteResource(e){this.resourceLevel=="bulk"?(api.deleteResources(this.resourcesOrthancId),window.location.reload()):api.deleteResource(this.resourceLevel,this.resourceOrthancId).then(()=>{this.$emit("deletedResource")}).catch(t=>{console.error("failed to delete resource : ",this.resourceOrthancId,t)})},getApiUrl(e){return api.getApiUrl(this.resourceLevel,this.resourceOrthancId,e)},async sendToDicomWebServer(e){const t=await api.sendToDicomWebServer(this.resourcesOrthancId,e);this.$store.dispatch("jobs/addJob",{jobId:t,name:"Send to DicomWeb ("+e+")"})},async sendToOrthancPeer(e){const t=await api.sendToOrthancPeer(this.resourcesOrthancId,e);this.$store.dispatch("jobs/addJob",{jobId:t,name:"Send to Peer ("+e+")"})},async sendToOrthancPeerWithTransfers(e){const t=await api.sendToOrthancPeerWithTransfers(this.resourcesForTransfer,e);this.$store.dispatch("jobs/addJob",{jobId:t,name:"Transfer to Peer ("+e+")"})},async sendToDicomModality(e){const t=await api.sendToDicomModality(this.resourcesOrthancId,e);this.$store.dispatch("jobs/addJob",{jobId:t,name:"Send to DICOM ("+e+")"})},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},copyIdToClipboard(){clipboardHelpers.copyToClipboard(this.resourceOrthancId)},getViewerIcon(e){const t=this.uiOptions.ViewersOrdering,r=this.uiOptions.ViewersIcons;for(let n of t)if(n==e&&(this.hasOsimisViewer&&e=="osimis-web-viewer"||this.hasStoneViewer&&e=="stone-webviewer"||this.hasVolView&&e=="volview"||this.hasOhifViewer&&e=="ohif"||this.hasOhifViewer&&e=="ohif-vr"||this.hasOhifViewer&&e=="ohif-tmtv"||this.hasMedDreamViewer&&e=="meddream"))return r[n];return"bi bi-eye"},showBulkLabelModal(){this.isBulkLabelModalVisible=!0,setTimeout(()=>{this.$refs["bulk-label-modal"].showModal()},50)},async onBulkModalClosed(){this.isBulkLabelModalVisible=!1,await this.$store.dispatch("labels/refresh")},getOhifViewerUrl(e){if(this.resourceLevel=="bulk"){const t=this.selectedStudies.map(n=>n.MainDicomTags.StudyInstanceUID);return api.getOhifViewerUrlForDicomWebBulkStudies(e,t)}else{if(this.ohifDataSource=="dicom-web")return api.getOhifViewerUrlForDicomWeb(e,this.resourceDicomUid);if(this.ohifDataSource=="dicom-json")return api.getOhifViewerUrlForDicomJson(e,this.resourceOrthancId)}}},watch:{},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,ohifDataSource:e=>e.configuration.ohifDataSource,installedPlugins:e=>e.configuration.installedPlugins,targetDicomWebServers:e=>e.configuration.targetDicomWebServers,targetDicomModalities:e=>e.configuration.targetDicomModalities,selectedStudiesIds:e=>e.studies.selectedStudiesIds,selectedStudies:e=>e.studies.selectedStudies,orthancPeers:e=>e.configuration.orthancPeers,tokens:e=>e.configuration.tokens}),componentId(){return this.resourceLevel=="bulk"?"bulk-id":this.resourceOrthancId},hasSendTo(){return this.uiOptions.EnableSendTo&&(this.hasSendToDicomWeb||this.hasSendToPeers||this.hasSendToDicomModalities||this.hasSendToPeersWithTransfer)},isSendToEnabled(){return this.resourceLevel=="bulk"?this.selectedStudiesIds.length>0:!0},hasLabelsButton(){return this.uiOptions.EnableEditLabels&&this.resourceLevel=="bulk"},isLabelsEnabled(){return this.resourceLevel=="bulk"?this.selectedStudiesIds.length>0:!1},isDeleteEnabled(){return this.resourceLevel=="bulk"?this.selectedStudiesIds.length>0:!0},hasWsiButton(){return!(this.resourceLevel!="series"||!("wsi"in this.installedPlugins))},wsiViewerUrl(){return api.getWsiViewerUrl(this.resourceOrthancId)},hasSendToPeers(){return this.orthancPeers.length>0},hasSendToPeersWithTransfer(){return this.hasSendToPeers&&"transfers"in this.installedPlugins},hasSendToDicomWeb(){return this.targetDicomWebServers.length>0},hasSendToDicomModalities(){return this.targetDicomModalities.length>0},hasOsimisViewer(){return"osimis-web-viewer"in this.installedPlugins},osimisViewerUrl(){return api.getOsimisViewerUrl(this.resourceLevel,this.resourceOrthancId)},hasStoneViewer(){return"stone-webviewer"in this.installedPlugins},stoneViewerUrl(){if(this.resourceLevel=="bulk"){const e=this.selectedStudies.map(r=>r.MainDicomTags.StudyInstanceUID);return api.getStoneViewerUrlForBulkStudies(e)}else return api.getStoneViewerUrl(this.resourceLevel,this.resourceDicomUid)},hasStoneViewerButton(){return this.hasStoneViewer&&(this.resourceLevel=="study"||this.resourceLevel=="bulk")},isStoneViewerButtonEnabled(){return this.resourceLevel=="study"||this.resourceLevel=="bulk"&&this.selectedStudiesIds.length>0},hasVolView(){return"volview"in this.installedPlugins},volViewUrl(){return api.getVolViewUrl(this.resourceLevel,this.resourceOrthancId)},hasVolViewButton(){return this.hasVolView&&(this.resourceLevel=="study"||this.resourceLevel=="series")},isVolViewButtonEnabled(){return this.resourceLevel=="study"||this.resourceLevel=="series"},hasOhifViewer(){return this.uiOptions.EnableOpenInOhifViewer||this.uiOptions.EnableOpenInOhifViewer3},hasOhifViewerButton(){return this.uiOptions.EnableOpenInOhifViewer3?this.hasOhifViewer&&(this.resourceLevel=="study"||this.resourceLevel=="bulk"&&this.ohifDataSource=="dicom-web"):this.hasOhifViewer&&this.resourceLevel=="study"},hasOhifViewerButtonVr(){return this.uiOptions.EnableOpenInOhifViewer3?this.hasOhifViewer&&(this.resourceLevel=="study"||this.resourceLevel=="bulk"&&this.ohifDataSource=="dicom-web"):!1},hasOhifViewerButtonTmtv(){return this.uiOptions.EnableOpenInOhifViewer3?this.hasOhifViewer&&this.resourceLevel=="study":!1},ohifViewerUrl(){return this.getOhifViewerUrl("basic")},ohifViewerUrlVr(){return this.getOhifViewerUrl("vr")},ohifViewerUrlTmtv(){return this.getOhifViewerUrl("tmtv")},isOhifButtonEnabled(){return this.uiOptions.EnableOpenInOhifViewer3?this.resourceLevel=="study"||this.resourceLevel=="bulk"&&this.selectedStudiesIds.length>0:this.resourceLevel=="study"},isOhifButtonVrEnabled(){return this.uiOptions.EnableOpenInOhifViewer3?this.resourceLevel=="study"||this.resourceLevel=="bulk"&&this.selectedStudiesIds.length>0:!1},isOhifButtonTmtvEnabled(){return this.uiOptions.EnableOpenInOhifViewer3?this.resourceLevel=="study":!1},hasMedDreamViewer(){return this.uiOptions.EnableOpenInMedDreamViewer},hasMedDreamViewerButton(){return this.hasMedDreamViewer&&(this.resourceLevel=="study"||this.resourceLevel=="bulk")},isMedDreamViewerButtonEnabled(){return this.resourceLevel=="study"||this.resourceLevel=="bulk"&&this.selectedStudiesIds.length>0},medDreamViewerUrl(){return this.uiOptions.MedDreamViewerPublicRoot+"?study="+this.resourceDicomUid},instancePreviewUrl(){return api.getInstancePreviewUrl(this.resourceOrthancId)},instanceDownloadUrl(){return api.getInstanceDownloadUrl(this.resourceOrthancId)},downloadZipUrl(){return api.getDownloadZipUrl(this.resourceLevel,this.resourceOrthancId)},downloadDicomDirUrl(){return api.getDownloadDicomDirUrl(this.resourceLevel,this.resourceOrthancId)},resourceTitle(){return resourceHelpers.getResourceTitle(this.resourceLevel,this.patientMainDicomTags,this.studyMainDicomTags,this.seriesMainDicomTags,this.instanceTags)},osimisViewerIcon(){return this.getViewerIcon("osimis-web-viewer")},stoneViewerIcon(){return this.getViewerIcon("stone-webviewer")},volViewIcon(){return this.getViewerIcon("volview")},medDreamViewerIcon(){return this.getViewerIcon("meddream")},ohifViewerIcon(){return this.getViewerIcon("ohif")},ohifViewerIconVr(){return this.getViewerIcon("ohif-vr")},ohifViewerIconTmtv(){return this.getViewerIcon("ohif-tmtv")},deleteResourceTitle(){return{study:"delete_study_title",series:"delete_series_title",instance:"delete_instance_title",bulk:"delete_studies_title"}[this.resourceLevel]},deleteResourceBody(){return{study:"delete_study_body",series:"delete_series_body",instance:"delete_instance_body",bulk:"delete_studies_body"}[this.resourceLevel]},isAnonymizationEnabled(){return this.resourceLevel=="study"||this.resourceLevel=="series"?this.uiOptions.EnableAnonymization:!1},isModificationEnabled(){return this.resourceLevel=="study"||this.resourceLevel=="series"?this.uiOptions.EnableModification:!1},resourcesOrthancId(){return this.resourceLevel=="bulk"?this.selectedStudiesIds:[this.resourceOrthancId]},resourcesForTransfer(){return this.resourceLevel=="bulk"?this.selectedStudiesIds.map(e=>({Level:"Study",ID:e})):[{Level:this.capitalizeFirstLetter(this.resourceLevel),ID:this.resourceOrthancId}]},computedResourceLevel(){return this.resourceLevel=="bulk"?"study":this.resourceLevel}},components:{Modal,ShareModal,ModifyModal,TokenLinkButton,BulkLabelsModal}},_hoisted_1$l={class:"btn-group"},_hoisted_2$k={key:0,class:"btn-group"},_hoisted_3$j={class:"btn-group"},_hoisted_4$h=["data-bs-target","disabled"],_hoisted_5$f=["title"],_hoisted_6$d={key:1,class:"btn-group"},_hoisted_7$a=["data-bs-target"],_hoisted_8$9=["title"],_hoisted_9$7={key:2,class:"btn-group"},_hoisted_10$7=["data-bs-target"],_hoisted_11$7=["title"],_hoisted_12$7={key:3,class:"btn-group"},_hoisted_13$7=["data-bs-target"],_hoisted_14$4=["title"],_hoisted_15$4={key:4,class:"btn-group"},_hoisted_16$4={class:"dropdown"},_hoisted_17$3={key:0,class:"dropdown btn btn-sm btn-secondary m-1 dropdown-toggle",type:"button",id:"apiDropdownMenuId","data-bs-toggle":"dropdown","aria-expanded":"false"},_hoisted_18$3=createBaseVNode("span",{"data-bs-toggle":"tooltip",title:"API"},[createBaseVNode("i",{class:"bi bi-code-slash"})],-1),_hoisted_19$3=[_hoisted_18$3],_hoisted_20$3={key:1,class:"dropdown-menu bg-dropdown","aria-labelledby":"apiDropdownMenuId"},_hoisted_21$3={key:0},_hoisted_22$3={key:5,class:"btn-group"},_hoisted_23$3=["disabled"],_hoisted_24$2=["title"],_hoisted_25$2={class:"btn-group"},_hoisted_26$2={class:"dropdown"},_hoisted_27$2=["disabled"],_hoisted_28$2=["title"],_hoisted_29$2=createBaseVNode("i",{class:"bi bi-send"},null,-1),_hoisted_30$2=[_hoisted_29$2],_hoisted_31$2={key:1,class:"dropdown-menu bg-dropdown","aria-labelledby":"sendToDropdownMenuId"},_hoisted_32$2={key:0,class:"dropdown-submenu"},_hoisted_33$2=createBaseVNode("i",{class:"bi bi-caret-down"},null,-1),_hoisted_34$2={class:"dropdown-menu bg-dropdown"},_hoisted_35$2=["onClick"],_hoisted_36$2={key:1,class:"dropdown-submenu"},_hoisted_37$2=createBaseVNode("i",{class:"bi bi-caret-down"},null,-1),_hoisted_38$2={class:"dropdown-menu bg-dropdown"},_hoisted_39$2=["onClick"],_hoisted_40$2={key:2,class:"dropdown-submenu"},_hoisted_41$1=createBaseVNode("i",{class:"bi bi-caret-down"},null,-1),_hoisted_42$1={class:"dropdown-menu bg-dropdown"},_hoisted_43$1=["onClick"],_hoisted_44$1={key:3,class:"dropdown-submenu"},_hoisted_45$1=createBaseVNode("i",{class:"bi bi-caret-down"},null,-1),_hoisted_46$1={class:"dropdown-menu bg-dropdown"},_hoisted_47$1=["onClick"];function _sfc_render$l(e,t,r,n,a,o){const l=resolveComponent("TokenLinkButton"),f=resolveComponent("Modal"),m=resolveComponent("ShareModal"),_=resolveComponent("ModifyModal"),b=resolveComponent("BulkLabelsModal");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$l,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.ViewersOrdering,k=>(openBlock(),createElementBlock("span",{key:k},[k=="meddream"&&o.hasMedDreamViewerButton?(openBlock(),createBlock(l,{key:0,disabled:!o.isMedDreamViewerButtonEnabled,iconClass:o.medDreamViewerIcon,level:o.computedResourceLevel,linkUrl:o.medDreamViewerUrl,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_meddream"),tokenType:"meddream-instant-link",opensInNewTab:!0},null,8,["disabled","iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),o.hasOsimisViewer&&k=="osimis-web-viewer"&&(this.resourceLevel=="study"||this.resourceLevel=="series")?(openBlock(),createBlock(l,{key:1,iconClass:o.osimisViewerIcon,level:this.resourceLevel,linkUrl:o.osimisViewerUrl,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_osimis"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),k=="stone-webviewer"&&o.hasStoneViewerButton?(openBlock(),createBlock(l,{key:2,disabled:!o.isStoneViewerButtonEnabled,iconClass:o.stoneViewerIcon,level:o.computedResourceLevel,linkUrl:o.stoneViewerUrl,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_stone"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["disabled","iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),k=="volview"&&o.hasVolViewButton?(openBlock(),createBlock(l,{key:3,disabled:!o.isVolViewButtonEnabled,iconClass:o.volViewIcon,level:o.computedResourceLevel,linkUrl:o.volViewUrl,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_volview"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["disabled","iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),k=="ohif"&&o.hasOhifViewerButton?(openBlock(),createBlock(l,{key:4,disabled:!o.isOhifButtonEnabled,iconClass:o.ohifViewerIcon,level:o.computedResourceLevel,linkUrl:o.ohifViewerUrl,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_ohif"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["disabled","iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),k=="ohif-vr"&&o.hasOhifViewerButtonVr?(openBlock(),createBlock(l,{key:5,disabled:!o.isOhifButtonVrEnabled,iconClass:o.ohifViewerIconVr,level:o.computedResourceLevel,linkUrl:o.ohifViewerUrlVr,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_ohif_vr"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["disabled","iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),k=="ohif-tmtv"&&o.hasOhifViewerButtonTmtv?(openBlock(),createBlock(l,{key:6,disabled:!o.isOhifButtonTmtvEnabled,iconClass:o.ohifViewerIconTmtv,level:o.computedResourceLevel,linkUrl:o.ohifViewerUrlTmtv,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_ohif_tmtv"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["disabled","iconClass","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0)]))),128)),this.resourceLevel=="instance"?(openBlock(),createBlock(l,{key:0,iconClass:"bi bi-binoculars",level:this.resourceLevel,linkUrl:o.instancePreviewUrl,resourcesOrthancId:[r.resourceOrthancId],title:e.$t("preview"),tokenType:"download-instant-link",opensInNewTab:!0},null,8,["level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),o.hasWsiButton?(openBlock(),createBlock(l,{key:1,hidden:!a.isWsiButtonEnabled,iconClass:"fa-solid fa-microscope fa-button",level:this.resourceLevel,linkUrl:o.wsiViewerUrl,resourcesOrthancId:o.resourcesOrthancId,title:e.$t("view_in_wsi_viewer"),tokenType:"viewer-instant-link",opensInNewTab:!0},null,8,["hidden","level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0)]),this.resourceLevel!="bulk"?(openBlock(),createElementBlock("div",_hoisted_2$k,[e.uiOptions.EnableDownloadZip&&this.resourceLevel!="instance"?(openBlock(),createBlock(l,{key:0,iconClass:"bi bi-download",level:this.resourceLevel,linkUrl:o.downloadZipUrl,resourcesOrthancId:[r.resourceOrthancId],title:e.$t("download_zip"),tokenType:"download-instant-link"},null,8,["level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),e.uiOptions.EnableDownloadDicomDir&&this.resourceLevel!="instance"?(openBlock(),createBlock(l,{key:1,iconClass:"bi bi-box-arrow-down",level:this.resourceLevel,linkUrl:o.downloadDicomDirUrl,resourcesOrthancId:[r.resourceOrthancId],title:e.$t("download_dicomdir"),tokenType:"download-instant-link"},null,8,["level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0),e.uiOptions.EnableDownloadDicomFile&&this.resourceLevel=="instance"?(openBlock(),createBlock(l,{key:2,iconClass:"bi bi-download",level:this.resourceLevel,linkUrl:o.instanceDownloadUrl,resourcesOrthancId:[r.resourceOrthancId],title:e.$t("download_dicom_file"),tokenType:"download-instant-link"},null,8,["level","linkUrl","resourcesOrthancId","title"])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$j,[e.uiOptions.EnableDeleteResources?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-sm btn-secondary m-1",type:"button","data-bs-toggle":"modal","data-bs-target":"#delete-modal-"+this.resourceOrthancId,disabled:!o.isDeleteEnabled},[createBaseVNode("i",{class:"bi bi-trash","data-bs-toggle":"tooltip",title:e.$t("delete")},null,8,_hoisted_5$f)],8,_hoisted_4$h)):createCommentVNode("",!0),e.uiOptions.EnableDeleteResources?(openBlock(),createBlock(f,{key:1,id:"delete-modal-"+this.resourceOrthancId,headerText:e.$t(this.deleteResourceTitle)+" "+this.resourceTitle,okText:e.$t("delete"),cancelText:e.$t("cancel"),bodyText:e.$t(this.deleteResourceBody),onOk:t[0]||(t[0]=k=>o.deleteResource(k))},null,8,["id","headerText","okText","cancelText","bodyText"])):createCommentVNode("",!0)]),this.resourceLevel!="bulk"?(openBlock(),createElementBlock("div",_hoisted_6$d,[e.uiOptions.EnableShares?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-sm btn-secondary m-1",type:"button","data-bs-toggle":"modal","data-bs-target":"#share-modal-"+this.resourceOrthancId},[createBaseVNode("i",{class:"bi bi-share","data-bs-toggle":"tooltip",title:e.$t("share.button_title")},null,8,_hoisted_8$9)],8,_hoisted_7$a)):createCommentVNode("",!0),e.uiOptions.EnableShares?(openBlock(),createBlock(m,{key:1,id:"share-modal-"+this.resourceOrthancId,orthancId:this.resourceOrthancId,studyMainDicomTags:this.studyMainDicomTags,patientMainDicomTags:this.patientMainDicomTags},null,8,["id","orthancId","studyMainDicomTags","patientMainDicomTags"])):createCommentVNode("",!0)])):createCommentVNode("",!0),this.resourceLevel!="bulk"?(openBlock(),createElementBlock("div",_hoisted_9$7,[o.isModificationEnabled?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-sm btn-secondary m-1",type:"button","data-bs-toggle":"modal","data-bs-target":"#modify-modal-"+this.resourceOrthancId},[createBaseVNode("i",{class:"bi bi-pencil","data-bs-toggle":"tooltip",title:e.$t("modify.modify_button_title")},null,8,_hoisted_11$7)],8,_hoisted_10$7)):createCommentVNode("",!0),o.isModificationEnabled?(openBlock(),createBlock(_,{key:1,id:"modify-modal-"+this.resourceOrthancId,orthancId:this.resourceOrthancId,resourceLevel:this.resourceLevel,seriesMainDicomTags:this.seriesMainDicomTags,studyMainDicomTags:this.studyMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,isAnonymization:!1},null,8,["id","orthancId","resourceLevel","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags"])):createCommentVNode("",!0)])):createCommentVNode("",!0),this.resourceLevel!="bulk"?(openBlock(),createElementBlock("div",_hoisted_12$7,[o.isAnonymizationEnabled?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-sm btn-secondary m-1",type:"button","data-bs-toggle":"modal","data-bs-target":"#anonymize-modal-"+this.resourceOrthancId},[createBaseVNode("i",{class:"bi bi-person-slash","data-bs-toggle":"tooltip",title:e.$t("modify.anonymize_button_title")},null,8,_hoisted_14$4)],8,_hoisted_13$7)):createCommentVNode("",!0),o.isAnonymizationEnabled?(openBlock(),createBlock(_,{key:1,id:"anonymize-modal-"+this.resourceOrthancId,orthancId:this.resourceOrthancId,resourceLevel:this.resourceLevel,seriesMainDicomTags:this.seriesMainDicomTags,studyMainDicomTags:this.studyMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,isAnonymization:!0},null,8,["id","orthancId","resourceLevel","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags"])):createCommentVNode("",!0)])):createCommentVNode("",!0),this.resourceLevel!="bulk"?(openBlock(),createElementBlock("div",_hoisted_15$4,[createBaseVNode("div",_hoisted_16$4,[e.uiOptions.EnableApiViewMenu?(openBlock(),createElementBlock("button",_hoisted_17$3,_hoisted_19$3)):createCommentVNode("",!0),e.uiOptions.EnableApiViewMenu?(openBlock(),createElementBlock("ul",_hoisted_20$3,[createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",href:"#",onClick:t[1]||(t[1]=(...k)=>o.copyIdToClipboard&&o.copyIdToClipboard(...k))},toDisplayString(e.$t("copy_orthanc_id")),1)]),createBaseVNode("li",null,[createVNode(l,{linkType:"dropdown-item",level:this.resourceLevel,linkUrl:o.getApiUrl(""),resourcesOrthancId:[r.resourceOrthancId],title:"/",tokenType:"download-instant-link",opensInNewTab:!0},null,8,["level","linkUrl","resourcesOrthancId"])]),this.resourceLevel=="instance"?(openBlock(),createElementBlock("li",_hoisted_21$3,[createVNode(l,{linkType:"dropdown-item",level:this.resourceLevel,linkUrl:o.getApiUrl("/tags?simplify"),resourcesOrthancId:[r.resourceOrthancId],title:"/tags?simplify",tokenType:"download-instant-link",opensInNewTab:!0},null,8,["level","linkUrl","resourcesOrthancId"])])):createCommentVNode("",!0),createBaseVNode("li",null,[createVNode(l,{linkType:"dropdown-item",level:this.resourceLevel,linkUrl:o.getApiUrl("/metadata?expand"),resourcesOrthancId:[r.resourceOrthancId],title:"/metadata?expand",tokenType:"download-instant-link",opensInNewTab:!0},null,8,["level","linkUrl","resourcesOrthancId"])]),createBaseVNode("li",null,[createVNode(l,{linkType:"dropdown-item",level:this.resourceLevel,linkUrl:o.getApiUrl("/statistics"),resourcesOrthancId:[r.resourceOrthancId],title:"/statistics",tokenType:"download-instant-link",opensInNewTab:!0},null,8,["level","linkUrl","resourcesOrthancId"])]),createBaseVNode("li",null,[createVNode(l,{linkType:"dropdown-item",level:this.resourceLevel,linkUrl:o.getApiUrl("/attachments?expand"),resourcesOrthancId:[r.resourceOrthancId],title:"/attachments?expand",tokenType:"download-instant-link",opensInNewTab:!0},null,8,["level","linkUrl","resourcesOrthancId"])])])):createCommentVNode("",!0)])])):createCommentVNode("",!0),this.resourceLevel=="bulk"?(openBlock(),createElementBlock("div",_hoisted_22$3,[o.hasLabelsButton?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-sm btn-secondary m-1",type:"button",disabled:!o.isLabelsEnabled,onClick:t[2]||(t[2]=k=>o.showBulkLabelModal())},[createBaseVNode("i",{class:"bi bi-tag","data-bs-toggle":"tooltip",title:e.$t("labels.edit_labels_button")},null,8,_hoisted_24$2)],8,_hoisted_23$3)):createCommentVNode("",!0),e.uiOptions.EnableEditLabels&&a.isBulkLabelModalVisible?(openBlock(),createBlock(b,{key:1,id:"labels2-modal2-"+this.componentId,ref:"bulk-label-modal",resourceLevel:this.resourceLevel,resourcesOrthancId:e.selectedStudiesIds,onBulkModalClosed:o.onBulkModalClosed},null,8,["id","resourceLevel","resourcesOrthancId","onBulkModalClosed"])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_25$2,[createBaseVNode("div",_hoisted_26$2,[o.hasSendTo?(openBlock(),createElementBlock("button",{key:0,class:"dropdown btn btn-sm btn-secondary m-1 dropdown-toggle",type:"button",id:"sendToDropdownMenuId","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:!o.isSendToEnabled},[createBaseVNode("span",{"data-bs-toggle":"tooltip",title:e.$t("send_to.button_title")},_hoisted_30$2,8,_hoisted_28$2)],8,_hoisted_27$2)):createCommentVNode("",!0),o.hasSendTo?(openBlock(),createElementBlock("ul",_hoisted_31$2,[o.hasSendToPeers?(openBlock(),createElementBlock("li",_hoisted_32$2,[createBaseVNode("a",{class:"dropdown-item",onClick:t[3]||(t[3]=(...k)=>o.toggleSubMenu&&o.toggleSubMenu(...k)),href:"#"},[createTextVNode(toDisplayString(e.$t("send_to.orthanc_peer"))+" ",1),_hoisted_33$2]),createBaseVNode("ul",_hoisted_34$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.orthancPeers,k=>(openBlock(),createElementBlock("li",{key:k},[createBaseVNode("a",{class:"dropdown-item",onClick:D=>o.sendToOrthancPeer(k)},toDisplayString(k),9,_hoisted_35$2)]))),128))])])):createCommentVNode("",!0),o.hasSendToPeersWithTransfer?(openBlock(),createElementBlock("li",_hoisted_36$2,[createBaseVNode("a",{class:"dropdown-item",onClick:t[4]||(t[4]=(...k)=>o.toggleSubMenu&&o.toggleSubMenu(...k)),href:"#"},[createTextVNode(toDisplayString(e.$t("send_to.transfers"))+" ",1),_hoisted_37$2]),createBaseVNode("ul",_hoisted_38$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.orthancPeers,k=>(openBlock(),createElementBlock("li",{key:k},[createBaseVNode("a",{class:"dropdown-item",onClick:D=>o.sendToOrthancPeerWithTransfers(k)},toDisplayString(k),9,_hoisted_39$2)]))),128))])])):createCommentVNode("",!0),o.hasSendToDicomWeb?(openBlock(),createElementBlock("li",_hoisted_40$2,[createBaseVNode("a",{class:"dropdown-item",onClick:t[5]||(t[5]=(...k)=>o.toggleSubMenu&&o.toggleSubMenu(...k)),href:"#"},[createTextVNode(toDisplayString(e.$t("send_to.dicom_web"))+" ",1),_hoisted_41$1]),createBaseVNode("ul",_hoisted_42$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.targetDicomWebServers,k=>(openBlock(),createElementBlock("li",{key:k},[createBaseVNode("a",{class:"dropdown-item",onClick:D=>o.sendToDicomWebServer(k)},toDisplayString(k),9,_hoisted_43$1)]))),128))])])):createCommentVNode("",!0),o.hasSendToDicomModalities?(openBlock(),createElementBlock("li",_hoisted_44$1,[createBaseVNode("a",{class:"dropdown-item",onClick:t[6]||(t[6]=(...k)=>o.toggleSubMenu&&o.toggleSubMenu(...k)),href:"#"},[createTextVNode(toDisplayString(e.$t("send_to.dicom"))+" ",1),_hoisted_45$1]),createBaseVNode("ul",_hoisted_46$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.targetDicomModalities,k=>(openBlock(),createElementBlock("li",{key:k},[createBaseVNode("a",{class:"dropdown-item",onClick:D=>o.sendToDicomModality(k)},toDisplayString(k),9,_hoisted_47$1)]))),128))])])):createCommentVNode("",!0)])):createCommentVNode("",!0)])])])}const ResourceButtonGroup=_export_sfc(_sfc_main$l,[["render",_sfc_render$l]]),TagsTree_vue_vue_type_style_index_0_scoped_cc26be0e_lang="",_sfc_main$k={props:["tags"],data(){return{}},mounted(){},computed:{},methods:{},components:{CopyToClipboardButton}},_hoisted_1$k={key:0},_hoisted_2$j={class:"details-label"},_hoisted_3$i={key:1,class:"d-flex w-100"},_hoisted_4$g={class:"details-label"},_hoisted_5$e={key:0,class:"details"};function _sfc_render$k(e,t,r,n,a,o){const l=resolveComponent("tags-tree",!0),f=resolveComponent("CopyToClipboardButton");return openBlock(),createElementBlock("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.tags,(m,_)=>(openBlock(),createElementBlock("li",{key:_},[m.Type=="Sequence"?(openBlock(),createElementBlock("span",_hoisted_1$k,[createBaseVNode("span",_hoisted_2$j,toDisplayString(_)+" - "+toDisplayString(m.Name)+": ",1),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.Value,(b,k)=>(openBlock(),createElementBlock("li",{key:b},[createTextVNode(" Item "+toDisplayString(k+1)+" ",1),createVNode(l,{tags:b},null,8,["tags"])]))),128))])])):(openBlock(),createElementBlock("span",_hoisted_3$i,[createBaseVNode("span",_hoisted_4$g,toDisplayString(_)+" - "+toDisplayString(m.Name)+": ",1),m.Type=="String"?(openBlock(),createElementBlock("span",_hoisted_5$e,toDisplayString(m.Value),1)):createCommentVNode("",!0),createVNode(f,{valueToCopy:m.Value},null,8,["valueToCopy"])]))]))),128))])}const TagsTree=_export_sfc(_sfc_main$k,[["render",_sfc_render$k],["__scopeId","data-v-cc26be0e"]]),InstanceDetails_vue_vue_type_style_index_0_scoped_360276cb_lang="",InstanceDetails_vue_vue_type_style_index_1_lang="",_sfc_main$j={props:["instanceId","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags"],emits:["deletedInstance"],data(){return{tags:{},headers:{},loaded:!1}},computed:{},async mounted(){this.tags=await api.getInstanceTags(this.instanceId),this.headers=await api.getInstanceHeader(this.instanceId),this.loaded=!0},components:{ResourceButtonGroup,TagsTree},methods:{onDeletedInstance(){this.$emit("deletedInstance",this.instanceId)}}},_hoisted_1$j={key:0,class:"table table-responsive table-sm instance-details-table"},_hoisted_2$i={width:"80%",class:"cut-text"},_hoisted_3$h={width:"20%",class:"instance-button-group"};function _sfc_render$j(e,t,r,n,a,o){const l=resolveComponent("TagsTree"),f=resolveComponent("ResourceButtonGroup");return a.loaded?(openBlock(),createElementBlock("table",_hoisted_1$j,[createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_2$i,[createVNode(l,{tags:a.tags},null,8,["tags"])]),createBaseVNode("td",_hoisted_3$h,[createVNode(f,{resourceOrthancId:this.instanceId,resourceLevel:"instance",studyMainDicomTags:this.studyMainDicomTags,seriesMainDicomTags:this.seriesMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,instanceTags:this.tags,onDeletedResource:o.onDeletedInstance},null,8,["resourceOrthancId","studyMainDicomTags","seriesMainDicomTags","patientMainDicomTags","instanceTags","onDeletedResource"])])])])):createCommentVNode("",!0)}const InstanceDetails=_export_sfc(_sfc_main$j,[["render",_sfc_render$j],["__scopeId","data-v-360276cb"]]),InstanceItem_vue_vue_type_style_index_0_scoped_e57bc471_lang="",_sfc_main$i={props:["instanceId","instanceInfo","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags"],emits:["deletedInstance"],data(){return{loaded:!1,expanded:!1,collapseElement:null}},mounted(){this.$refs["instance-collapsible-details"].addEventListener("show.bs.collapse",t=>{t.target==t.currentTarget&&(this.expanded=!0)}),this.$refs["instance-collapsible-details"].addEventListener("hide.bs.collapse",t=>{t.target==t.currentTarget&&(this.expanded=!1)});var e=this.$refs["instance-collapsible-details"];this.collapseElement=new bootstrap.Collapse(e,{toggle:!1});for(const[t,r]of Object.entries(this.$route.query))t==="expand"&&r==="instance"&&this.collapseElement.show()},methods:{onDeletedInstance(e){this.$emit("deletedInstance",e)}},computed:{},components:{InstanceDetails}},_withScopeId$8=e=>(pushScopeId("data-v-e57bc471"),e=e(),popScopeId(),e),_hoisted_1$i=_withScopeId$8(()=>createBaseVNode("td",null,null,-1)),_hoisted_2$h=["data-bs-target"],_hoisted_3$g=["data-bs-target"],_hoisted_4$f=["data-bs-target"],_hoisted_5$d=["id"],_hoisted_6$c={colspan:"100"};function _sfc_render$i(e,t,r,n,a,o){const l=resolveComponent("InstanceDetails");return openBlock(),createElementBlock("tbody",null,[createBaseVNode("tr",{class:normalizeClass({"instance-row-collapsed":!a.expanded,"instance-row-expanded":a.expanded})},[_hoisted_1$i,createBaseVNode("td",{class:"cut-text text-center","data-bs-toggle":"collapse","data-bs-target":"#instance-details-"+this.instanceId},toDisplayString(r.instanceInfo.MainDicomTags.InstanceNumber),9,_hoisted_2$h),createBaseVNode("td",{class:"cut-text","data-bs-toggle":"collapse","data-bs-target":"#instance-details-"+this.instanceId},toDisplayString(r.instanceInfo.MainDicomTags.SOPInstanceUID),9,_hoisted_3$g),createBaseVNode("td",{class:"cut-text text-center","data-bs-toggle":"collapse","data-bs-target":"#instance-details-"+this.instanceId},toDisplayString(r.instanceInfo.MainDicomTags.NumberOfFrames),9,_hoisted_4$f)],2),createBaseVNode("tr",{class:normalizeClass(["collapse",{"instance-details-collapsed":!a.expanded,"instance-details-expanded":a.expanded}]),id:"instance-details-"+this.instanceId,ref:"instance-collapsible-details"},[createBaseVNode("td",_hoisted_6$c,[this.expanded?(openBlock(),createBlock(l,{key:0,instanceId:this.instanceId,studyMainDicomTags:this.studyMainDicomTags,seriesMainDicomTags:this.seriesMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,onDeletedInstance:o.onDeletedInstance},null,8,["instanceId","studyMainDicomTags","seriesMainDicomTags","patientMainDicomTags","onDeletedInstance"])):createCommentVNode("",!0)])],10,_hoisted_5$d)])}const InstanceItem=_export_sfc(_sfc_main$i,[["render",_sfc_render$i],["__scopeId","data-v-e57bc471"]]),InstanceList_vue_vue_type_style_index_0_lang="",_sfc_main$h={props:["seriesId","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags"],emits:["deletedInstance"],data(){return{loaded:!1,instancesInfo:{}}},computed:{sortedInstancesIds(){if(this.loaded){let e=Object.keys(this.instancesInfo);return e.sort((t,r)=>parseInt(this.instancesInfo[t].IndexInSeries)>parseInt(this.instancesInfo[r].IndexInSeries)?1:-1),e}else return[]}},async mounted(){const e=await api.getSeriesInstances(this.seriesId);for(const t of e)this.instancesInfo[t.ID]=t;this.loaded=!0},methods:{onDeletedInstance(e){delete this.instancesInfo[e],this.$emit("deletedInstance",e)}},components:{InstanceItem}},_hoisted_1$h={class:"table table-responsive table-sm instance-table"},_hoisted_2$g=createBaseVNode("th",{width:"2%",scope:"col",class:"instance-table-header"},null,-1),_hoisted_3$f=["title"],_hoisted_4$e=createBaseVNode("th",{width:"40%",scope:"col",class:"instance-table-header cut-text","data-bs-toggle":"tooltip",title:"SOP Instance UID"},"SOP Instance UID",-1),_hoisted_5$c=["title"];function _sfc_render$h(e,t,r,n,a,o){const l=resolveComponent("InstanceItem");return openBlock(),createElementBlock("table",_hoisted_1$h,[createBaseVNode("thead",null,[_hoisted_2$g,createBaseVNode("th",{width:"7%",scope:"col",class:"instance-table-header cut-text","data-bs-toggle":"tooltip",title:e.$t("dicom_tags.InstanceNumber")},toDisplayString(e.$t("dicom_tags.InstanceNumber")),9,_hoisted_3$f),_hoisted_4$e,createBaseVNode("th",{width:"5%",scope:"col",class:"series-table-header cut-text text-center","data-bs-toggle":"tooltip",title:e.$t("dicom_tags.NumberOfFrames")},"# "+toDisplayString(e.$t("frames")),9,_hoisted_5$c)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.sortedInstancesIds,f=>(openBlock(),createBlock(l,{key:f,instanceId:f,instanceInfo:a.instancesInfo[f],studyMainDicomTags:this.studyMainDicomTags,seriesMainDicomTags:this.seriesMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,onDeletedInstance:o.onDeletedInstance},null,8,["instanceId","instanceInfo","studyMainDicomTags","seriesMainDicomTags","patientMainDicomTags","onDeletedInstance"]))),128))])}const InstanceList=_export_sfc(_sfc_main$h,[["render",_sfc_render$h]]),ResourceDetailText_vue_vue_type_style_index_0_lang="",_sfc_main$g={props:["truncate","copy","tags","tag","showIfEmpty"],setup(){return{}},data(){return{}},mounted(){},methods:{},computed:{title(){return translateDicomTag(this.$i18n.t,this.$i18n.te,this.tag)},value(){return this.hasValue?this.tags[this.tag]:""},hasValue(){return this.tag in this.tags},showValue(){return this.showIfEmpty||this.hasValue}},components:{CopyToClipboardButton}},_hoisted_1$g={key:0,class:"d-flex"},_hoisted_2$f=["title"],_hoisted_3$e=["title"];function _sfc_render$g(e,t,r,n,a,o){const l=resolveComponent("CopyToClipboardButton");return o.showValue?(openBlock(),createElementBlock("li",_hoisted_1$g,[createBaseVNode("span",{class:normalizeClass(["details-label",{"d-inline-block text-truncate":this.truncate}]),"data-bs-toggle":"tooltip",title:o.title},toDisplayString(o.title)+": ",11,_hoisted_2$f),createBaseVNode("span",{class:"details","data-bs-toggle":"tooltip",title:o.value},toDisplayString(o.value),9,_hoisted_3$e),!this.copy&&o.value&&o.value.length>0?(openBlock(),createBlock(l,{key:0,valueToCopy:o.value},null,8,["valueToCopy"])):createCommentVNode("",!0)])):createCommentVNode("",!0)}const ResourceDetailText=_export_sfc(_sfc_main$g,[["render",_sfc_render$g]]),SeriesDetails_vue_vue_type_style_index_0_scoped_42f602ea_lang="",SeriesDetails_vue_vue_type_style_index_1_lang="",_sfc_main$f={props:["seriesId","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags","instancesIds"],emits:["deletedSeries"],setup(){},data(){return{}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions})},components:{ResourceButtonGroup,InstanceList,ResourceDetailText},methods:{onDeletedInstance(e){const t=this.instancesIds.indexOf(e);t>=0&&(this.instancesIds.splice(t,1),this.instancesIds.length==0&&this.$emit("deletedSeries",this.seriesId))},onDeletedSeries(){this.$emit("deletedSeries",this.seriesId)}}},_hoisted_1$f={class:"table table-responsive table-sm series-details-table"},_hoisted_2$e={width:"70%",class:"cut-text"},_hoisted_3$d={width:"30%",class:"series-button-group"},_hoisted_4$d={colspan:"100"};function _sfc_render$f(e,t,r,n,a,o){const l=resolveComponent("ResourceDetailText"),f=resolveComponent("ResourceButtonGroup"),m=resolveComponent("InstanceList");return openBlock(),createElementBlock("table",_hoisted_1$f,[createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_2$e,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.SeriesMainTags,_=>(openBlock(),createBlock(l,{key:_,tags:r.seriesMainDicomTags,tag:_,showIfEmpty:!0},null,8,["tags","tag"]))),128))])]),createBaseVNode("td",_hoisted_3$d,[createVNode(f,{resourceOrthancId:this.seriesId,resourceLevel:"series",resourceDicomUid:this.seriesMainDicomTags.SeriesInstanceUID,studyMainDicomTags:this.studyMainDicomTags,seriesMainDicomTags:this.seriesMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,customClass:"instance-button-group",onDeletedResource:o.onDeletedSeries},null,8,["resourceOrthancId","resourceDicomUid","studyMainDicomTags","seriesMainDicomTags","patientMainDicomTags","onDeletedResource"])])]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_4$d,[createVNode(m,{seriesId:this.seriesId,seriesMainDicomTags:this.seriesMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,studyMainDicomTags:this.studyMainDicomTags,instancesIds:this.instancesIds,onDeletedInstance:o.onDeletedInstance},null,8,["seriesId","seriesMainDicomTags","patientMainDicomTags","studyMainDicomTags","instancesIds","onDeletedInstance"])])])])}const SeriesDetails=_export_sfc(_sfc_main$f,[["render",_sfc_render$f],["__scopeId","data-v-42f602ea"]]),SeriesItem_vue_vue_type_style_index_0_scoped_eff6518f_lang="",_sfc_main$e={props:["seriesId","seriesInfo","studyMainDicomTags","patientMainDicomTags"],emits:["deletedSeries"],data(){return{loaded:!1,expanded:!1,collapseElement:null}},mounted(){this.$refs["series-collapsible-details"].addEventListener("show.bs.collapse",t=>{t.target==t.currentTarget&&(this.expanded=!0)}),this.$refs["series-collapsible-details"].addEventListener("hide.bs.collapse",t=>{t.target==t.currentTarget&&(this.expanded=!1)});var e=this.$refs["series-collapsible-details"];this.collapseElement=new bootstrap.Collapse(e,{toggle:!1});for(const[t,r]of Object.entries(this.$route.query))t==="expand"&&(r==="series"||r==="instance")&&this.collapseElement.show()},methods:{onDeletedSeries(){this.$emit("deletedSeries",this.seriesId)}},computed:{},components:{SeriesDetails}},_withScopeId$7=e=>(pushScopeId("data-v-eff6518f"),e=e(),popScopeId(),e),_hoisted_1$e=_withScopeId$7(()=>createBaseVNode("td",null,null,-1)),_hoisted_2$d=["data-bs-target"],_hoisted_3$c=["data-bs-target"],_hoisted_4$c=["title"],_hoisted_5$b=["data-bs-target"],_hoisted_6$b=["data-bs-target"],_hoisted_7$9=["id"],_hoisted_8$8={colspan:"100"};function _sfc_render$e(e,t,r,n,a,o){const l=resolveComponent("SeriesDetails");return openBlock(),createElementBlock("tbody",null,[createBaseVNode("tr",{class:normalizeClass({"series-row-collapsed":!a.expanded,"series-row-expanded":a.expanded})},[_hoisted_1$e,createBaseVNode("td",{class:"cut-text text-center","data-bs-toggle":"collapse","data-bs-target":"#series-details-"+this.seriesId},toDisplayString(r.seriesInfo.MainDicomTags.SeriesNumber),9,_hoisted_2$d),createBaseVNode("td",{class:"cut-text","data-bs-toggle":"collapse","data-bs-target":"#series-details-"+this.seriesId},[createBaseVNode("span",{"data-bs-toggle":"tooltip",title:r.seriesInfo.MainDicomTags.SeriesDescription},toDisplayString(r.seriesInfo.MainDicomTags.SeriesDescription),9,_hoisted_4$c)],8,_hoisted_3$c),createBaseVNode("td",{class:"cut-text text-center","data-bs-toggle":"collapse","data-bs-target":"#series-details-"+this.seriesId},toDisplayString(r.seriesInfo.MainDicomTags.Modality),9,_hoisted_5$b),createBaseVNode("td",{class:"cut-text text-center","data-bs-toggle":"collapse","data-bs-target":"#series-details-"+this.seriesId},toDisplayString(r.seriesInfo.Instances.length),9,_hoisted_6$b)],2),createBaseVNode("tr",{class:normalizeClass(["collapse",{"series-details-collapsed":!a.expanded,"series-details-expanded":a.expanded}]),id:"series-details-"+this.seriesId,ref:"series-collapsible-details"},[createBaseVNode("td",_hoisted_8$8,[this.expanded?(openBlock(),createBlock(l,{key:0,seriesId:this.seriesId,instancesIds:this.seriesInfo.Instances,seriesMainDicomTags:this.seriesInfo.MainDicomTags,studyMainDicomTags:this.studyMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,onDeletedSeries:o.onDeletedSeries},null,8,["seriesId","instancesIds","seriesMainDicomTags","studyMainDicomTags","patientMainDicomTags","onDeletedSeries"])):createCommentVNode("",!0)])],10,_hoisted_7$9)])}const SeriesItem=_export_sfc(_sfc_main$e,[["render",_sfc_render$e],["__scopeId","data-v-eff6518f"]]),SeriesList_vue_vue_type_style_index_0_lang="",_sfc_main$d={props:["studyId","patientMainDicomTags","studyMainDicomTags"],emits:["deletedStudy"],data(){return{seriesInfo:{}}},computed:{sortedSeriesIds(){let e=Object.keys(this.seriesInfo);return e.sort((t,r)=>parseInt(this.seriesInfo[t].MainDicomTags.SeriesNumber)>parseInt(this.seriesInfo[r].MainDicomTags.SeriesNumber)?1:-1),e}},methods:{columnTitle(e){return e=="instances_number"?"# "+this.$i18n.t("instances"):translateDicomTag(this.$i18n.t,this.$i18n.te,e)},columnTooltip(e){return e=="instances_number"?this.$i18n.t("instances_number"):translateDicomTag(this.$i18n.t,this.$i18n.te,e)},onDeletedSeries(e){delete this.seriesInfo[e],Object.keys(this.seriesInfo).length==0&&this.$emit("deletedStudy",this.studyId)}},async mounted(){const e=await api.getStudySeries(this.studyId);for(const t of e)this.seriesInfo[t.ID]=t},components:{SeriesItem}},_hoisted_1$d={class:"table table-responsive table-sm series-table"},_hoisted_2$c=createBaseVNode("th",{width:"2%",scope:"col",class:"series-table-header"},null,-1),_hoisted_3$b=["title"],_hoisted_4$b=["title"],_hoisted_5$a=["title"],_hoisted_6$a=["title"];function _sfc_render$d(e,t,r,n,a,o){const l=resolveComponent("SeriesItem");return openBlock(),createElementBlock("table",_hoisted_1$d,[createBaseVNode("thead",null,[_hoisted_2$c,createBaseVNode("th",{width:"7%",scope:"col",class:"series-table-header cut-text","data-bs-toggle":"tooltip",title:o.columnTooltip("SeriesNumber")},toDisplayString(o.columnTitle("SeriesNumber")),9,_hoisted_3$b),createBaseVNode("th",{width:"40%",scope:"col",class:"series-table-header cut-text","data-bs-toggle":"tooltip",title:o.columnTooltip("SeriesDescription")},toDisplayString(o.columnTitle("SeriesDescription")),9,_hoisted_4$b),createBaseVNode("th",{width:"11%",scope:"col",class:"series-table-header cut-text text-center","data-bs-toggle":"tooltip",title:o.columnTooltip("Modality")},toDisplayString(o.columnTitle("Modality")),9,_hoisted_5$a),createBaseVNode("th",{width:"5%",scope:"col",class:"series-table-header cut-text text-center","data-bs-toggle":"tooltip",title:o.columnTooltip("instances_number")},toDisplayString(o.columnTitle("instances_number")),9,_hoisted_6$a)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.sortedSeriesIds,f=>(openBlock(),createBlock(l,{key:f,seriesId:f,seriesInfo:a.seriesInfo[f],studyMainDicomTags:this.studyMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,onDeletedSeries:o.onDeletedSeries},null,8,["seriesId","seriesInfo","studyMainDicomTags","patientMainDicomTags","onDeletedSeries"]))),128))])}const SeriesList=_export_sfc(_sfc_main$d,[["render",_sfc_render$d]]),StudyDetails_vue_vue_type_style_index_0_scoped_382ad566_lang="",StudyDetails_vue_vue_type_style_index_1_lang="",_sfc_main$c={props:["studyId","studyMainDicomTags","patientMainDicomTags","labels"],emits:["deletedStudy","studyLabelsUpdated"],setup(){},data(){return{samePatientStudiesCount:0,hasLoadedSamePatientsStudiesCount:!1,labelsModel:[],allLabelsLocalCopy:new Set}},async created(){this.labelsModel=this.labels,this.allLabelsLocalCopy=await api.loadAllLabels()},async mounted(){this.samePatientStudiesCount=(await api.getSamePatientStudies(this.patientMainDicomTags.PatientID)).length,this.hasLoadedSamePatientsStudiesCount=!0,Tags.init()},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions}),selectedValues(){return this.labelsModel.join(",")}},components:{SeriesItem,SeriesList,ResourceButtonGroup,ResourceDetailText},methods:{onDeletedStudy(){this.$emit("deletedStudy",this.studyId)},hasLabel(e){return this.labelsModel.includes(e)}},watch:{labelsModel:{async handler(e,t){await api.updateLabels({studyId:this.studyId,labels:this.labelsModel})&&(this.$emit("studyLabelsUpdated",this.studyId),setTimeout(()=>{this.$store.dispatch("labels/refresh")},100))},deep:!0}}},_hoisted_1$c={class:"table table-responsive table-sm study-details-table"},_hoisted_2$b={key:0},_hoisted_3$a={colspan:"100%"},_hoisted_4$a=["placeholder"],_hoisted_5$9=["value","selected"],_hoisted_6$9={key:1},_hoisted_7$8={colspan:"100%"},_hoisted_8$7={width:"40%",class:"cut-text"},_hoisted_9$6={width:"40%",class:"cut-text"},_hoisted_10$6={key:0},_hoisted_11$6={key:1},_hoisted_12$6={width:"20%",class:"study-button-group"},_hoisted_13$6={colspan:"100"};function _sfc_render$c(e,t,r,n,a,o){const l=resolveComponent("ResourceDetailText"),f=resolveComponent("router-link"),m=resolveComponent("ResourceButtonGroup"),_=resolveComponent("SeriesList");return openBlock(),createElementBlock("table",_hoisted_1$c,[e.uiOptions.EnableEditLabels?(openBlock(),createElementBlock("tr",_hoisted_2$b,[createBaseVNode("td",_hoisted_3$a,[createTextVNode(toDisplayString(e.$t("labels.study_details_title"))+" ",1),withDirectives(createBaseVNode("select",{class:"form-select",id:"labelsEdit",name:"tags[]","onUpdate:modelValue":t[0]||(t[0]=b=>a.labelsModel=b),multiple:"","data-allow-clear":"true","data-show-all-suggestions":"true","data-allow-new":"true","data-badge-style":"info",placeholder:e.$t("labels.add_labels_placeholder")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.allLabelsLocalCopy,b=>(openBlock(),createElementBlock("option",{key:b,value:b,selected:o.hasLabel(b)},toDisplayString(b),9,_hoisted_5$9))),128))],8,_hoisted_4$a),[[vModelSelect,a.labelsModel]])])])):createCommentVNode("",!0),e.uiOptions.EnableEditLabels?createCommentVNode("",!0):(openBlock(),createElementBlock("tr",_hoisted_6$9,[createBaseVNode("td",_hoisted_7$8,[createTextVNode(toDisplayString(e.$t("labels.study_details_title"))+" ",1),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.labelsModel,b=>(openBlock(),createElementBlock("span",{key:b,class:"label badge bg-info"},toDisplayString(b),1))),128))])])),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_8$7,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyMainTags,b=>(openBlock(),createBlock(l,{key:b,tags:r.studyMainDicomTags,tag:b,showIfEmpty:!0},null,8,["tags","tag"]))),128))])]),createBaseVNode("td",_hoisted_9$6,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.PatientMainTags,b=>(openBlock(),createBlock(l,{key:b,tags:r.patientMainDicomTags,tag:b,showIfEmpty:!0},null,8,["tags","tag"]))),128))]),a.hasLoadedSamePatientsStudiesCount&&a.samePatientStudiesCount>1?(openBlock(),createElementBlock("p",_hoisted_10$6,[createTextVNode(toDisplayString(e.$t("this_patient_has_other_studies",{count:a.samePatientStudiesCount}))+". ",1),createVNode(f,{to:'/filtered-studies?PatientID="'+r.patientMainDicomTags.PatientID+'"'},{default:withCtx(()=>[createTextVNode(toDisplayString(e.$t("this_patient_has_other_studies_show")),1)]),_:1},8,["to"])])):createCommentVNode("",!0),a.hasLoadedSamePatientsStudiesCount&&a.samePatientStudiesCount==1?(openBlock(),createElementBlock("p",_hoisted_11$6,toDisplayString(e.$t("this_patient_has_no_other_studies")),1)):createCommentVNode("",!0)]),createBaseVNode("td",_hoisted_12$6,[createVNode(m,{resourceOrthancId:this.studyId,resourceLevel:"study",patientMainDicomTags:this.patientMainDicomTags,studyMainDicomTags:this.studyMainDicomTags,resourceDicomUid:this.studyMainDicomTags.StudyInstanceUID,onDeletedResource:o.onDeletedStudy},null,8,["resourceOrthancId","patientMainDicomTags","studyMainDicomTags","resourceDicomUid","onDeletedResource"])])]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_13$6,[createVNode(_,{studyId:this.studyId,studyMainDicomTags:this.studyMainDicomTags,patientMainDicomTags:this.patientMainDicomTags,onDeletedStudy:o.onDeletedStudy},null,8,["studyId","studyMainDicomTags","patientMainDicomTags","onDeletedStudy"])])])])}const StudyDetails=_export_sfc(_sfc_main$c,[["render",_sfc_render$c],["__scopeId","data-v-382ad566"]]),StudyItem_vue_vue_type_style_index_0_scoped_29032bc9_lang="",_sfc_main$b={props:["studyId"],emits:["deletedStudy"],data(){return{fields:{},loaded:!1,expanded:!1,collapseElement:null,selected:!1}},created(){this.messageBus.on("selected-all",this.onSelectedStudy),this.messageBus.on("unselected-all",this.onUnselectedStudy)},async mounted(){const e=this.studies.filter(r=>r.ID==this.studyId)[0];this.fields=e,this.loaded=!0,this.seriesIds=e.Series,this.selected=this.selectedStudiesIds.indexOf(this.studyId)!=-1,this.$refs["study-collapsible-details"]||console.log("no refs: ",studyResponse),this.$refs["study-collapsible-details"].addEventListener("show.bs.collapse",r=>{r.target==r.currentTarget&&(this.expanded=!0)}),this.$refs["study-collapsible-details"].addEventListener("hide.bs.collapse",r=>{r.target==r.currentTarget&&(this.expanded=!1)});var t=this.$refs["study-collapsible-details"];this.collapseElement=new bootstrap.Collapse(t,{toggle:!1});for(const[r,n]of Object.entries(this.$route.query))r==="expand"&&(n==null||n==="study"||n==="series"||n==="instance")&&this.collapseElement.show()},watch:{},methods:{onDeletedStudy(e){this.$emit("deletedStudy",this.studyId)},async onLabelsUpdated(e){await this.$store.dispatch("studies/reloadStudy",{studyId:e,study:await api.getStudy(e)});const t=this.studies.filter(r=>r.ID==this.studyId)[0];this.fields=t},onSelectedStudy(){this.selected=!0},onUnselectedStudy(){this.selected=!1},async clickedSelect(){await this.$store.dispatch("studies/selectStudy",{studyId:this.studyId,isSelected:!this.selected})}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,studies:e=>e.studies.studies,selectedStudiesIds:e=>e.studies.selectedStudiesIds,allLabels:e=>e.labels.allLabels}),modalitiesInStudyForDisplay(){return this.fields.RequestedTags.ModalitiesInStudy.split("\\").join(",")},showLabels(){return!this.expanded&&this.allLabels&&this.allLabels.length>0},hasLabels(){return this.fields&&this.fields.Labels&&this.fields.Labels.length>0}},components:{SeriesList,StudyDetails}},_withScopeId$6=e=>(pushScopeId("data-v-29032bc9"),e=e(),popScopeId(),e),_hoisted_1$b={class:"form-check"},_hoisted_2$a=["data-bs-target"],_hoisted_3$9=["title"],_hoisted_4$9=["title"],_hoisted_5$8=["title"],_hoisted_6$8=["title"],_hoisted_7$7=["title"],_hoisted_8$6=["title"],_hoisted_9$5=["title"],_hoisted_10$5={key:7},_hoisted_11$5={key:8},_hoisted_12$5=_withScopeId$6(()=>createBaseVNode("td",null,null,-1)),_hoisted_13$5={colspan:"100%",class:"label-row"},_hoisted_14$3={key:0},_hoisted_15$3=["id"],_hoisted_16$3={key:0,colspan:"100"};function _sfc_render$b(e,t,r,n,a,o){const l=resolveComponent("StudyDetails");return openBlock(),createElementBlock("tbody",null,[a.loaded?(openBlock(),createElementBlock("tr",{key:0,class:normalizeClass({"study-row-collapsed":!a.expanded,"study-row-expanded":a.expanded,"study-row-show-labels":o.showLabels})},[createBaseVNode("td",null,[createBaseVNode("div",_hoisted_1$b,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=f=>a.selected=f),onClick:t[1]||(t[1]=(...f)=>o.clickedSelect&&o.clickedSelect(...f))},null,512),[[vModelCheckbox,a.selected]])])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyListColumns,f=>(openBlock(),createElementBlock("td",{key:f,class:normalizeClass(["cut-text",{"text-center":f in["modalities","seriesCount"]}]),"data-bs-toggle":"collapse","data-bs-target":"#study-details-"+this.studyId},[f=="StudyDate"?(openBlock(),createElementBlock("span",{key:0,"data-bs-toggle":"tooltip",title:a.fields.MainDicomTags.StudyDate},toDisplayString(a.fields.MainDicomTags.StudyDate),9,_hoisted_3$9)):f=="AccessionNumber"?(openBlock(),createElementBlock("span",{key:1,"data-bs-toggle":"tooltip",title:a.fields.MainDicomTags.AccessionNumber},toDisplayString(a.fields.MainDicomTags.AccessionNumber),9,_hoisted_4$9)):f=="PatientID"?(openBlock(),createElementBlock("span",{key:2,"data-bs-toggle":"tooltip",title:a.fields.PatientMainDicomTags.PatientID},toDisplayString(a.fields.PatientMainDicomTags.PatientID),9,_hoisted_5$8)):f=="PatientName"?(openBlock(),createElementBlock("span",{key:3,"data-bs-toggle":"tooltip",title:a.fields.PatientMainDicomTags.PatientName},toDisplayString(a.fields.PatientMainDicomTags.PatientName),9,_hoisted_6$8)):f=="PatientBirthDate"?(openBlock(),createElementBlock("span",{key:4,"data-bs-toggle":"tooltip",title:a.fields.PatientMainDicomTags.PatientBirthDate},toDisplayString(a.fields.PatientMainDicomTags.PatientBirthDate),9,_hoisted_7$7)):f=="StudyDescription"?(openBlock(),createElementBlock("span",{key:5,"data-bs-toggle":"tooltip",title:a.fields.MainDicomTags.StudyDescription},toDisplayString(a.fields.MainDicomTags.StudyDescription),9,_hoisted_8$6)):f=="modalities"?(openBlock(),createElementBlock("span",{key:6,"data-bs-toggle":"tooltip",title:o.modalitiesInStudyForDisplay},toDisplayString(o.modalitiesInStudyForDisplay),9,_hoisted_9$5)):f=="seriesCount"?(openBlock(),createElementBlock("span",_hoisted_10$5,toDisplayString(a.fields.Series.length),1)):(openBlock(),createElementBlock("span",_hoisted_11$5,toDisplayString(a.fields.MainDicomTags[f]),1))],10,_hoisted_2$a))),128))],2)):createCommentVNode("",!0),withDirectives(createBaseVNode("tr",null,[_hoisted_12$5,createBaseVNode("td",_hoisted_13$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.fields.Labels,f=>(openBlock(),createElementBlock("span",{key:f,class:"label badge bg-info"},toDisplayString(f),1))),128)),o.hasLabels?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_14$3," "))])],512),[[vShow,o.showLabels]]),withDirectives(createBaseVNode("tr",{class:normalizeClass(["collapse",{"study-details-collapsed":!a.expanded,"study-details-expanded":a.expanded}]),id:"study-details-"+this.studyId,ref:"study-collapsible-details"},[a.loaded&&a.expanded?(openBlock(),createElementBlock("td",_hoisted_16$3,[createVNode(l,{studyId:this.studyId,studyMainDicomTags:this.fields.MainDicomTags,patientMainDicomTags:this.fields.PatientMainDicomTags,labels:this.fields.Labels,onDeletedStudy:o.onDeletedStudy,onStudyLabelsUpdated:o.onLabelsUpdated},null,8,["studyId","studyMainDicomTags","patientMainDicomTags","labels","onDeletedStudy","onStudyLabelsUpdated"])])):createCommentVNode("",!0)],10,_hoisted_15$3),[[vShow,a.loaded]])])}const StudyItem=_export_sfc(_sfc_main$b,[["render",_sfc_render$b],["__scopeId","data-v-29032bc9"]]);function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}function toInteger(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function requiredArgs(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function toDate(e){requiredArgs(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||_typeof(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function addDays(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function addMonths(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),o=new Date(r.getTime());o.setMonth(r.getMonth()+n+1,0);var l=o.getDate();return a>=l?o:(r.setFullYear(o.getFullYear(),o.getMonth(),a),r)}function add(e,t){if(requiredArgs(2,arguments),!t||_typeof(t)!=="object")return new Date(NaN);var r=t.years?toInteger(t.years):0,n=t.months?toInteger(t.months):0,a=t.weeks?toInteger(t.weeks):0,o=t.days?toInteger(t.days):0,l=t.hours?toInteger(t.hours):0,f=t.minutes?toInteger(t.minutes):0,m=t.seconds?toInteger(t.seconds):0,_=toDate(e),b=n||r?addMonths(_,n+r*12):_,k=o||a?addDays(b,o+a*7):b,D=f+l*60,x=m+D*60,A=x*1e3,H=new Date(k.getTime()+A);return H}function addMilliseconds(e,t){requiredArgs(2,arguments);var r=toDate(e).getTime(),n=toInteger(t);return new Date(r+n)}var defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=getDefaultOptions(),k=toInteger((r=(n=(a=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&a!==void 0?a:b.weekStartsOn)!==null&&n!==void 0?n:(m=b.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&r!==void 0?r:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=toDate(e),x=D.getDay(),A=(x<k?7:0)+x-k;return D.setDate(D.getDate()-A),D.setHours(0,0,0,0),D}function startOfISOWeek(e){return requiredArgs(1,arguments),startOfWeek(e,{weekStartsOn:1})}function getISOWeekYear(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var a=startOfISOWeek(n),o=new Date(0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);var l=startOfISOWeek(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function startOfISOWeekYear(e){requiredArgs(1,arguments);var t=getISOWeekYear(e),r=new Date(0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);var n=startOfISOWeek(r);return n}function getTimezoneOffsetInMilliseconds(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function startOfDay(e){requiredArgs(1,arguments);var t=toDate(e);return t.setHours(0,0,0,0),t}var MILLISECONDS_IN_DAY$1=864e5;function differenceInCalendarDays(e,t){requiredArgs(2,arguments);var r=startOfDay(e),n=startOfDay(t),a=r.getTime()-getTimezoneOffsetInMilliseconds(r),o=n.getTime()-getTimezoneOffsetInMilliseconds(n);return Math.round((a-o)/MILLISECONDS_IN_DAY$1)}function addYears(e,t){requiredArgs(2,arguments);var r=toInteger(t);return addMonths(e,r*12)}var millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3;function isDate(e){return requiredArgs(1,arguments),e instanceof Date||_typeof(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function isValid(e){if(requiredArgs(1,arguments),!isDate(e)&&typeof e!="number")return!1;var t=toDate(e);return!isNaN(Number(t))}function endOfMonth(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function eachDayOfInterval(e,t){var r;requiredArgs(1,arguments);var n=e||{},a=toDate(n.start),o=toDate(n.end),l=o.getTime();if(!(a.getTime()<=l))throw new RangeError("Invalid interval");var f=[],m=a;m.setHours(0,0,0,0);var _=Number((r=t==null?void 0:t.step)!==null&&r!==void 0?r:1);if(_<1||isNaN(_))throw new RangeError("`options.step` must be a number greater than 1");for(;m.getTime()<=l;)f.push(toDate(m)),m.setDate(m.getDate()+_),m.setHours(0,0,0,0);return f}function startOfMonth(e){requiredArgs(1,arguments);var t=toDate(e);return t.setDate(1),t.setHours(0,0,0,0),t}function endOfWeek(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=getDefaultOptions(),k=toInteger((r=(n=(a=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&a!==void 0?a:b.weekStartsOn)!==null&&n!==void 0?n:(m=b.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&r!==void 0?r:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=toDate(e),x=D.getDay(),A=(x<k?-7:0)+6-(x-k);return D.setDate(D.getDate()+A),D.setHours(23,59,59,999),D}function subMilliseconds(e,t){requiredArgs(2,arguments);var r=toInteger(t);return addMilliseconds(e,-r)}var MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(e){requiredArgs(1,arguments);var t=1,r=toDate(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function getUTCISOWeekYear(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=startOfUTCISOWeek(n),o=new Date(0);o.setUTCFullYear(r,0,4),o.setUTCHours(0,0,0,0);var l=startOfUTCISOWeek(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function startOfUTCISOWeekYear(e){requiredArgs(1,arguments);var t=getUTCISOWeekYear(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=startOfUTCISOWeek(r);return n}var MILLISECONDS_IN_WEEK$3=6048e5;function getUTCISOWeek(e){requiredArgs(1,arguments);var t=toDate(e),r=startOfUTCISOWeek(t).getTime()-startOfUTCISOWeekYear(t).getTime();return Math.round(r/MILLISECONDS_IN_WEEK$3)+1}function startOfUTCWeek(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=getDefaultOptions(),k=toInteger((r=(n=(a=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&a!==void 0?a:b.weekStartsOn)!==null&&n!==void 0?n:(m=b.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&r!==void 0?r:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=toDate(e),x=D.getUTCDay(),A=(x<k?7:0)+x-k;return D.setUTCDate(D.getUTCDate()-A),D.setUTCHours(0,0,0,0),D}function getUTCWeekYear(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=toDate(e),k=b.getUTCFullYear(),D=getDefaultOptions(),x=toInteger((r=(n=(a=(o=t==null?void 0:t.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:D.firstWeekContainsDate)!==null&&n!==void 0?n:(m=D.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setUTCFullYear(k+1,0,x),A.setUTCHours(0,0,0,0);var H=startOfUTCWeek(A,t),Q=new Date(0);Q.setUTCFullYear(k,0,x),Q.setUTCHours(0,0,0,0);var q=startOfUTCWeek(Q,t);return b.getTime()>=H.getTime()?k+1:b.getTime()>=q.getTime()?k:k-1}function startOfUTCWeekYear(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=getDefaultOptions(),k=toInteger((r=(n=(a=(o=t==null?void 0:t.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:b.firstWeekContainsDate)!==null&&n!==void 0?n:(m=b.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&r!==void 0?r:1),D=getUTCWeekYear(e,t),x=new Date(0);x.setUTCFullYear(D,0,k),x.setUTCHours(0,0,0,0);var A=startOfUTCWeek(x,t);return A}var MILLISECONDS_IN_WEEK$2=6048e5;function getUTCWeek(e,t){requiredArgs(1,arguments);var r=toDate(e),n=startOfUTCWeek(r,t).getTime()-startOfUTCWeekYear(r,t).getTime();return Math.round(n/MILLISECONDS_IN_WEEK$2)+1}function addLeadingZeros(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var formatters$2={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return addLeadingZeros(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):addLeadingZeros(n+1,2)},d:function(t,r){return addLeadingZeros(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return addLeadingZeros(t.getUTCHours()%12||12,r.length)},H:function(t,r){return addLeadingZeros(t.getUTCHours(),r.length)},m:function(t,r){return addLeadingZeros(t.getUTCMinutes(),r.length)},s:function(t,r){return addLeadingZeros(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),o=Math.floor(a*Math.pow(10,n-3));return addLeadingZeros(o,r.length)}};const formatters$3=formatters$2;var dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),o=a>0?a:1-a;return n.ordinalNumber(o,{unit:"year"})}return formatters$3.y(t,r)},Y:function(t,r,n,a){var o=getUTCWeekYear(t,a),l=o>0?o:1-o;if(r==="YY"){var f=l%100;return addLeadingZeros(f,2)}return r==="Yo"?n.ordinalNumber(l,{unit:"year"}):addLeadingZeros(l,r.length)},R:function(t,r){var n=getUTCISOWeekYear(t);return addLeadingZeros(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return addLeadingZeros(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return addLeadingZeros(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return addLeadingZeros(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return formatters$3.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return addLeadingZeros(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var o=getUTCWeek(t,a);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):addLeadingZeros(o,r.length)},I:function(t,r,n){var a=getUTCISOWeek(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):addLeadingZeros(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):formatters$3.d(t,r)},D:function(t,r,n){var a=getUTCDayOfYear(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):addLeadingZeros(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var o=t.getUTCDay(),l=(o-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return addLeadingZeros(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var o=t.getUTCDay(),l=(o-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return addLeadingZeros(l,r.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),o=a===0?7:a;switch(r){case"i":return String(o);case"ii":return addLeadingZeros(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),o=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),o;switch(a===12?o=dayPeriodEnum.noon:a===0?o=dayPeriodEnum.midnight:o=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),o;switch(a>=17?o=dayPeriodEnum.evening:a>=12?o=dayPeriodEnum.afternoon:a>=4?o=dayPeriodEnum.morning:o=dayPeriodEnum.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return formatters$3.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):formatters$3.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):addLeadingZeros(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):addLeadingZeros(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):formatters$3.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):formatters$3.s(t,r)},S:function(t,r){return formatters$3.S(t,r)},X:function(t,r,n,a){var o=a._originalDate||t,l=o.getTimezoneOffset();if(l===0)return"Z";switch(r){case"X":return formatTimezoneWithOptionalMinutes(l);case"XXXX":case"XX":return formatTimezone(l);case"XXXXX":case"XXX":default:return formatTimezone(l,":")}},x:function(t,r,n,a){var o=a._originalDate||t,l=o.getTimezoneOffset();switch(r){case"x":return formatTimezoneWithOptionalMinutes(l);case"xxxx":case"xx":return formatTimezone(l);case"xxxxx":case"xxx":default:return formatTimezone(l,":")}},O:function(t,r,n,a){var o=a._originalDate||t,l=o.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(l,":");case"OOOO":default:return"GMT"+formatTimezone(l,":")}},z:function(t,r,n,a){var o=a._originalDate||t,l=o.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(l,":");case"zzzz":default:return"GMT"+formatTimezone(l,":")}},t:function(t,r,n,a){var o=a._originalDate||t,l=Math.floor(o.getTime()/1e3);return addLeadingZeros(l,r.length)},T:function(t,r,n,a){var o=a._originalDate||t,l=o.getTime();return addLeadingZeros(l,r.length)}};function formatTimezoneShort(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),o=n%60;if(o===0)return r+String(a);var l=t||"";return r+String(a)+l+addLeadingZeros(o,2)}function formatTimezoneWithOptionalMinutes(e,t){if(e%60===0){var r=e>0?"-":"+";return r+addLeadingZeros(Math.abs(e)/60,2)}return formatTimezone(e,t)}function formatTimezone(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),o=addLeadingZeros(Math.floor(a/60),2),l=addLeadingZeros(a%60,2);return n+o+r+l}const formatters$1=formatters;var dateLongFormatter=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},timeLongFormatter=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},dateTimeLongFormatter=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return dateLongFormatter(t,r);var l;switch(a){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",dateLongFormatter(a,r)).replace("{{time}}",timeLongFormatter(o,r))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter};const longFormatters$1=longFormatters;var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(e){return protectedDayOfYearTokens.indexOf(e)!==-1}function isProtectedWeekYearToken(e){return protectedWeekYearTokens.indexOf(e)!==-1}function throwProtectedError(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function(t,r,n){var a,o=formatDistanceLocale[t];return typeof o=="string"?a=o:r===1?a=o.one:a=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};const formatDistance$1=formatDistance;function buildFormatLongFn(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})};const formatLong$1=formatLong;var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function(t,r,n,a){return formatRelativeLocale[t]};const formatRelative$1=formatRelative;function buildLocalizeFn(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{var f=e.defaultWidth,m=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[m]||e.values[f]}var _=e.argumentCallback?e.argumentCallback(t):t;return a[_]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};const localize$1=localize;function buildMatchFn(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;var l=o[0],f=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(f)?findIndex(f,function(k){return k.test(l)}):findKey(f,function(k){return k.test(l)}),_;_=e.valueCallback?e.valueCallback(m):m,_=r.valueCallback?r.valueCallback(_):_;var b=t.slice(l.length);return{value:_,rest:b}}}function findKey(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function findIndex(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function buildMatchPatternFn(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],o=t.match(e.parsePattern);if(!o)return null;var l=e.valueCallback?e.valueCallback(o[0]):o[0];l=r.valueCallback?r.valueCallback(l):l;var f=t.slice(a.length);return{value:l,rest:f}}}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(t){return parseInt(t,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})};const match$1=match;var locale={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const defaultLocale=locale;var formattingTokensRegExp$1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp$1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp$1=/^'([^]*?)'?$/,doubleQuoteRegExp$1=/''/g,unescapedLatinCharacterRegExp$1=/[a-zA-Z]/;function format(e,t,r){var n,a,o,l,f,m,_,b,k,D,x,A,H,Q,q,j,de,ge;requiredArgs(2,arguments);var ye=String(t),Te=getDefaultOptions(),d=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:Te.locale)!==null&&n!==void 0?n:defaultLocale,ie=toInteger((o=(l=(f=(m=r==null?void 0:r.firstWeekContainsDate)!==null&&m!==void 0?m:r==null||(_=r.locale)===null||_===void 0||(b=_.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&f!==void 0?f:Te.firstWeekContainsDate)!==null&&l!==void 0?l:(k=Te.locale)===null||k===void 0||(D=k.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(ie>=1&&ie<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var re=toInteger((x=(A=(H=(Q=r==null?void 0:r.weekStartsOn)!==null&&Q!==void 0?Q:r==null||(q=r.locale)===null||q===void 0||(j=q.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&H!==void 0?H:Te.weekStartsOn)!==null&&A!==void 0?A:(de=Te.locale)===null||de===void 0||(ge=de.options)===null||ge===void 0?void 0:ge.weekStartsOn)!==null&&x!==void 0?x:0);if(!(re>=0&&re<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!d.localize)throw new RangeError("locale must contain localize property");if(!d.formatLong)throw new RangeError("locale must contain formatLong property");var ke=toDate(e);if(!isValid(ke))throw new RangeError("Invalid time value");var F=getTimezoneOffsetInMilliseconds(ke),me=subMilliseconds(ke,F),le={firstWeekContainsDate:ie,weekStartsOn:re,locale:d,_originalDate:ke},Ye=ye.match(longFormattingTokensRegExp$1).map(function(De){var ue=De[0];if(ue==="p"||ue==="P"){var w=longFormatters$1[ue];return w(De,d.formatLong)}return De}).join("").match(formattingTokensRegExp$1).map(function(De){if(De==="''")return"'";var ue=De[0];if(ue==="'")return cleanEscapedString$1(De);var w=formatters$1[ue];if(w)return!(r!=null&&r.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(De)&&throwProtectedError(De,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(De)&&throwProtectedError(De,t,String(e)),w(me,De,d.localize,le);if(ue.match(unescapedLatinCharacterRegExp$1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");return De}).join("");return Ye}function cleanEscapedString$1(e){var t=e.match(escapedStringRegExp$1);return t?t[1].replace(doubleQuoteRegExp$1,"'"):e}function assign(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function getDay(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getDay();return r}function getDaysInMonth(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getFullYear(),n=t.getMonth(),a=new Date(0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function getHours(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getHours();return r}var MILLISECONDS_IN_WEEK$1=6048e5;function getISOWeek(e){requiredArgs(1,arguments);var t=toDate(e),r=startOfISOWeek(t).getTime()-startOfISOWeekYear(t).getTime();return Math.round(r/MILLISECONDS_IN_WEEK$1)+1}function getMinutes(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getMinutes();return r}function getMonth(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getMonth();return r}function getSeconds(e){requiredArgs(1,arguments);var t=toDate(e),r=t.getSeconds();return r}function getWeekYear(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=toDate(e),k=b.getFullYear(),D=getDefaultOptions(),x=toInteger((r=(n=(a=(o=t==null?void 0:t.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:D.firstWeekContainsDate)!==null&&n!==void 0?n:(m=D.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setFullYear(k+1,0,x),A.setHours(0,0,0,0);var H=startOfWeek(A,t),Q=new Date(0);Q.setFullYear(k,0,x),Q.setHours(0,0,0,0);var q=startOfWeek(Q,t);return b.getTime()>=H.getTime()?k+1:b.getTime()>=q.getTime()?k:k-1}function startOfWeekYear(e,t){var r,n,a,o,l,f,m,_;requiredArgs(1,arguments);var b=getDefaultOptions(),k=toInteger((r=(n=(a=(o=t==null?void 0:t.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:b.firstWeekContainsDate)!==null&&n!==void 0?n:(m=b.locale)===null||m===void 0||(_=m.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&r!==void 0?r:1),D=getWeekYear(e,t),x=new Date(0);x.setFullYear(D,0,k),x.setHours(0,0,0,0);var A=startOfWeek(x,t);return A}var MILLISECONDS_IN_WEEK=6048e5;function getWeek(e,t){requiredArgs(1,arguments);var r=toDate(e),n=startOfWeek(r,t).getTime()-startOfWeekYear(r,t).getTime();return Math.round(n/MILLISECONDS_IN_WEEK)+1}function getYear(e){return requiredArgs(1,arguments),toDate(e).getFullYear()}function isAfter(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toDate(t);return r.getTime()>n.getTime()}function isBefore(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toDate(t);return r.getTime()<n.getTime()}function isEqual(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toDate(t);return r.getTime()===n.getTime()}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}}function _createForOfIteratorHelper(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(_){throw _},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,l=!1,f;return{s:function(){r=r.call(e)},n:function(){var _=r.next();return o=_.done,_},e:function(_){l=!0,f=_},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(l)throw f}}}}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_setPrototypeOf(e,t)}function _inherits(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_getPrototypeOf(e)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _possibleConstructorReturn(e,t){if(t&&(_typeof(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n=_getPrototypeOf(e),a;if(t){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toPrimitive(e,t){if(_typeof(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_typeof(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return _typeof(t)==="symbol"?t:String(t)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TIMEZONE_UNIT_PRIORITY=10,Setter=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"priority",void 0),_defineProperty(this,"subPriority",0)}return _createClass(e,[{key:"validate",value:function(r,n){return!0}}]),e}(),ValueSetter=function(e){_inherits(r,e);var t=_createSuper(r);function r(n,a,o,l,f){var m;return _classCallCheck(this,r),m=t.call(this),m.value=n,m.validateValue=a,m.setValue=o,m.priority=l,f&&(m.subPriority=f),m}return _createClass(r,[{key:"validate",value:function(a,o){return this.validateValue(a,this.value,o)}},{key:"set",value:function(a,o,l){return this.setValue(a,o,this.value,l)}}]),r}(Setter),DateToSystemTimezoneSetter=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",TIMEZONE_UNIT_PRIORITY),_defineProperty(_assertThisInitialized(n),"subPriority",-1),n}return _createClass(r,[{key:"set",value:function(a,o){if(o.timestampIsSet)return a;var l=new Date(0);return l.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),l.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),l}}]),r}(Setter),Parser=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"incompatibleTokens",void 0),_defineProperty(this,"priority",void 0),_defineProperty(this,"subPriority",void 0)}return _createClass(e,[{key:"run",value:function(r,n,a,o){var l=this.parse(r,n,a,o);return l?{setter:new ValueSetter(l.value,this.validate,this.set,this.priority,this.subPriority),rest:l.rest}:null}},{key:"validate",value:function(r,n,a){return!0}}]),e}(),EraParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",140),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["R","u","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"G":case"GG":case"GGG":return l.era(a,{width:"abbreviated"})||l.era(a,{width:"narrow"});case"GGGGG":return l.era(a,{width:"narrow"});case"GGGG":default:return l.era(a,{width:"wide"})||l.era(a,{width:"abbreviated"})||l.era(a,{width:"narrow"})}}},{key:"set",value:function(a,o,l){return o.era=l,a.setUTCFullYear(l,0,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(e,t){return e&&{value:t(e.value),rest:e.rest}}function parseNumericPattern(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function parseTimezonePattern(e,t){var r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};var n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,o=r[3]?parseInt(r[3],10):0,l=r[5]?parseInt(r[5],10):0;return{value:n*(a*millisecondsInHour+o*millisecondsInMinute+l*millisecondsInSecond),rest:t.slice(r[0].length)}}function parseAnyDigitsSigned(e){return parseNumericPattern(numericPatterns.anyDigitsSigned,e)}function parseNDigits(e,t){switch(e){case 1:return parseNumericPattern(numericPatterns.singleDigit,t);case 2:return parseNumericPattern(numericPatterns.twoDigits,t);case 3:return parseNumericPattern(numericPatterns.threeDigits,t);case 4:return parseNumericPattern(numericPatterns.fourDigits,t);default:return parseNumericPattern(new RegExp("^\\d{1,"+e+"}"),t)}}function parseNDigitsSigned(e,t){switch(e){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,t);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,t);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,t);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,t);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+e+"}"),t)}}function dayPeriodEnumToHours(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(e,t){var r=t>0,n=r?t:1-t,a;if(n<=50)a=e||100;else{var o=n+50,l=Math.floor(o/100)*100,f=e>=o%100;a=e+l-(f?100:0)}return r?a:1-a}function isLeapYearIndex$1(e){return e%400===0||e%4===0&&e%100!==0}var YearParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",130),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){var f=function(_){return{year:_,isTwoDigitYear:o==="yy"}};switch(o){case"y":return mapValue(parseNDigits(4,a),f);case"yo":return mapValue(l.ordinalNumber(a,{unit:"year"}),f);default:return mapValue(parseNDigits(o.length,a),f)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,l){var f=a.getUTCFullYear();if(l.isTwoDigitYear){var m=normalizeTwoDigitYear(l.year,f);return a.setUTCFullYear(m,0,1),a.setUTCHours(0,0,0,0),a}var _=!("era"in o)||o.era===1?l.year:1-l.year;return a.setUTCFullYear(_,0,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),LocalWeekYearParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",130),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){var f=function(_){return{year:_,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return mapValue(parseNDigits(4,a),f);case"Yo":return mapValue(l.ordinalNumber(a,{unit:"year"}),f);default:return mapValue(parseNDigits(o.length,a),f)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,l,f){var m=getUTCWeekYear(a,f);if(l.isTwoDigitYear){var _=normalizeTwoDigitYear(l.year,m);return a.setUTCFullYear(_,0,f.firstWeekContainsDate),a.setUTCHours(0,0,0,0),startOfUTCWeek(a,f)}var b=!("era"in o)||o.era===1?l.year:1-l.year;return a.setUTCFullYear(b,0,f.firstWeekContainsDate),a.setUTCHours(0,0,0,0),startOfUTCWeek(a,f)}}]),r}(Parser),ISOWeekYearParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",130),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o){return parseNDigitsSigned(o==="R"?4:o.length,a)}},{key:"set",value:function(a,o,l){var f=new Date(0);return f.setUTCFullYear(l,0,4),f.setUTCHours(0,0,0,0),startOfUTCISOWeek(f)}}]),r}(Parser),ExtendedYearParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",130),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o){return parseNDigitsSigned(o==="u"?4:o.length,a)}},{key:"set",value:function(a,o,l){return a.setUTCFullYear(l,0,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),QuarterParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",120),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"Q":case"QQ":return parseNDigits(o.length,a);case"Qo":return l.ordinalNumber(a,{unit:"quarter"});case"QQQ":return l.quarter(a,{width:"abbreviated",context:"formatting"})||l.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return l.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return l.quarter(a,{width:"wide",context:"formatting"})||l.quarter(a,{width:"abbreviated",context:"formatting"})||l.quarter(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,l){return a.setUTCMonth((l-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),StandAloneQuarterParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",120),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"q":case"qq":return parseNDigits(o.length,a);case"qo":return l.ordinalNumber(a,{unit:"quarter"});case"qqq":return l.quarter(a,{width:"abbreviated",context:"standalone"})||l.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return l.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return l.quarter(a,{width:"wide",context:"standalone"})||l.quarter(a,{width:"abbreviated",context:"standalone"})||l.quarter(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,l){return a.setUTCMonth((l-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),MonthParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty(_assertThisInitialized(n),"priority",110),n}return _createClass(r,[{key:"parse",value:function(a,o,l){var f=function(_){return _-1};switch(o){case"M":return mapValue(parseNumericPattern(numericPatterns.month,a),f);case"MM":return mapValue(parseNDigits(2,a),f);case"Mo":return mapValue(l.ordinalNumber(a,{unit:"month"}),f);case"MMM":return l.month(a,{width:"abbreviated",context:"formatting"})||l.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return l.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return l.month(a,{width:"wide",context:"formatting"})||l.month(a,{width:"abbreviated",context:"formatting"})||l.month(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,l){return a.setUTCMonth(l,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),StandAloneMonthParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",110),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){var f=function(_){return _-1};switch(o){case"L":return mapValue(parseNumericPattern(numericPatterns.month,a),f);case"LL":return mapValue(parseNDigits(2,a),f);case"Lo":return mapValue(l.ordinalNumber(a,{unit:"month"}),f);case"LLL":return l.month(a,{width:"abbreviated",context:"standalone"})||l.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return l.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return l.month(a,{width:"wide",context:"standalone"})||l.month(a,{width:"abbreviated",context:"standalone"})||l.month(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,l){return a.setUTCMonth(l,1),a.setUTCHours(0,0,0,0),a}}]),r}(Parser);function setUTCWeek(e,t,r){requiredArgs(2,arguments);var n=toDate(e),a=toInteger(t),o=getUTCWeek(n,r)-a;return n.setUTCDate(n.getUTCDate()-o*7),n}var LocalWeekParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",100),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"w":return parseNumericPattern(numericPatterns.week,a);case"wo":return l.ordinalNumber(a,{unit:"week"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,l,f){return startOfUTCWeek(setUTCWeek(a,l,f),f)}}]),r}(Parser);function setUTCISOWeek(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t),a=getUTCISOWeek(r)-n;return r.setUTCDate(r.getUTCDate()-a*7),r}var ISOWeekParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",100),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"I":return parseNumericPattern(numericPatterns.week,a);case"Io":return l.ordinalNumber(a,{unit:"week"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,l){return startOfUTCISOWeek(setUTCISOWeek(a,l))}}]),r}(Parser),DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31],DateParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",90),_defineProperty(_assertThisInitialized(n),"subPriority",1),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"d":return parseNumericPattern(numericPatterns.date,a);case"do":return l.ordinalNumber(a,{unit:"date"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){var l=a.getUTCFullYear(),f=isLeapYearIndex$1(l),m=a.getUTCMonth();return f?o>=1&&o<=DAYS_IN_MONTH_LEAP_YEAR[m]:o>=1&&o<=DAYS_IN_MONTH[m]}},{key:"set",value:function(a,o,l){return a.setUTCDate(l),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),DayOfYearParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",90),_defineProperty(_assertThisInitialized(n),"subpriority",1),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,a);case"Do":return l.ordinalNumber(a,{unit:"date"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){var l=a.getUTCFullYear(),f=isLeapYearIndex$1(l);return f?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(a,o,l){return a.setUTCMonth(0,l),a.setUTCHours(0,0,0,0),a}}]),r}(Parser);function setUTCDay(e,t,r){var n,a,o,l,f,m,_,b;requiredArgs(2,arguments);var k=getDefaultOptions(),D=toInteger((n=(a=(o=(l=r==null?void 0:r.weekStartsOn)!==null&&l!==void 0?l:r==null||(f=r.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&o!==void 0?o:k.weekStartsOn)!==null&&a!==void 0?a:(_=k.locale)===null||_===void 0||(b=_.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&n!==void 0?n:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=toDate(e),A=toInteger(t),H=x.getUTCDay(),Q=A%7,q=(Q+7)%7,j=(q<D?7:0)+A-H;return x.setUTCDate(x.getUTCDate()+j),x}var DayParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",90),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["D","i","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"E":case"EE":case"EEE":return l.day(a,{width:"abbreviated",context:"formatting"})||l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return l.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return l.day(a,{width:"wide",context:"formatting"})||l.day(a,{width:"abbreviated",context:"formatting"})||l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,l,f){return a=setUTCDay(a,l,f),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),LocalDayParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",90),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l,f){var m=function(b){var k=Math.floor((b-1)/7)*7;return(b+f.weekStartsOn+6)%7+k};switch(o){case"e":case"ee":return mapValue(parseNDigits(o.length,a),m);case"eo":return mapValue(l.ordinalNumber(a,{unit:"day"}),m);case"eee":return l.day(a,{width:"abbreviated",context:"formatting"})||l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"});case"eeeee":return l.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return l.day(a,{width:"wide",context:"formatting"})||l.day(a,{width:"abbreviated",context:"formatting"})||l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,l,f){return a=setUTCDay(a,l,f),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),StandAloneLocalDayParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",90),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l,f){var m=function(b){var k=Math.floor((b-1)/7)*7;return(b+f.weekStartsOn+6)%7+k};switch(o){case"c":case"cc":return mapValue(parseNDigits(o.length,a),m);case"co":return mapValue(l.ordinalNumber(a,{unit:"day"}),m);case"ccc":return l.day(a,{width:"abbreviated",context:"standalone"})||l.day(a,{width:"short",context:"standalone"})||l.day(a,{width:"narrow",context:"standalone"});case"ccccc":return l.day(a,{width:"narrow",context:"standalone"});case"cccccc":return l.day(a,{width:"short",context:"standalone"})||l.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return l.day(a,{width:"wide",context:"standalone"})||l.day(a,{width:"abbreviated",context:"standalone"})||l.day(a,{width:"short",context:"standalone"})||l.day(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,l,f){return a=setUTCDay(a,l,f),a.setUTCHours(0,0,0,0),a}}]),r}(Parser);function setUTCISODay(e,t){requiredArgs(2,arguments);var r=toInteger(t);r%7===0&&(r=r-7);var n=1,a=toDate(e),o=a.getUTCDay(),l=r%7,f=(l+7)%7,m=(f<n?7:0)+r-o;return a.setUTCDate(a.getUTCDate()+m),a}var ISODayParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",90),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){var f=function(_){return _===0?7:_};switch(o){case"i":case"ii":return parseNDigits(o.length,a);case"io":return l.ordinalNumber(a,{unit:"day"});case"iii":return mapValue(l.day(a,{width:"abbreviated",context:"formatting"})||l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"}),f);case"iiiii":return mapValue(l.day(a,{width:"narrow",context:"formatting"}),f);case"iiiiii":return mapValue(l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"}),f);case"iiii":default:return mapValue(l.day(a,{width:"wide",context:"formatting"})||l.day(a,{width:"abbreviated",context:"formatting"})||l.day(a,{width:"short",context:"formatting"})||l.day(a,{width:"narrow",context:"formatting"}),f)}}},{key:"validate",value:function(a,o){return o>=1&&o<=7}},{key:"set",value:function(a,o,l){return a=setUTCISODay(a,l),a.setUTCHours(0,0,0,0),a}}]),r}(Parser),AMPMParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",80),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["b","B","H","k","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"a":case"aa":case"aaa":return l.dayPeriod(a,{width:"abbreviated",context:"formatting"})||l.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return l.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return l.dayPeriod(a,{width:"wide",context:"formatting"})||l.dayPeriod(a,{width:"abbreviated",context:"formatting"})||l.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,l){return a.setUTCHours(dayPeriodEnumToHours(l),0,0,0),a}}]),r}(Parser),AMPMMidnightParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",80),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["a","B","H","k","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"b":case"bb":case"bbb":return l.dayPeriod(a,{width:"abbreviated",context:"formatting"})||l.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return l.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return l.dayPeriod(a,{width:"wide",context:"formatting"})||l.dayPeriod(a,{width:"abbreviated",context:"formatting"})||l.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,l){return a.setUTCHours(dayPeriodEnumToHours(l),0,0,0),a}}]),r}(Parser),DayPeriodParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",80),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["a","b","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"B":case"BB":case"BBB":return l.dayPeriod(a,{width:"abbreviated",context:"formatting"})||l.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return l.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return l.dayPeriod(a,{width:"wide",context:"formatting"})||l.dayPeriod(a,{width:"abbreviated",context:"formatting"})||l.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,l){return a.setUTCHours(dayPeriodEnumToHours(l),0,0,0),a}}]),r}(Parser),Hour1to12Parser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",70),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["H","K","k","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"h":return parseNumericPattern(numericPatterns.hour12h,a);case"ho":return l.ordinalNumber(a,{unit:"hour"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=12}},{key:"set",value:function(a,o,l){var f=a.getUTCHours()>=12;return f&&l<12?a.setUTCHours(l+12,0,0,0):!f&&l===12?a.setUTCHours(0,0,0,0):a.setUTCHours(l,0,0,0),a}}]),r}(Parser),Hour0to23Parser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",70),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["a","b","h","K","k","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"H":return parseNumericPattern(numericPatterns.hour23h,a);case"Ho":return l.ordinalNumber(a,{unit:"hour"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=23}},{key:"set",value:function(a,o,l){return a.setUTCHours(l,0,0,0),a}}]),r}(Parser),Hour0To11Parser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",70),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["h","H","k","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"K":return parseNumericPattern(numericPatterns.hour11h,a);case"Ko":return l.ordinalNumber(a,{unit:"hour"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,l){var f=a.getUTCHours()>=12;return f&&l<12?a.setUTCHours(l+12,0,0,0):a.setUTCHours(l,0,0,0),a}}]),r}(Parser),Hour1To24Parser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",70),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["a","b","h","H","K","t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"k":return parseNumericPattern(numericPatterns.hour24h,a);case"ko":return l.ordinalNumber(a,{unit:"hour"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=24}},{key:"set",value:function(a,o,l){var f=l<=24?l%24:l;return a.setUTCHours(f,0,0,0),a}}]),r}(Parser),MinuteParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",60),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"m":return parseNumericPattern(numericPatterns.minute,a);case"mo":return l.ordinalNumber(a,{unit:"minute"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,l){return a.setUTCMinutes(l,0,0),a}}]),r}(Parser),SecondParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",50),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o,l){switch(o){case"s":return parseNumericPattern(numericPatterns.second,a);case"so":return l.ordinalNumber(a,{unit:"second"});default:return parseNDigits(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,l){return a.setUTCSeconds(l,0),a}}]),r}(Parser),FractionOfSecondParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",30),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["t","T"]),n}return _createClass(r,[{key:"parse",value:function(a,o){var l=function(m){return Math.floor(m*Math.pow(10,-o.length+3))};return mapValue(parseNDigits(o.length,a),l)}},{key:"set",value:function(a,o,l){return a.setUTCMilliseconds(l),a}}]),r}(Parser),ISOTimezoneWithZParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",10),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["t","T","x"]),n}return _createClass(r,[{key:"parse",value:function(a,o){switch(o){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,a);case"XX":return parseTimezonePattern(timezonePatterns.basic,a);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,a);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,a);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,a)}}},{key:"set",value:function(a,o,l){return o.timestampIsSet?a:new Date(a.getTime()-l)}}]),r}(Parser),ISOTimezoneParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",10),_defineProperty(_assertThisInitialized(n),"incompatibleTokens",["t","T","X"]),n}return _createClass(r,[{key:"parse",value:function(a,o){switch(o){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,a);case"xx":return parseTimezonePattern(timezonePatterns.basic,a);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,a);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,a);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,a)}}},{key:"set",value:function(a,o,l){return o.timestampIsSet?a:new Date(a.getTime()-l)}}]),r}(Parser),TimestampSecondsParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",40),_defineProperty(_assertThisInitialized(n),"incompatibleTokens","*"),n}return _createClass(r,[{key:"parse",value:function(a){return parseAnyDigitsSigned(a)}},{key:"set",value:function(a,o,l){return[new Date(l*1e3),{timestampIsSet:!0}]}}]),r}(Parser),TimestampMillisecondsParser=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n;_classCallCheck(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o)),_defineProperty(_assertThisInitialized(n),"priority",20),_defineProperty(_assertThisInitialized(n),"incompatibleTokens","*"),n}return _createClass(r,[{key:"parse",value:function(a){return parseAnyDigitsSigned(a)}},{key:"set",value:function(a,o,l){return[new Date(l),{timestampIsSet:!0}]}}]),r}(Parser),parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(e,t,r,n){var a,o,l,f,m,_,b,k,D,x,A,H,Q,q,j,de,ge,ye;requiredArgs(3,arguments);var Te=String(e),d=String(t),ie=getDefaultOptions(),re=(a=(o=n==null?void 0:n.locale)!==null&&o!==void 0?o:ie.locale)!==null&&a!==void 0?a:defaultLocale;if(!re.match)throw new RangeError("locale must contain match property");var ke=toInteger((l=(f=(m=(_=n==null?void 0:n.firstWeekContainsDate)!==null&&_!==void 0?_:n==null||(b=n.locale)===null||b===void 0||(k=b.options)===null||k===void 0?void 0:k.firstWeekContainsDate)!==null&&m!==void 0?m:ie.firstWeekContainsDate)!==null&&f!==void 0?f:(D=ie.locale)===null||D===void 0||(x=D.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(ke>=1&&ke<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=toInteger((A=(H=(Q=(q=n==null?void 0:n.weekStartsOn)!==null&&q!==void 0?q:n==null||(j=n.locale)===null||j===void 0||(de=j.options)===null||de===void 0?void 0:de.weekStartsOn)!==null&&Q!==void 0?Q:ie.weekStartsOn)!==null&&H!==void 0?H:(ge=ie.locale)===null||ge===void 0||(ye=ge.options)===null||ye===void 0?void 0:ye.weekStartsOn)!==null&&A!==void 0?A:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(d==="")return Te===""?toDate(r):new Date(NaN);var me={firstWeekContainsDate:ke,weekStartsOn:F,locale:re},le=[new DateToSystemTimezoneSetter],Ye=d.match(longFormattingTokensRegExp).map(function(O){var U=O[0];if(U in longFormatters$1){var Z=longFormatters$1[U];return Z(O,re.formatLong)}return O}).join("").match(formattingTokensRegExp),De=[],ue=_createForOfIteratorHelper(Ye),w;try{var Y=function(){var U=w.value;!(n!=null&&n.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(U)&&throwProtectedError(U,d,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(U)&&throwProtectedError(U,d,e);var Z=U[0],ee=parsers[Z];if(ee){var we=ee.incompatibleTokens;if(Array.isArray(we)){var Se=De.find(function(Je){return we.includes(Je.token)||Je.token===Z});if(Se)throw new RangeError("The format string mustn't contain `".concat(Se.fullToken,"` and `").concat(U,"` at the same time"))}else if(ee.incompatibleTokens==="*"&&De.length>0)throw new RangeError("The format string mustn't contain `".concat(U,"` and any other token at the same time"));De.push({token:Z,fullToken:U});var Ce=ee.run(Te,U,re.match,me);if(!Ce)return{v:new Date(NaN)};le.push(Ce.setter),Te=Ce.rest}else{if(Z.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");if(U==="''"?U="'":Z==="'"&&(U=cleanEscapedString(U)),Te.indexOf(U)===0)Te=Te.slice(U.length);else return{v:new Date(NaN)}}};for(ue.s();!(w=ue.n()).done;){var E=Y();if(_typeof(E)==="object")return E.v}}catch(O){ue.e(O)}finally{ue.f()}if(Te.length>0&&notWhitespaceRegExp.test(Te))return new Date(NaN);var W=le.map(function(O){return O.priority}).sort(function(O,U){return U-O}).filter(function(O,U,Z){return Z.indexOf(O)===U}).map(function(O){return le.filter(function(U){return U.priority===O}).sort(function(U,Z){return Z.subPriority-U.subPriority})}).map(function(O){return O[0]}),fe=toDate(r);if(isNaN(fe.getTime()))return new Date(NaN);var T=subMilliseconds(fe,getTimezoneOffsetInMilliseconds(fe)),I={},S=_createForOfIteratorHelper(W),P;try{for(S.s();!(P=S.n()).done;){var G=P.value;if(!G.validate(T,me))return new Date(NaN);var B=G.set(T,I,me);Array.isArray(B)?(T=B[0],assign(I,B[1])):T=B}}catch(O){S.e(O)}finally{S.f()}return T}function cleanEscapedString(e){return e.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function subDays(e,t){requiredArgs(2,arguments);var r=toInteger(t);return addDays(e,-r)}function parseISO(e,t){var r;requiredArgs(1,arguments);var n=toInteger((r=t==null?void 0:t.additionalDigits)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=splitDateString(e),o;if(a.date){var l=parseYear(a.date,n);o=parseDate(l.restDateString,l.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var f=o.getTime(),m=0,_;if(a.time&&(m=parseTime(a.time),isNaN(m)))return new Date(NaN);if(a.timezone){if(_=parseTimezone(a.timezone),isNaN(_))return new Date(NaN)}else{var b=new Date(f+m),k=new Date(0);return k.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),k.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),k}return new Date(f+m+_)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(e){var t={},r=e.split(patterns.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],patterns.timeZoneDelimiter.test(t.date)&&(t.date=e.split(patterns.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){var a=patterns.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function parseYear(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function parseDate(e,t){if(t===null)return new Date(NaN);var r=e.match(dateRegex);if(!r)return new Date(NaN);var n=!!r[4],a=parseDateUnit(r[1]),o=parseDateUnit(r[2])-1,l=parseDateUnit(r[3]),f=parseDateUnit(r[4]),m=parseDateUnit(r[5])-1;if(n)return validateWeekDate(t,f,m)?dayOfISOWeekYear(t,f,m):new Date(NaN);var _=new Date(0);return!validateDate(t,o,l)||!validateDayOfYearDate(t,a)?new Date(NaN):(_.setUTCFullYear(t,o,Math.max(a,l)),_)}function parseDateUnit(e){return e?parseInt(e):1}function parseTime(e){var t=e.match(timeRegex);if(!t)return NaN;var r=parseTimeUnit(t[1]),n=parseTimeUnit(t[2]),a=parseTimeUnit(t[3]);return validateTime(r,n,a)?r*millisecondsInHour+n*millisecondsInMinute+a*1e3:NaN}function parseTimeUnit(e){return e&&parseFloat(e.replace(",","."))||0}function parseTimezone(e){if(e==="Z")return 0;var t=e.match(timezoneRegex);if(!t)return 0;var r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return validateTimezone(n,a)?r*(n*millisecondsInHour+a*millisecondsInMinute):NaN}function dayOfISOWeekYear(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,o=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+o),n}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(e){return e%400===0||e%4===0&&e%100!==0}function validateDate(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(daysInMonths[t]||(isLeapYearIndex(e)?29:28))}function validateDayOfYearDate(e,t){return t>=1&&t<=(isLeapYearIndex(e)?366:365)}function validateWeekDate(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function validateTime(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function validateTimezone(e,t){return t>=0&&t<=59}function setMonth(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t),a=r.getFullYear(),o=r.getDate(),l=new Date(0);l.setFullYear(a,n,15),l.setHours(0,0,0,0);var f=getDaysInMonth(l);return r.setMonth(n,Math.min(o,f)),r}function set(e,t){if(requiredArgs(2,arguments),_typeof(t)!=="object"||t===null)throw new RangeError("values parameter must be an object");var r=toDate(e);return isNaN(r.getTime())?new Date(NaN):(t.year!=null&&r.setFullYear(t.year),t.month!=null&&(r=setMonth(r,t.month)),t.date!=null&&r.setDate(toInteger(t.date)),t.hours!=null&&r.setHours(toInteger(t.hours)),t.minutes!=null&&r.setMinutes(toInteger(t.minutes)),t.seconds!=null&&r.setSeconds(toInteger(t.seconds)),t.milliseconds!=null&&r.setMilliseconds(toInteger(t.milliseconds)),r)}function setHours(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);return r.setHours(n),r}function setMilliseconds(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);return r.setMilliseconds(n),r}function setMinutes(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);return r.setMinutes(n),r}function setSeconds(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);return r.setSeconds(n),r}function setYear(e,t){requiredArgs(2,arguments);var r=toDate(e),n=toInteger(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(n),r)}function subMonths(e,t){requiredArgs(2,arguments);var r=toInteger(t);return addMonths(e,-r)}function sub(e,t){if(requiredArgs(2,arguments),!t||_typeof(t)!=="object")return new Date(NaN);var r=t.years?toInteger(t.years):0,n=t.months?toInteger(t.months):0,a=t.weeks?toInteger(t.weeks):0,o=t.days?toInteger(t.days):0,l=t.hours?toInteger(t.hours):0,f=t.minutes?toInteger(t.minutes):0,m=t.seconds?toInteger(t.seconds):0,_=subMonths(e,n+r*12),b=subDays(_,o+a*7),k=f+l*60,D=m+k*60,x=D*1e3,A=new Date(b.getTime()-x);return A}function subYears(e,t){requiredArgs(2,arguments);var r=toInteger(t);return addYears(e,-r)}const StudyList_vue_vue_type_style_index_0_lang="";document._allowedFilters=["StudyDate","StudyTime","AccessionNumber","PatientID","PatientName","PatientBirthDate","StudyInstanceUID","StudyID","StudyDescription","ModalitiesInStudy","labels"];document._studyColumns={StudyDate:{width:"7%"},AccessionNumber:{width:"11%",placeholder:"1234"},PatientID:{width:"11%",placeholder:"1234"},PatientName:{width:"15%",placeholder:"John^Doe"},PatientBirthDate:{width:"7%"},StudyDescription:{width:"25%",placeholder:"Chest"},modalities:{width:"6%"},seriesCount:{width:"4%"},undefined:{width:"10%"}};document._datePickerPresetRanges=[{tLabel:"date_picker.today",range:[new Date,new Date]},{tLabel:"date_picker.yesterday",range:[subDays(new Date,1),subDays(new Date,1)]},{tLabel:"date_picker.this_week",range:[startOfWeek(new Date),new Date]},{tLabel:"date_picker.last_week",range:[startOfWeek(subDays(new Date,7)),endOfWeek(subDays(new Date,7))]},{tLabel:"date_picker.this_month",range:[startOfMonth(new Date),endOfMonth(new Date)]},{tLabel:"date_picker.last_month",range:[startOfMonth(subMonths(new Date,1)),endOfMonth(subMonths(new Date,1))]},{tLabel:"date_picker.last_12_months",range:[subYears(new Date,1),new Date]}];const _sfc_main$a={props:[],emits:["deletedStudy"],data(){return{filterStudyDate:"",filterStudyDateForDatePicker:"",filterPatientBirthDate:"",filterPatientBirthDateForDatePicker:"",filterModalities:{},filterGenericTags:{},oldFilterGenericTags:{},filterLabels:{},allModalities:!0,noneModalities:!1,updatingFilterUi:!1,updatingRoute:!1,initializingModalityFilter:!1,searchTimerHandler:{},columns:document._studyColumns,datePickerPresetRanges:document._datePickerPresetRanges,allSelected:!1,isPartialSelected:!1,latestStudiesIds:[],shouldStopLoadingLatestStudies:!1,isLoadingLatestStudies:!1,isDisplayingLatestStudies:!1}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,isConfigurationLoaded:e=>e.configuration.loaded,studiesIds:e=>e.studies.studiesIds,selectedStudiesIds:e=>e.studies.selectedStudiesIds,isSearching:e=>e.studies.isSearching,statistics:e=>e.studies.statistics}),...mapGetters(["studies/isFilterEmpty"]),notShowingAllResults(){return this.studiesIds.length>=this.statistics.CountStudies?!1:this.studiesIds.length==this.uiOptions.MaxStudiesDisplayed},isSearchAsYouTypeEnabled(){return this.uiOptions.StudyListSearchMode=="search-as-you-type"},isSearchButtonEnabled(){return this.uiOptions.StudyListSearchMode=="search-button"},showEmptyStudyListIfNoSearch(){return this.uiOptions.StudyListContentIfNoSearch=="empty"},showLastReceivedIfNoSearch(){return this.uiOptions.StudyListContentIfNoSearch=="most-recents"},isStudyListEmpty(){return this.studiesIds.length==0}},watch:{$route:async function(){this.updatingRoute||this.updateFilterFromRoute(this.$route.query),this.updatingRoute=!1},isConfigurationLoaded(e,t){this.initModalityFilter();for(const r of this.uiOptions.StudyListColumns)["StudyDate","PatientBirthDate","modalities","seriesCount"].indexOf(r)==-1&&(this.filterGenericTags[r]="");this.updateFilterFromRoute(this.$route.query)},filterLabels:{handler(e,t){!this.updatingFilterUi&&!this.initializingModalityFilter&&this.updateFilter("labels",this.filterLabels,null)},deep:!0},filterModalities:{handler(e,t){!this.updatingFilterUi&&!this.initializingModalityFilter&&this.updateFilter("ModalitiesInStudy",this.getModalityFilter(),null)},deep:!0},filterGenericTags:{handler(e,t){for(const[r,n]of Object.entries(this.filterGenericTags)){let a=null;r in this.oldFilterGenericTags&&(a=this.oldFilterGenericTags[r]),this.updateFilter(r,n,a),this.oldFilterGenericTags[r]=n}},deep:!0},filterStudyDate(e,t){this.updateFilter("StudyDate",e,t)},filterStudyDateForDatePicker(e,t){let r=this.formatDateFromDatePicker(e);r==null&&(r=""),this.filterStudyDate=r},filterPatientBirthDate(e,t){this.updateFilter("PatientBirthDate",e,t)},filterPatientBirthDateForDatePicker(e,t){let r=this.formatDateFromDatePicker(e);r==null&&(r=""),this.filterPatientBirthDate=r},selectedStudiesIds:{handler(e,t){this.updateSelectAll()},deep:!0}},async created(){this.messageBus.on("language-changed",this.translateDatePicker),this.messageBus.on("filter-label-changed",this.updateLabelsFilter)},async mounted(){this.updateSelectAll()},methods:{updateSelectAll(){this.selectedStudiesIds.length==0?(this.allSelected=!1,this.isPartialSelected=!1):this.selectedStudiesIds.length==this.studiesIds.length?(this.allSelected=!0,this.isPartialSelected=!1):(this.allSelected="",this.isPartialSelected=!0)},clickSelectAll(){this.allSelected==""||!this.allSelected?(this.$store.dispatch("studies/selectAllStudies",{isSelected:!0}),this.messageBus.emit("selected-all")):(this.$store.dispatch("studies/selectAllStudies",{isSelected:!1}),this.messageBus.emit("unselected-all"))},translateDatePicker(e){for(let t in document._datePickerPresetRanges)document._datePickerPresetRanges[t].label=this.$t(document._datePickerPresetRanges[t].tLabel)},columnTitle(e){return e=="seriesCount"?this.$i18n.t("series_count_header"):e=="modalities"?translateDicomTag(this.$i18n.t,this.$i18n.te,"ModalitiesInStudy"):translateDicomTag(this.$i18n.t,this.$i18n.te,e)},columnTooltip(e){return this.columnTitle(e)},columnWidth(e){return e in this.columns?this.columns[e].width:this.columns[void 0].width},clearModalityFilter(){for(const e of this.uiOptions.ModalitiesFilter)this.filterModalities[e]=!0},updateLabelsFilter(e){this.filterLabels=[e]},initModalityFilter(){this.initializingModalityFilter=!0,this.filterModalities={};for(const e of this.uiOptions.ModalitiesFilter)this.filterModalities[e]=!0;this.initializingModalityFilter=!1},getModalityFilter(){if(this.filterModalities===void 0)return"";let e=!0,t=[];for(const[r,n]of Object.entries(this.filterModalities))e&=n,n&&t.push(r);return e?(this.allModalities=!0,this.noneModalities=!1,""):t.length==0?(this.allModalities=!1,this.noneModalities=!0,"NONE"):(this.allModalities=!1,this.noneModalities=!1,t.join("\\"))},updateFilter(e,t,r){if(!this.updatingFilterUi){if(e=="ModalitiesInStudy"&&r==null){this._updateFilter(e,t);return}e=="labels"&&t!=r&&this._updateLabelsFilter(t),this.isSearchAsYouTypeEnabled&&(t.length>=this.uiOptions.StudyListSearchAsYouTypeMinChars?(this.searchTimerHandler[e]&&clearTimeout(this.searchTimerHandler[e]),this.searchTimerHandler[e]=setTimeout(()=>{this._updateFilter(e,t)},this.uiOptions.StudyListSearchAsYouTypeDelay)):r&&t.length<r.length&&r.length>=this.uiOptions.StudyListSearchAsYouTypeMinChars&&(this.searchTimerHandler[e]=setTimeout(()=>{this._updateFilter(e,"")},this.uiOptions.StudyListSearchAsYouTypeDelay)))}},clipFilter(e,t){return this.isFilterLongEnough(e,t)?t:""},getMinimalFilterLength(e){if(["AccessionNumber","PatientName","PatientID","StudyDescription"].indexOf(e)!=-1){if(this.isSearchAsYouTypeEnabled)return this.uiOptions.StudyListSearchAsYouTypeMinChars}else if(["PatientBirthDate","StudyDate"].indexOf(e)!=-1)return 8;return 0},isFilterLongEnough(e,t){return t.length>=this.getMinimalFilterLength(e)},getFilterClass(e){const t=this.getFilterValue(e);return t!=null&&t.length>0&&!this.isFilterLongEnough(e,t)?"is-invalid-filter":""},hasFilter(e){return["seriesCount"].indexOf(e)==-1},getFilterPlaceholder(e){return e in this.columns&&this.columns[e].placeholder?this.columns[e].placeholder:"search-text"},getFilterValue(e){if(!this.isConfigurationLoaded)return null;if(e=="StudyDate")return this.filterStudyDate;if(e=="PatientBirthDate")return this.filterPatientBirthDate;if(e=="ModalitiesInStudy")console.error("getFilterValue ModalitiesInStudy");else return this.filterGenericTags[e]},_updateLabelsFilter(e){this.$store.dispatch("studies/updateLabelsFilterNoReload",{labels:e}),this.updateUrl(),this.reloadStudyList()},_updateFilter(e,t){this.searchTimerHandler[e]=null,this.$store.dispatch("studies/updateFilterNoReload",{dicomTagName:e,value:t}),this.updateUrl(),this.reloadStudyList()},async updateFilterFromRoute(e){this.updatingFilterUi=!0,await this.$store.dispatch("studies/clearFilterNoReload");var t={};for(const[r,n]of Object.entries(e))if(r=="labels"){const a=n.split(",");t[r]=a,await this.$store.dispatch("studies/updateLabelsFilterNoReload",{labels:a})}else r[0]===r[0].toUpperCase()&&(t[r]=n,await this.$store.dispatch("studies/updateFilterNoReload",{dicomTagName:r,value:n}));await this.updateFilterForm(t),await this.reloadStudyList(),this.updatingFilterUi=!1},updateFilterForm(e){this.emptyFilterForm();for(const[t,r]of Object.entries(e))if(t=="labels")this.filterLabels=r;else if(t=="StudyDate")this.filterStudyDate=r,this.filterStudyDateForDatePicker=resourceHelpers.parseDateForDatePicker(r);else if(t=="PatientBirthDate")this.filterPatientBirthDate=r,this.filterPatientBirthDateForDatePicker=resourceHelpers.parseDateForDatePicker(r);else if(t=="ModalitiesInStudy"){const n=r.split("\\");if(n.length>0){let a=!0,o=!0;for(const l of this.uiOptions.ModalitiesFilter){const f=n.indexOf(l)!=-1;this.filterModalities[l]=f,a&=f,o&=!f}this.allModalities=a,this.noneModalities=o}}else this.filterGenericTags[t]=r},emptyFilterForm(){this.filterStudyDate="",this.filterStudyDateForDatePicker=null,this.filterPatientBirthDate="",this.filterPatientBirthDateForDatePicker=null,this.filterGenericTags={};for(const e of this.uiOptions.StudyListColumns)["StudyDate","PatientBirthDate","modalities","seriesCount"].indexOf(e)==-1&&(this.filterGenericTags[e]="");this.filterLabels=[],this.clearModalityFilter()},isFilteringOnlyOnLabels(){let e=!1;for(const t of this.uiOptions.StudyListColumns)["StudyDate","PatientBirthDate","modalities","seriesCount"].indexOf(t)==-1&&this.filterGenericTags[t]&&this.filterGenericTags[t]!=""&&(e=!0);return this.filterStudyDate==""&&this.filterPatientBirthDate==""&&!e&&this.filterLabels.length>0},async search(){if(this.isSearching)await this.$store.dispatch("studies/cancelSearch");else{await this.$store.dispatch("studies/clearFilterNoReload");for(const e of this.uiOptions.StudyListColumns)["modalities","seriesCount"].indexOf(e)==-1&&await this.$store.dispatch("studies/updateFilterNoReload",{dicomTagName:e,value:this.getFilterValue(e)});await this.reloadStudyList(),this.updateUrl()}},async clearFilters(){await this.clearFiltersUi(),await this.$store.dispatch("studies/clearFilterNoReload"),this.reloadStudyList()},async clearFiltersUi(){this.updatingFilterUi=!0,this.emptyFilterForm(),this.updateUrl(),this.updatingFilterUi=!1},async toggleModalityFilter(e){const t=e.srcElement.getAttribute("data-value");let r=!0;t=="all"?r=!0:t=="none"&&(r=!1);for(const[n,a]of Object.entries(this.filterModalities))this.filterModalities[n]=r},modalityFilterClicked(e){e.stopPropagation()},closeModalityFilter(e){$$1("#dropdown-modalities-button").click(),e.preventDefault(),e.stopPropagation()},updateUrl(){let e=[];this.clipFilter("StudyDate",this.filterStudyDate)&&e.push("StudyDate="+this.filterStudyDate),this.clipFilter("PatientBirthDate",this.filterPatientBirthDate)&&e.push("PatientBirthDate="+this.filterPatientBirthDate),this.getModalityFilter()&&e.push("ModalitiesInStudy="+this.getModalityFilter());for(const[r,n]of Object.entries(this.filterGenericTags))this.clipFilter(r,n)&&e.push(r+"="+n);this.filterLabels.length>0&&e.push("labels="+this.filterLabels.join(","));let t="";e.length>0&&(t="/filtered-studies?"+e.join("&")),this.updatingRoute=!0,this.$router.replace(t)},async reloadStudyList(){const e=this.uiOptions.StudyListContentIfNoSearch=="most-recents"&&this.isFilteringOnlyOnLabels();if(this["studies/isFilterEmpty"]||e){if(await this.$store.dispatch("studies/clearStudies"),this.uiOptions.StudyListContentIfNoSearch=="empty")return;if(this.uiOptions.StudyListContentIfNoSearch=="most-recents"){this.isLoadingLatestStudies&&(this.shouldStopLoadingLatestStudies=!0,this.isLoadingLatestStudies=!1,this.isDisplayingLatestStudies=!0);const t=await api.getLastChangeId();await this.$store.dispatch("studies/clearStudies"),this.latestStudiesIds=new Set,this.shouldStopLoadingLatestStudies=!1,this.isLoadingLatestStudies=!0,this.isDisplayingLatestStudies=!1,this.loadStudiesFromChange(Math.max(0,t-1e3),1e3)}}else this.shouldStopLoadingLatestStudies=!0,this.isLoadingLatestStudies=!1,this.isDisplayingLatestStudies=!1,await this.$store.dispatch("studies/reloadFilteredStudies")},async loadStudiesFromChange(e,t){let r=await api.getChanges(e,t);for(let n of r.Changes.reverse())if((n.ChangeType=="NewStudy"||n.ChangeType=="StableStudy")&&!this.latestStudiesIds.has(n.ID)){if(this.shouldStopLoadingLatestStudies)return;try{const a=await api.getStudy(n.ID);if((this.filterLabels.length==0||this.filterLabels.filter(o=>a.Labels.includes(o)).length>0)&&this.$store.dispatch("studies/addStudy",{studyId:n.ID,study:a}),this.latestStudiesIds.add(n.ID),this.latestStudiesIds.size==this.uiOptions.MaxStudiesDisplayed){this.isLoadingLatestStudies=!1,this.isDisplayingLatestStudies=!0;return}}catch{console.warn("Unable to load study - not authorized ?")}}!this.shouldStopLoadingLatestStudies&&e>0?this.loadStudiesFromChange(Math.max(0,Math.max(0,e-1e3)),1e3):(this.isLoadingLatestStudies=!1,this.isDisplayingLatestStudies=!0)},onDeletedStudy(e){this.$store.dispatch("studies/deleteStudy",{studyId:e})},formatDateFromDatePicker(e){let t="";return e==null?t=null:e instanceof Date?t=resourceHelpers.toDicomDate(e):e instanceof Array&&(e.length==2&&e[0]!=null&&e[0].getFullYear!=null&&e[1]!=null&&e[1].getFullYear!=null?resourceHelpers.toDicomDate(e[0])==resourceHelpers.toDicomDate(e[1])?t=resourceHelpers.toDicomDate(e[0]):t=resourceHelpers.toDicomDate(e[0])+"-"+resourceHelpers.toDicomDate(e[1]):e.length>=1&&e[0].getFullYear!=null?t=resourceHelpers.toDicomDate(e[0]):e.length==2&&typeof e[0]=="string"&&typeof e[1]=="string"?t=e[0]+"-"+e[1]:e.length==1&&typeof e[0]=="string"&&(t=e[0])),console.log("formatDateFromDatePicker",e,t),t}},components:{StudyItem,ResourceButtonGroup}},_hoisted_1$a={class:"table table-responsive table-sm study-table table-borderless"},_hoisted_2$9=createBaseVNode("th",{width:"2%",scope:"col",class:"study-table-header"},null,-1),_hoisted_3$8=["title","width"],_hoisted_4$8={scope:"col"},_hoisted_5$7=createBaseVNode("i",{class:"fa-regular fa-circle-xmark"},null,-1),_hoisted_6$7=[_hoisted_5$7],_hoisted_7$6={key:0,class:"study-list-date-picker"},_hoisted_8$5=["onClick"],_hoisted_9$4={key:1,class:"dropdown"},_hoisted_10$4=createBaseVNode("button",{type:"button",class:"btn btn-default btn-sm filter-button dropdown-toggle","data-bs-toggle":"dropdown",id:"dropdown-modalities-button","aria-expanded":"false"},[createBaseVNode("span",{class:"fa fa-list"}),createTextVNode(" "),createBaseVNode("span",{class:"caret"})],-1),_hoisted_11$4={class:"dropdown-item"},_hoisted_12$4={class:"dropdown-item"},_hoisted_13$4=createBaseVNode("li",null,[createBaseVNode("hr",{class:"dropdown-divider"})],-1),_hoisted_14$2={class:"dropdown-item"},_hoisted_15$2=["data-value","onUpdate:modelValue"],_hoisted_16$2={key:2,class:"study-list-date-picker"},_hoisted_17$2=["onUpdate:modelValue","placeholder"],_hoisted_18$2={class:"actions-header"},_hoisted_19$2={width:"2%",scope:"col"},_hoisted_20$2={class:"form-check"},_hoisted_21$2=["indeterminate"],_hoisted_22$2={width:"98%",colspan:"10",scope:"col",class:"study-table-header"},_hoisted_23$2={class:"row g-1"},_hoisted_24$1={class:"col-3 study-list-bulk-buttons"},_hoisted_25$1={class:"col-7"},_hoisted_26$1={key:0,class:"alert alert-secondary study-list-alert",role:"alert"},_hoisted_27$1={key:0,class:"spinner-border spinner-border-sm alert-icon",role:"status","aria-hidden":"true"},_hoisted_28$1={key:1,class:"alert alert-secondary study-list-alert",role:"alert"},_hoisted_29$1=createBaseVNode("i",{class:"bi bi-exclamation-triangle-fill alert-icon"},null,-1),_hoisted_30$1={key:2,class:"alert alert-danger study-list-alert",role:"alert"},_hoisted_31$1=createBaseVNode("i",{class:"bi bi-exclamation-triangle-fill alert-icon"},null,-1),_hoisted_32$1={key:3,class:"alert alert-warning study-list-alert",role:"alert"},_hoisted_33$1=createBaseVNode("i",{class:"bi bi-exclamation-triangle-fill alert-icon"},null,-1),_hoisted_34$1={key:4,class:"alert alert-warning study-list-alert",role:"alert"},_hoisted_35$1=createBaseVNode("i",{class:"bi bi-exclamation-triangle-fill alert-icon"},null,-1),_hoisted_36$1={key:5,class:"alert alert-secondary study-list-alert",role:"alert"},_hoisted_37$1={key:0,class:"spinner-border spinner-border-sm alert-icon",role:"status","aria-hidden":"true"},_hoisted_38$1={class:"col-2"},_hoisted_39$1={key:0,class:"fa-solid fa-magnifying-glass"},_hoisted_40$1={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function _sfc_render$a(e,t,r,n,a,o){const l=resolveComponent("Datepicker"),f=resolveComponent("ResourceButtonGroup"),m=resolveComponent("StudyItem");return openBlock(),createElementBlock("div",null,[createBaseVNode("table",_hoisted_1$a,[createBaseVNode("thead",null,[_hoisted_2$9,(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyListColumns,_=>(openBlock(),createElementBlock("th",{key:_,"data-bs-toggle":"tooltip",title:o.columnTooltip(_),width:o.columnWidth(_),class:"study-table-title"},toDisplayString(o.columnTitle(_)),9,_hoisted_3$8))),128))]),createBaseVNode("thead",{class:"study-filters",onKeyup:t[9]||(t[9]=withKeys((..._)=>o.search&&o.search(..._),["enter"]))},[createBaseVNode("th",_hoisted_4$8,[createBaseVNode("button",{onClick:t[0]||(t[0]=(..._)=>o.clearFilters&&o.clearFilters(..._)),type:"button",class:"form-control study-list-filter btn filter-button","data-bs-toggle":"tooltip",title:"Clear filter"},_hoisted_6$7)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyListColumns,_=>(openBlock(),createElementBlock("th",{key:_},[_=="StudyDate"?(openBlock(),createElementBlock("div",_hoisted_7$6,[_=="StudyDate"?(openBlock(),createBlock(l,{key:0,modelValue:a.filterStudyDateForDatePicker,"onUpdate:modelValue":t[1]||(t[1]=b=>a.filterStudyDateForDatePicker=b),"enable-time-picker":!1,range:"","preset-ranges":a.datePickerPresetRanges,format:"yyyyMMdd","preview-format":"yyyyMMdd","text-input":"","arrow-navigation":"","highlight-week-days":[0,6]},{yearly:withCtx(({label:b,range:k,presetDateRange:D})=>[createBaseVNode("span",{onClick:x=>D(k)},toDisplayString(b),9,_hoisted_8$5)]),_:1},8,["modelValue","preset-ranges"])):createCommentVNode("",!0)])):_=="modalities"?(openBlock(),createElementBlock("div",_hoisted_9$4,[_hoisted_10$4,createBaseVNode("ul",{class:"dropdown-menu","aria-labelledby":"dropdown-modalities-button",onClick:t[7]||(t[7]=(...b)=>o.modalityFilterClicked&&o.modalityFilterClicked(...b)),id:"modality-filter-dropdown"},[createBaseVNode("li",null,[createBaseVNode("label",_hoisted_11$4,[withDirectives(createBaseVNode("input",{type:"checkbox","data-value":"all",onClick:t[2]||(t[2]=(...b)=>o.toggleModalityFilter&&o.toggleModalityFilter(...b)),"onUpdate:modelValue":t[3]||(t[3]=b=>a.allModalities=b)},null,512),[[vModelCheckbox,a.allModalities]]),createTextVNode(" "+toDisplayString(e.$t("all_modalities")),1)])]),createBaseVNode("li",null,[createBaseVNode("label",_hoisted_12$4,[withDirectives(createBaseVNode("input",{type:"checkbox","data-value":"none",onClick:t[4]||(t[4]=(...b)=>o.toggleModalityFilter&&o.toggleModalityFilter(...b)),"onUpdate:modelValue":t[5]||(t[5]=b=>a.noneModalities=b)},null,512),[[vModelCheckbox,a.noneModalities]]),createTextVNode(" "+toDisplayString(e.$t("no_modalities")),1)])]),_hoisted_13$4,(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.ModalitiesFilter,b=>(openBlock(),createElementBlock("li",{key:b},[createBaseVNode("label",_hoisted_14$2,[withDirectives(createBaseVNode("input",{type:"checkbox","data-value":b,"onUpdate:modelValue":k=>a.filterModalities[b]=k},null,8,_hoisted_15$2),[[vModelCheckbox,a.filterModalities[b]]]),createTextVNode(" "+toDisplayString(b),1)])]))),128)),createBaseVNode("li",null,[createBaseVNode("button",{class:"btn btn-primary mx-5",onClick:t[6]||(t[6]=(...b)=>o.closeModalityFilter&&o.closeModalityFilter(...b)),"data-bs-toggle":"dropdown"},toDisplayString(e.$t("close")),1)])])])):_=="PatientBirthDate"?(openBlock(),createElementBlock("div",_hoisted_16$2,[createVNode(l,{modelValue:a.filterPatientBirthDateForDatePicker,"onUpdate:modelValue":t[8]||(t[8]=b=>a.filterPatientBirthDateForDatePicker=b),"enable-time-picker":!1,range:"",format:"yyyyMMdd","preview-format":"yyyyMMdd","text-input":"","arrow-navigation":"","highlight-week-days":[0,6]},null,8,["modelValue"])])):o.hasFilter(_)?withDirectives((openBlock(),createElementBlock("input",{key:3,type:"text",class:normalizeClass(["form-control study-list-filter",o.getFilterClass(_)]),"onUpdate:modelValue":b=>this.filterGenericTags[_]=b,placeholder:o.getFilterPlaceholder(_)},null,10,_hoisted_17$2)),[[vModelText,this.filterGenericTags[_]]]):createCommentVNode("",!0)]))),128))],32),createBaseVNode("tbody",null,[createBaseVNode("tr",_hoisted_18$2,[createBaseVNode("td",_hoisted_19$2,[createBaseVNode("div",_hoisted_20$2,[withDirectives(createBaseVNode("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=_=>a.allSelected=_),indeterminate:a.isPartialSelected,onClick:t[11]||(t[11]=(..._)=>o.clickSelectAll&&o.clickSelectAll(..._))},null,8,_hoisted_21$2),[[vModelCheckbox,a.allSelected]])])]),createBaseVNode("td",_hoisted_22$2,[createBaseVNode("div",_hoisted_23$2,[createBaseVNode("div",_hoisted_24$1,[createVNode(f,{resourceLevel:"bulk"})]),createBaseVNode("div",_hoisted_25$1,[!e.isSearching&&a.isLoadingLatestStudies?(openBlock(),createElementBlock("div",_hoisted_26$1,[a.isLoadingLatestStudies?(openBlock(),createElementBlock("span",_hoisted_27$1)):createCommentVNode("",!0),createTextVNode(toDisplayString(e.$t("loading_latest_studies")),1)])):!e.isSearching&&a.isDisplayingLatestStudies?(openBlock(),createElementBlock("div",_hoisted_28$1,[_hoisted_29$1,createTextVNode(toDisplayString(e.$t("displaying_latest_studies")),1)])):!e.isSearching&&o.notShowingAllResults?(openBlock(),createElementBlock("div",_hoisted_30$1,[_hoisted_31$1,createTextVNode(" "+toDisplayString(e.$t("not_showing_all_results"))+" ! ! ",1)])):!e.isSearching&&o.showEmptyStudyListIfNoSearch&&this["studies/isFilterEmpty"]?(openBlock(),createElementBlock("div",_hoisted_32$1,[_hoisted_33$1,createTextVNode(" "+toDisplayString(e.$t("enter_search")),1)])):!e.isSearching&&o.isStudyListEmpty?(openBlock(),createElementBlock("div",_hoisted_34$1,[_hoisted_35$1,createTextVNode(" "+toDisplayString(e.$t("no_result_found")),1)])):e.isSearching?(openBlock(),createElementBlock("div",_hoisted_36$1,[e.isSearching?(openBlock(),createElementBlock("span",_hoisted_37$1)):createCommentVNode("",!0),createTextVNode(toDisplayString(e.$t("searching")),1)])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_38$1,[o.isSearchButtonEnabled?(openBlock(),createElementBlock("button",{key:0,onClick:t[12]||(t[12]=(..._)=>o.search&&o.search(..._)),type:"submit",class:normalizeClass(["form-control study-list-filter btn filter-button btn-secondary search-button",{"is-searching":e.isSearching,"is-not-searching":!e.isSearching}]),"data-bs-toggle":"tooltip",title:"Search"},[e.isSearching?createCommentVNode("",!0):(openBlock(),createElementBlock("i",_hoisted_39$1)),e.isSearching?(openBlock(),createElementBlock("span",_hoisted_40$1)):createCommentVNode("",!0)],2)):createCommentVNode("",!0)])])])])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.studiesIds,_=>(openBlock(),createBlock(m,{key:_,studyId:_,onDeletedStudy:o.onDeletedStudy},null,8,["studyId","onDeletedStudy"]))),128))])])}const StudyList=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]),RemoteStudyDetails_vue_vue_type_style_index_0_scoped_3dc64892_lang="",RemoteStudyDetails_vue_vue_type_style_index_1_lang="",_sfc_main$9={props:["studyFields","id","remoteMode","remoteSource"],setup(){},data(){return{}},computed:{...mapState({system:e=>e.configuration.system}),studyMainTags(){return document._remoteStudyMainStudyTags},patientMainTags(){return document._remoteStudyMainPatientTags}},components:{ResourceDetailText},methods:{async retrieve(){if(this.remoteMode=="dicom"){const e={StudyInstanceUID:this.studyFields.StudyInstanceUID,PatientID:this.studyFields.PatientID},t=await api.remoteDicomRetrieveStudy(this.remoteSource,e,this.system.DicomAet,"Study");this.$store.dispatch("jobs/addJob",{jobId:t,name:"Retrieve Study from ("+this.remoteSource+")"})}}}},_withScopeId$5=e=>(pushScopeId("data-v-3dc64892"),e=e(),popScopeId(),e),_hoisted_1$9={class:"table table-responsive table-sm study-details-table"},_hoisted_2$8={width:"40%",class:"cut-text"},_hoisted_3$7={width:"40%",class:"cut-text"},_hoisted_4$7={width:"20%",class:"study-button-group"},_hoisted_5$6={class:"d-grid d-lg-block gap-2"},_hoisted_6$6=_withScopeId$5(()=>createBaseVNode("i",{class:"bi bi-box-arrow-in-down"},null,-1)),_hoisted_7$5=[_hoisted_6$6];function _sfc_render$9(e,t,r,n,a,o){const l=resolveComponent("ResourceDetailText");return openBlock(),createElementBlock("table",_hoisted_1$9,[createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_2$8,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.studyMainTags,f=>(openBlock(),createBlock(l,{key:f,tags:r.studyFields,tag:f,showIfEmpty:!0},null,8,["tags","tag"]))),128))])]),createBaseVNode("td",_hoisted_3$7,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.patientMainTags,f=>(openBlock(),createBlock(l,{key:f,tags:r.studyFields,tag:f,showIfEmpty:!0},null,8,["tags","tag"]))),128))])]),createBaseVNode("td",_hoisted_4$7,[createBaseVNode("div",_hoisted_5$6,[createBaseVNode("a",{class:"btn btn-sm btn-secondary m-1",type:"button","data-bs-toggle":"tooltip",title:"Retrieve",onClick:t[0]||(t[0]=f=>o.retrieve())},_hoisted_7$5)])])])])}const RemoteStudyDetails=_export_sfc(_sfc_main$9,[["render",_sfc_render$9],["__scopeId","data-v-3dc64892"]]),RemoteStudyItem_vue_vue_type_style_index_0_scoped_fdd4168b_lang="",_sfc_main$8={props:["studyFields","id","remoteMode","remoteSource"],emits:[],data(){return{loaded:!1,expanded:!1,collapseElement:null}},async mounted(){this.loaded=!0,this.$refs["study-collapsible-details"]||console.log("no refs: ",studyResponse),this.$refs["study-collapsible-details"].addEventListener("show.bs.collapse",t=>{t.target==t.currentTarget&&(this.expanded=!0)}),this.$refs["study-collapsible-details"].addEventListener("hide.bs.collapse",t=>{t.target==t.currentTarget&&(this.expanded=!1)});var e=this.$refs["study-collapsible-details"];this.collapseElement=new bootstrap.Collapse(e,{toggle:!1});for(const[t,r]of Object.entries(this.$route.query))t==="expand"&&(r==null||r==="study"||r==="series"||r==="instance")&&this.collapseElement.show()},methods:{},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions}),modalitiesInStudyForDisplay(){return this.studyFields.ModalitiesInStudy.split("\\").join(",")}},components:{RemoteStudyDetails}},_withScopeId$4=e=>(pushScopeId("data-v-fdd4168b"),e=e(),popScopeId(),e),_hoisted_1$8=_withScopeId$4(()=>createBaseVNode("td",null,null,-1)),_hoisted_2$7=_withScopeId$4(()=>createBaseVNode("td",null,null,-1)),_hoisted_3$6=["data-bs-target"],_hoisted_4$6=["title"],_hoisted_5$5=["title"],_hoisted_6$5=["title"],_hoisted_7$4=["title"],_hoisted_8$4=["title"],_hoisted_9$3=["title"],_hoisted_10$3=["title"],_hoisted_11$3={key:7},_hoisted_12$3=["id"],_hoisted_13$3={key:0,colspan:"100"};function _sfc_render$8(e,t,r,n,a,o){const l=resolveComponent("RemoteStudyDetails");return openBlock(),createElementBlock("tbody",null,[a.loaded?(openBlock(),createElementBlock("tr",{key:0,class:normalizeClass({"study-row-collapsed":!a.expanded,"study-row-expanded":a.expanded})},[_hoisted_1$8,_hoisted_2$7,(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyListColumns,f=>(openBlock(),createElementBlock("td",{key:f,class:normalizeClass(["cut-text",{"text-center":f in["modalities","seriesCount"]}]),"data-bs-toggle":"collapse","data-bs-target":"#study-details-"+this.id},[f=="StudyDate"?(openBlock(),createElementBlock("span",{key:0,"data-bs-toggle":"tooltip",title:r.studyFields.StudyDate},toDisplayString(r.studyFields.StudyDate),9,_hoisted_4$6)):createCommentVNode("",!0),f=="AccessionNumber"?(openBlock(),createElementBlock("span",{key:1,"data-bs-toggle":"tooltip",title:r.studyFields.AccessionNumber},toDisplayString(r.studyFields.AccessionNumber),9,_hoisted_5$5)):createCommentVNode("",!0),f=="PatientID"?(openBlock(),createElementBlock("span",{key:2,"data-bs-toggle":"tooltip",title:r.studyFields.PatientID},toDisplayString(r.studyFields.PatientID),9,_hoisted_6$5)):createCommentVNode("",!0),f=="PatientName"?(openBlock(),createElementBlock("span",{key:3,"data-bs-toggle":"tooltip",title:r.studyFields.PatientName},toDisplayString(r.studyFields.PatientName),9,_hoisted_7$4)):createCommentVNode("",!0),f=="PatientBirthDate"?(openBlock(),createElementBlock("span",{key:4,"data-bs-toggle":"tooltip",title:r.studyFields.PatientBirthDate},toDisplayString(r.studyFields.PatientBirthDate),9,_hoisted_8$4)):createCommentVNode("",!0),f=="StudyDescription"?(openBlock(),createElementBlock("span",{key:5,"data-bs-toggle":"tooltip",title:r.studyFields.StudyDescription},toDisplayString(r.studyFields.StudyDescription),9,_hoisted_9$3)):createCommentVNode("",!0),f=="modalities"?(openBlock(),createElementBlock("span",{key:6,"data-bs-toggle":"tooltip",title:o.modalitiesInStudyForDisplay},toDisplayString(o.modalitiesInStudyForDisplay),9,_hoisted_10$3)):createCommentVNode("",!0),f=="seriesCount"?(openBlock(),createElementBlock("span",_hoisted_11$3,toDisplayString(r.studyFields.NumberOfStudyRelatedSeries),1)):createCommentVNode("",!0)],10,_hoisted_3$6))),128))],2)):createCommentVNode("",!0),withDirectives(createBaseVNode("tr",{class:normalizeClass(["collapse",{"study-details-collapsed":!a.expanded,"study-details-expanded":a.expanded}]),id:"study-details-"+this.id,ref:"study-collapsible-details"},[a.loaded&&a.expanded?(openBlock(),createElementBlock("td",_hoisted_13$3,[createVNode(l,{studyFields:this.studyFields,id:this.id,remoteMode:this.remoteMode,remoteSource:this.remoteSource},null,8,["studyFields","id","remoteMode","remoteSource"])])):createCommentVNode("",!0)],10,_hoisted_12$3),[[vShow,a.loaded]])])}const RemoteStudyItem=_export_sfc(_sfc_main$8,[["render",_sfc_render$8],["__scopeId","data-v-fdd4168b"]]),RemoteStudyList_vue_vue_type_style_index_0_lang="";document._remoteStudyAllowedFilters=["StudyDate","StudyTime","AccessionNumber","PatientID","PatientName","PatientBirthDate","StudyInstanceUID","StudyID","StudyDescription","ModalitiesInStudy"];document._remoteStudyMainStudyTags=["StudyDate","StudyTime","StudyID","AccessionNumber","StudyDescription","StudyInstanceUID","ModalitiesInStudy","NumberOfStudyRelatedSeries","RequestingPhysician","ReferringPhysicianName","InstitutionName"];document._remoteStudyMainPatientTags=["PatientID","PatientName","PatientBirthDate","PatientSex"];document._remoteStudyColumns={StudyDate:{width:"7%"},AccessionNumber:{width:"11%"},PatientID:{width:"11%"},PatientName:{width:"15%"},PatientBirthDate:{width:"7%"},StudyDescription:{width:"25%"},modalities:{width:"6%",extraClasses:"text-center"},seriesCount:{width:"4%",extraClasses:"text-center"}};const _sfc_main$7={props:[],emits:[],data(){return{filterStudyDate:"",filterAccessionNumber:"",filterPatientID:"",filterPatientName:"",filterPatientBirthDate:"",filterStudyDescription:"",filterModalities:{},allModalities:!0,noneModalities:!1,updatingFilterUi:!1,updatingRoute:!1,initializingModalityFilter:!1,columns:document._remoteStudyColumns,remoteMode:null,remoteSource:null,studies:[],isSearching:!1}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,isConfigurationLoaded:e=>e.configuration.loaded}),isFilterEmpty(){return this.filterStudyDate.length==0&&this.filterAccessionNumber.length==0&&this.filterPatientID.length==0&&this.filterPatientName.length==0&&this.filterPatientBirthDate.length==0&&this.filterStudyDescription.length==0&&this.getModalityFilter().length==0},isStudyListEmpty(){return this.studies.length==0}},watch:{$route:async function(){this.updatingRoute||this.updateFilterFromRoute(this.$route.query),this.updatingRoute=!1},isConfigurationLoaded(e,t){this.initModalityFilter(),this.updateFilterFromRoute(this.$route.query)},filterModalities:{handler(e,t){!this.updatingFilterUi&&!this.initializingModalityFilter&&this.updateFilter("ModalitiesInStudy",this.getModalityFilter(),null)},deep:!0},filterStudyDate(e,t){this.updateFilter("StudyDate",e,t)},filterAccessionNumber(e,t){this.updateFilter("AccessionNumber",e,t)},filterPatientID(e,t){this.updateFilter("PatientID",e,t)},filterPatientName(e,t){this.updateFilter("PatientName",e,t)},filterPatientBirthDate(e,t){this.updateFilter("PatientBirthDate",e,t)},filterStudyDescription(e,t){this.updateFilter("StudyDescription",e,t)}},async created(){},async mounted(){this.updateFilterFromRoute(this.$route.query)},methods:{columnTitle(e){return e=="seriesCount"?this.$i18n.t("series_count_header"):e=="modalities"?translateDicomTag(this.$i18n.t,this.$i18n.te,"ModalitiesInStudy"):translateDicomTag(this.$i18n.t,this.$i18n.te,e)},columnTooltip(e){return this.columnTitle(e)},clearModalityFilter(){for(const e of this.uiOptions.ModalitiesFilter)this.filterModalities[e]=!0},initModalityFilter(){this.initializingModalityFilter=!0,this.filterModalities={};for(const e of this.uiOptions.ModalitiesFilter)this.filterModalities[e]=!0;this.initializingModalityFilter=!1},getModalityFilter(){if(this.filterModalities===void 0)return"";let e=!0,t=[];for(const[r,n]of Object.entries(this.filterModalities))e&=n,n&&t.push(r);return e?(this.allModalities=!0,this.noneModalities=!1,""):t.length==0?(this.allModalities=!1,this.noneModalities=!0,"NONE"):(this.allModalities=!1,this.noneModalities=!1,t.join("\\"))},updateFilter(e,t,r){if(!this.updatingFilterUi&&r==null){this._updateFilter(e,t);return}},clipFilter(e,t){return this.isFilterLongEnough(e,t)?t:""},getMinimalFilterLength(e){return["AccessionNumber","PatientName","PatientID","StudyDescription"].indexOf(e)!=-1?2:["PatientBirthDate","StudyDate"].indexOf(e)!=-1?8:0},isFilterLongEnough(e,t){return t.length>=this.getMinimalFilterLength(e)},getFilterClass(e){const t=this.getFilterValue(e);return t.length>0&&!this.isFilterLongEnough(e,t)?"is-invalid-filter":""},getFilterValue(e){if(e=="StudyDate")return this.filterStudyDate;if(e=="AccessionNumber")return this.filterAccessionNumber;if(e=="PatientID")return this.filterPatientID;if(e=="PatientName")return this.filterPatientName;if(e=="PatientBirthDate")return this.filterPatientBirthDate;if(e=="StudyDescription")return this.filterStudyDescription;e=="ModalitiesInStudy"&&console.error("getFilterValue ModalitiesInStudy")},_updateFilter(e,t){this.updateUrl()},async updateFilterFromRoute(e){if(this.remoteMode=this.$route.query.remoteMode,this.remoteSource=this.$route.query.remoteSource,this.updatingFilterUi=!0,e===void 0)await this.clearFiltersUi(),console.warn("updateFilterFromRoute ... I think this code is not used anymore ...");else{var t={};for(const[r,n]of Object.entries(e))document._remoteStudyAllowedFilters.indexOf(r)==-1?console.log("StudyList: Not a filter Key: ",r,n):(t[r]=n,await this.$store.dispatch("studies/updateFilterNoReload",{dicomTagName:r,value:n}));await this.updateFilterForm(t)}this.updatingFilterUi=!1},updateFilterForm(e){this.emptyFilterForm();for(const[t,r]of Object.entries(e))if(t=="StudyDate")this.filterStudyDate=r;else if(t=="AccessionNumber")this.filterAccessionNumber=r;else if(t=="PatientID")this.filterPatientID=r;else if(t=="PatientName")this.filterPatientName=r;else if(t=="PatientBirthDate")this.filterPatientBirthDate=r;else if(t=="StudyDescription")this.filterStudyDescription=r;else if(t=="ModalitiesInStudy"){const n=r.split("\\");if(n.length>0){let a=!0,o=!0;for(const l of this.uiOptions.ModalitiesFilter){const f=n.indexOf(l)!=-1;this.filterModalities[l]=f,a&=f,o&=!f}this.allModalities=a,this.noneModalities=o}}},emptyFilterForm(){this.filterStudyDate="",this.filterAccessionNumber="",this.filterPatientID="",this.filterPatientName="",this.filterPatientBirthDate="",this.filterStudyDescription="",this.clearModalityFilter()},async search(){if(this.isSearching&&(api.cancelRemoteDicomFindStudies(),this.isSearching=!1),this.remoteMode=="dicom"){let e={};for(let r of document._remoteStudyMainStudyTags.concat(document._remoteStudyMainPatientTags))e[r]="";this.filterStudyDate.length>=8&&(e.StudyDate=this.filterStudyDate),this.filterAccessionNumber.length>=1&&(e.AccessionNumber="*"+this.filterAccessionNumber+"*"),this.filterPatientID.length>=1&&(e.PatientID="*"+this.filterPatientID+"*"),this.filterPatientName.length>=1&&(e.PatientName="*"+this.filterPatientName+"*"),this.filterPatientBirthDate.length>=8&&(e.PatientBirthDate=this.filterPatientBirthDate),this.filterStudyDescription.length>=1&&(e.StudyDescription="*"+this.filterStudyDescription+"*"),this.getModalityFilter().length>=1&&(e.ModalitiesInStudy=this.getModalityFilter());let t=api.remoteDicomFindStudies(this.remoteSource,e);this.isSearching=!0,t.then(r=>{this.studies=r,this.isSearching=!1})}this.updateUrl()},async clearFilters(){await this.clearFiltersUi(),await this.$store.dispatch("studies/clearFilter")},async clearFiltersUi(){this.updatingFilterUi=!0,this.emptyFilterForm(),this.updateUrl(),this.updatingFilterUi=!1},async toggleModalityFilter(e){const t=e.srcElement.getAttribute("data-value");let r=!0;t=="all"?r=!0:t=="none"&&(r=!1);for(const[n,a]of Object.entries(this.filterModalities))this.filterModalities[n]=r},modalityFilterClicked(e){e.stopPropagation()},closeModalityFilter(e){$$1("#dropdown-modalities-button").click(),e.preventDefault(),e.stopPropagation()},updateUrl(){let e=[];this.clipFilter("StudyDate",this.filterStudyDate)&&e.push("StudyDate="+this.filterStudyDate),this.clipFilter("AccessionNumber",this.filterAccessionNumber)&&e.push("AccessionNumber="+this.filterAccessionNumber),this.clipFilter("PatientID",this.filterPatientID)&&e.push("PatientID="+this.filterPatientID),this.clipFilter("PatientName",this.filterPatientName)&&e.push("PatientName="+this.filterPatientName),this.clipFilter("PatientBirthDate",this.filterPatientBirthDate)&&e.push("PatientBirthDate="+this.filterPatientBirthDate),this.clipFilter("StudyDescription",this.filterStudyDescription)&&e.push("StudyDescription="+this.filterStudyDescription),this.getModalityFilter()&&e.push("ModalitiesInStudy="+this.getModalityFilter()),e.push("remoteMode="+this.remoteMode),e.push("remoteSource="+this.remoteSource);let t="";e.length>0&&(t="/filtered-remote-studies?"+e.join("&")),this.updatingRoute=!0,this.$router.replace(t)}},components:{RemoteStudyItem}},_hoisted_1$7={class:"table table-responsive table-sm study-table"},_hoisted_2$6=createBaseVNode("th",{width:"2%",scope:"col",class:"study-table-header"},null,-1),_hoisted_3$5=createBaseVNode("th",{width:"5%",scope:"col",class:"study-table-header"},null,-1),_hoisted_4$5=["title","width"],_hoisted_5$4={scope:"col",class:"px-2"},_hoisted_6$4=createBaseVNode("i",{class:"fa-regular fa-circle-xmark"},null,-1),_hoisted_7$3=[_hoisted_6$4],_hoisted_8$3={scope:"col",class:"search-button"},_hoisted_9$2={key:0,class:"fa-solid fa-magnifying-glass"},_hoisted_10$2={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},_hoisted_11$2={key:5,class:"dropdown"},_hoisted_12$2=createBaseVNode("button",{type:"button",class:"btn btn-default btn-sm filter-button dropdown-toggle","data-bs-toggle":"dropdown",id:"dropdown-modalities-button","aria-expanded":"false"},[createBaseVNode("span",{class:"fa fa-list"}),createTextVNode(" "),createBaseVNode("span",{class:"caret"})],-1),_hoisted_13$2={class:"dropdown-item"},_hoisted_14$1={class:"dropdown-item"},_hoisted_15$1=createBaseVNode("li",null,[createBaseVNode("hr",{class:"dropdown-divider"})],-1),_hoisted_16$1={class:"dropdown-item"},_hoisted_17$1=["data-value","onUpdate:modelValue"],_hoisted_18$1={key:0,class:"alert alert-warning bottom-fixed-alert",role:"alert"},_hoisted_19$1=createBaseVNode("i",{class:"bi bi-exclamation-triangle-fill"},null,-1),_hoisted_20$1={key:1,class:"alert alert-warning bottom-fixed-alert",role:"alert"},_hoisted_21$1=createBaseVNode("i",{class:"bi bi-exclamation-triangle-fill"},null,-1),_hoisted_22$1={key:2,class:"alert alert-secondary bottom-fixed-alert",role:"alert"},_hoisted_23$1={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function _sfc_render$7(e,t,r,n,a,o){const l=resolveComponent("RemoteStudyItem");return openBlock(),createElementBlock("div",null,[createBaseVNode("table",_hoisted_1$7,[createBaseVNode("thead",null,[_hoisted_2$6,_hoisted_3$5,(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyListColumns,f=>(openBlock(),createElementBlock("th",{key:f,"data-bs-toggle":"tooltip",title:o.columnTooltip(f),width:a.columns[f].width,class:normalizeClass("study-table-header cut-text "+a.columns[f].extraClasses)},toDisplayString(o.columnTitle(f)),11,_hoisted_4$5))),128))]),createBaseVNode("thead",{class:"study-filter",onKeyup:t[14]||(t[14]=withKeys((...f)=>o.search&&o.search(...f),["enter"]))},[createBaseVNode("th",_hoisted_5$4,[createBaseVNode("button",{onClick:t[0]||(t[0]=(...f)=>o.clearFilters&&o.clearFilters(...f)),type:"button",class:"form-control study-list-filter btn filter-button","data-bs-toggle":"tooltip",title:"Clear filter"},_hoisted_7$3)]),createBaseVNode("th",_hoisted_8$3,[createBaseVNode("button",{onClick:t[1]||(t[1]=(...f)=>o.search&&o.search(...f)),type:"submit",class:normalizeClass(["form-control study-list-filter btn filter-button btn-secondary",{"is-searching":a.isSearching,"is-not-searching":!a.isSearching}]),"data-bs-toggle":"tooltip",title:"Search"},[a.isSearching?createCommentVNode("",!0):(openBlock(),createElementBlock("i",_hoisted_9$2)),a.isSearching?(openBlock(),createElementBlock("span",_hoisted_10$2)):createCommentVNode("",!0)],2)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.StudyListColumns,f=>(openBlock(),createElementBlock("th",{key:f},[f=="StudyDate"?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"text",class:normalizeClass(["form-control study-list-filter",o.getFilterClass("StudyDate")]),"onUpdate:modelValue":t[2]||(t[2]=m=>a.filterStudyDate=m),placeholder:"20220130"},null,2)),[[vModelText,a.filterStudyDate]]):createCommentVNode("",!0),f=="AccessionNumber"?withDirectives((openBlock(),createElementBlock("input",{key:1,type:"text",class:normalizeClass(["form-control study-list-filter",o.getFilterClass("AccessionNumber")]),"onUpdate:modelValue":t[3]||(t[3]=m=>a.filterAccessionNumber=m),placeholder:"1234"},null,2)),[[vModelText,a.filterAccessionNumber]]):createCommentVNode("",!0),f=="PatientID"?withDirectives((openBlock(),createElementBlock("input",{key:2,type:"text",class:normalizeClass(["form-control study-list-filter",o.getFilterClass("PatientID")]),"onUpdate:modelValue":t[4]||(t[4]=m=>a.filterPatientID=m),placeholder:"1234"},null,2)),[[vModelText,a.filterPatientID]]):createCommentVNode("",!0),f=="PatientName"?withDirectives((openBlock(),createElementBlock("input",{key:3,type:"text",class:normalizeClass(["form-control study-list-filter",o.getFilterClass("PatientName")]),"onUpdate:modelValue":t[5]||(t[5]=m=>a.filterPatientName=m),placeholder:"John^Doe"},null,2)),[[vModelText,a.filterPatientName]]):createCommentVNode("",!0),f=="PatientBirthDate"?withDirectives((openBlock(),createElementBlock("input",{key:4,type:"text",class:normalizeClass(["form-control study-list-filter",o.getFilterClass("PatientBirthDate")]),"onUpdate:modelValue":t[6]||(t[6]=m=>a.filterPatientBirthDate=m),placeholder:"19740815"},null,2)),[[vModelText,a.filterPatientBirthDate]]):createCommentVNode("",!0),f=="modalities"?(openBlock(),createElementBlock("div",_hoisted_11$2,[_hoisted_12$2,createBaseVNode("ul",{class:"dropdown-menu","aria-labelledby":"dropdown-modalities-button",onClick:t[12]||(t[12]=(...m)=>o.modalityFilterClicked&&o.modalityFilterClicked(...m)),id:"modality-filter-dropdown"},[createBaseVNode("li",null,[createBaseVNode("label",_hoisted_13$2,[withDirectives(createBaseVNode("input",{type:"checkbox","data-value":"all",onClick:t[7]||(t[7]=(...m)=>o.toggleModalityFilter&&o.toggleModalityFilter(...m)),"onUpdate:modelValue":t[8]||(t[8]=m=>a.allModalities=m)},null,512),[[vModelCheckbox,a.allModalities]]),createTextVNode(" "+toDisplayString(e.$t("all_modalities")),1)])]),createBaseVNode("li",null,[createBaseVNode("label",_hoisted_14$1,[withDirectives(createBaseVNode("input",{type:"checkbox","data-value":"none",onClick:t[9]||(t[9]=(...m)=>o.toggleModalityFilter&&o.toggleModalityFilter(...m)),"onUpdate:modelValue":t[10]||(t[10]=m=>a.noneModalities=m)},null,512),[[vModelCheckbox,a.noneModalities]]),createTextVNode(" "+toDisplayString(e.$t("no_modalities")),1)])]),_hoisted_15$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(e.uiOptions.ModalitiesFilter,m=>(openBlock(),createElementBlock("li",{key:m},[createBaseVNode("label",_hoisted_16$1,[withDirectives(createBaseVNode("input",{type:"checkbox","data-value":m,"onUpdate:modelValue":_=>a.filterModalities[m]=_},null,8,_hoisted_17$1),[[vModelCheckbox,a.filterModalities[m]]]),createTextVNode(" "+toDisplayString(m),1)])]))),128)),createBaseVNode("li",null,[createBaseVNode("button",{class:"btn btn-primary mx-5",onClick:t[11]||(t[11]=(...m)=>o.closeModalityFilter&&o.closeModalityFilter(...m)),"data-bs-toggle":"dropdown"},toDisplayString(e.$t("close")),1)])])])):createCommentVNode("",!0),f=="StudyDescription"?withDirectives((openBlock(),createElementBlock("input",{key:6,type:"text",class:"form-control study-list-filter","onUpdate:modelValue":t[13]||(t[13]=m=>a.filterStudyDescription=m),placeholder:"Chest"},null,512)),[[vModelText,a.filterStudyDescription]]):createCommentVNode("",!0)]))),128))],32),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.studies,(f,m)=>(openBlock(),createBlock(l,{key:f.StudyInstanceUID,studyFields:f,id:m,remoteMode:this.remoteMode,remoteSource:this.remoteSource},null,8,["studyFields","id","remoteMode","remoteSource"]))),128))]),!a.isSearching&&o.isFilterEmpty?(openBlock(),createElementBlock("div",_hoisted_18$1,[_hoisted_19$1,createTextVNode(" "+toDisplayString(e.$t("enter_search")),1)])):!a.isSearching&&o.isStudyListEmpty?(openBlock(),createElementBlock("div",_hoisted_20$1,[_hoisted_21$1,createTextVNode(" "+toDisplayString(e.$t("no_result_found")),1)])):a.isSearching?(openBlock(),createElementBlock("div",_hoisted_22$1,[a.isSearching?(openBlock(),createElementBlock("span",_hoisted_23$1)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(e.$t("searching"))+" ! ",1)])):createCommentVNode("",!0)])}const RemoteStudyList=_export_sfc(_sfc_main$7,[["render",_sfc_render$7]]);var uppie_min={exports:{}};/*! uppie v1.1.4 | (c) silverwind | BSD license */(function(e){(function(t,r){e.exports?e.exports=r():t.Uppie=r()})(typeof self<"u"?self:commonjsGlobal,function(){return function(){var o={name:"files[]"};return function(l,f,m){typeof f=="function"?(m=f,f=o):(f||(f={}),f.name||(f.name=o.name)),l instanceof NodeList?[].slice.call(l).forEach(function(_){t(_,f,m)}):t(l,f,m)}};function t(o,l,f){if(o.tagName&&o.tagName.toLowerCase()==="input"&&o.type==="file")o.addEventListener("change",function(_){var b=_.target;b.files&&b.files.length?n(b,l,f.bind(null,_)):"getFilesAndDirectories"in b?r(b,l,f.bind(null,_)):f(_)});else{var m=function(_){_.preventDefault()};o.addEventListener("dragover",m),o.addEventListener("dragenter",m),o.addEventListener("drop",function(_){_.preventDefault();var b=_.dataTransfer;b.items&&b.items.length&&"webkitGetAsEntry"in b.items[0]&&b.items[0].webkitGetAsEntry()?function(k,D,x){var A=new FormData,H=[],Q=[];function q(j,de,ge){de||(de=j.name),a(j,0,0,function(ye){var Te=[];ye.forEach(function(d){Te.push(new Promise(function(ie){d.isFile?d.file(function(re){var ke=de+"/"+re.name;A.append(D.name,re,ke),H.push(ke),ie()},ie.bind()):q(d,de+"/"+d.name,ie)}))}),Promise.all(Te).then(ge.bind())})}[].slice.call(k).forEach(function(j){(j=j.webkitGetAsEntry())&&Q.push(new Promise(function(de){j.isFile?j.file(function(ge){A.append(D.name,ge,ge.name),H.push(ge.name),de()},de.bind()):j.isDirectory&&q(j,null,de)}))}),Promise.all(Q).then(x.bind(null,A,H))}(b.items,l,f.bind(null,_)):"getFilesAndDirectories"in b?r(b,l,f.bind(null,_)):b.files?n(b,l,f.bind(null,_)):f(_)})}}function r(o,l,f){var m=new FormData,_=[],b=function(k,D,x){var A=[];k.forEach(function(H){A.push(new Promise(function(Q){if("getFilesAndDirectories"in H)H.getFilesAndDirectories().then(function(j){b(j,H.path+"/",Q)});else{if(H.name){var q=(D+H.name).replace(/^[/\\]/,"");m.append(l.name,H,q),_.push(q)}Q()}}))}),Promise.all(A).then(x)};o.getFilesAndDirectories().then(function(k){new Promise(function(D){b(k,"/",D)}).then(f.bind(null,m,_))})}function n(o,l,f){var m=new FormData,_=[];[].slice.call(o.files).forEach(function(b){m.append(l.name,b,b.webkitRelativePath||b.name),_.push(b.webkitRelativePath||b.name)}),f(m,_)}function a(o,l,f,m){var _=l||o.createReader();_.readEntries(function(b){var k=f?f.concat(b):b;b.length?setTimeout(a.bind(null,o,_,k,m),0):m(k)})}})})(uppie_min);var uppie_minExports=uppie_min.exports;const Uppie=getDefaultExportFromCjs(uppie_minExports),UploadReport_vue_vue_type_style_index_0_scoped_55c2c5b0_lang="",_sfc_main$6={props:["report"],emits:["deletedUploadReport"],data(){return{}},mounted(){},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions}),pctSuccess(){return 100*this.report.successFilesCount/this.report.filesCount},pctSkipped(){return 100*this.report.skippedFilesCount/this.report.filesCount},pctFailed(){return 100*this.report.failedFilesCount/this.report.filesCount}},methods:{close(e){this.$emit("deletedUploadReport",e)},getStudyLine(e,t,r){let n=[];for(let a of this.uiOptions.UploadReportTags)a in t&&t[a]&&t[a].length>0?n.push(t[a]):a in r&&r[a]&&r[a].length>0&&n.push(r[a]);return n.length==0&&n.push(e.slice(0,20)+"..."),n.slice(0,this.uiOptions.UploadReportMaxTags).join(" - ")}},components:{Modal}},_withScopeId$3=e=>(pushScopeId("data-v-55c2c5b0"),e=e(),popScopeId(),e),_hoisted_1$6={class:"card border-secondary job-card"},_hoisted_2$5={class:"card-header jobs-header"},_hoisted_3$4={class:"progress",style:{width:"90%"}},_hoisted_4$4=["data-bs-target"],_hoisted_5$3={class:"table table-sm"},_hoisted_6$3={width:"50%"},_hoisted_7$2={width:"50%"},_hoisted_8$2={class:"text-right"},_hoisted_9$1={class:"card-body text-secondary jobs-body"},_hoisted_10$1={class:"card-text"},_hoisted_11$1={class:"upload-details"},_hoisted_12$1=_withScopeId$3(()=>createBaseVNode("br",null,null,-1)),_hoisted_13$1=_withScopeId$3(()=>createBaseVNode("br",null,null,-1));function _sfc_render$6(e,t,r,n,a,o){const l=resolveComponent("Modal"),f=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$5,[createTextVNode(toDisplayString(e.$t("upload"))+" "+toDisplayString(r.report.filesCount)+" "+toDisplayString(e.$t("files"))+" ",1),createBaseVNode("button",{type:"button",class:"btn-close job-card-close","aria-label":"Close",onClick:t[0]||(t[0]=m=>o.close(r.report.id))}),createBaseVNode("div",_hoisted_3$4,[createBaseVNode("div",{class:"progress-bar bg-success",role:"progressbar",style:normalizeStyle("width: "+this.pctSuccess+"%")},null,4),createBaseVNode("div",{class:"progress-bar bg-secondary",role:"progressbar",style:normalizeStyle("width: "+this.pctSkipped+"%")},null,4),createBaseVNode("div",{class:"progress-bar bg-danger",role:"progressbar",style:normalizeStyle("width: "+this.pctFailed+"%")},null,4)]),withDirectives(createBaseVNode("div",null,[createBaseVNode("button",{class:"btn btn-sm btn-secondary m-1",type:"button","data-bs-toggle":"modal","data-bs-target":"#upload-errors-modal-"+this.report.id},toDisplayString(e.$t("show_errors")),9,_hoisted_4$4),createVNode(l,{id:"upload-errors-modal-"+this.report.id,headerText:"Upload error report",okText:"Close",onOk:t[1]||(t[1]=m=>o.close(m))},{modalBody:withCtx(()=>[createBaseVNode("table",_hoisted_5$3,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_6$3,toDisplayString(e.$t("file")),1),createBaseVNode("th",_hoisted_7$2,toDisplayString(e.$t("error")),1)])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.report.errorMessages,(m,_)=>(openBlock(),createElementBlock("tr",{key:m},[createBaseVNode("td",null,toDisplayString(_),1),createBaseVNode("td",_hoisted_8$2,toDisplayString(m),1)]))),128))])])]),_:1},8,["id"])],512),[[vShow,Object.keys(r.report.errorMessages).length>0]])]),createBaseVNode("div",_hoisted_9$1,[createBaseVNode("p",_hoisted_10$1,[createBaseVNode("span",_hoisted_11$1,toDisplayString(e.$t("uploaded_studies"))+":",1),_hoisted_12$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(r.report.uploadedStudies,(m,_)=>(openBlock(),createElementBlock("span",{key:_},[createVNode(f,{to:"/filtered-studies?StudyInstanceUID="+m.MainDicomTags.StudyInstanceUID+"&expand=study",class:"upload-details-study"},{default:withCtx(()=>[createTextVNode(toDisplayString(this.getStudyLine(_,m.MainDicomTags,m.PatientMainDicomTags)),1)]),_:2},1032,["to"]),_hoisted_13$1]))),128))])])])}const UploadReport=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-55c2c5b0"]]),UploadHandler_vue_vue_type_style_index_0_scoped_936940b4_lang="";async function getAllFileEntries(e){let t=[],r=[];for(let n=0;n<e.length;n++)r.push(e[n].webkitGetAsEntry());for(;r.length>0;){let n=r.shift();if(n.isFile)t.push(n);else if(n.isDirectory){let a=n.createReader();r.push(...await readAllDirectoryEntries(a))}}return t}async function getFileFromFileEntry(e){try{return await new Promise((t,r)=>e.file(t,r))}catch(t){console.error("getFileFromFileEntry",t)}}async function getAllFiles(e){let t=await getAllFileEntries(e),r=[];for(let n of t)r.push(await getFileFromFileEntry(n));return r}async function readAllDirectoryEntries(e){let t=[],r=await readEntriesPromise(e);for(;r.length>0;)t.push(...r),r=await readEntriesPromise(e);return t}async function readEntriesPromise(e){try{return await new Promise((t,r)=>{e.readEntries(t,r)})}catch(t){console.error("readEntriesPromise",t)}}function readFileAsync(e){return new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=r,n.readAsArrayBuffer(e)})}const _sfc_main$5={props:[],data(){return{uppie:null,uploadCounter:0,lastUploadReports:{}}},mounted(){this.uppie=new Uppie,this.uppie(document.querySelector("#filesUpload"),this.uppieUploadHandler),this.uppie(document.querySelector("#foldersUpload"),this.uppieUploadHandler)},methods:{onDrop(e){e.preventDefault(),getAllFiles(e.dataTransfer.items).then(t=>{this.uploadFiles(t)})},onDragOver(e){e.preventDefault()},onDeletedUploadReport(e){delete this.lastUploadReports[e]},async uploadedFile(e,t){let r=t.ParentStudy;if(!this.lastUploadReports[e].uploadedStudiesIds.has(r)){this.lastUploadReports[e].uploadedStudiesIds.add(r);const n=await api.getStudy(r);this.lastUploadReports[e].uploadedStudies[r]=n,this.$store.dispatch("studies/addStudy",{study:n,studyId:r})}},async uploadFiles(e){let t=this.uploadCounter++;this.lastUploadReports[t]={id:t,filesCount:e.length,successFilesCount:0,failedFilesCount:0,skippedFilesCount:0,uploadedStudiesIds:new Set,uploadedStudies:{},errorMessages:{}};for(let r of e){let n=r.webkitRelativePath||r.name;if(r.name=="DICOMDIR"){console.log("upload: skipping DICOMDIR file"),this.lastUploadReports[t].skippedFilesCount++,this.lastUploadReports[t].errorMessages[n]="skipped";continue}const a=await readFileAsync(r);try{const o=await api.uploadFile(a);if(Array.isArray(o))if(o.length>0){this.lastUploadReports[t].successFilesCount++;for(let l of o)this.uploadedFile(t,l)}else this.lastUploadReports[t].failedFilesCount++,this.lastUploadReports[t].errorMessages[n]="no valid DICOM files found in zip";else this.lastUploadReports[t].successFilesCount++,this.uploadedFile(t,o)}catch(o){console.error("uploadFiles",o);let l="error "+o.response.status;o.response.status>=400&&o.response.status<500&&(l=o.response.data.Message),this.lastUploadReports[t].failedFilesCount++,this.lastUploadReports[t].errorMessages[n]=l}}},async uppieUploadHandler(e,t,r){this.uploadFiles(e.target.files)}},components:{UploadReport}},_withScopeId$2=e=>(pushScopeId("data-v-936940b4"),e=e(),popScopeId(),e),_hoisted_1$5={class:"mb-3"},_hoisted_2$4={class:"mb-3"},_hoisted_3$3={class:"btn btn-primary btn-file"},_hoisted_4$3=_withScopeId$2(()=>createBaseVNode("input",{type:"file",style:{display:"none"},id:"foldersUpload",required:"",multiple:"",directory:"",webkitdirectory:"",allowdirs:""},null,-1)),_hoisted_5$2={class:"mb-3"},_hoisted_6$2={class:"btn btn-primary btn-file"},_hoisted_7$1=_withScopeId$2(()=>createBaseVNode("input",{type:"file",style:{display:"none"},id:"filesUpload",required:"",multiple:""},null,-1)),_hoisted_8$1={class:"upload-report-list"};function _sfc_render$5(e,t,r,n,a,o){const l=resolveComponent("UploadReport");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"upload-handler-drop-zone",onDrop:t[0]||(t[0]=(...f)=>this.onDrop&&this.onDrop(...f)),onDragover:t[1]||(t[1]=(...f)=>this.onDragOver&&this.onDragOver(...f))},[createBaseVNode("div",_hoisted_1$5,toDisplayString(e.$t("drop_files")),1),createBaseVNode("div",_hoisted_2$4,[createBaseVNode("label",_hoisted_3$3,[createTextVNode(toDisplayString(e.$t("select_folder"))+" ",1),_hoisted_4$3])]),createBaseVNode("div",_hoisted_5$2,[createBaseVNode("label",_hoisted_6$2,[createTextVNode(toDisplayString(e.$t("select_files"))+" ",1),_hoisted_7$1])])],32),createBaseVNode("div",_hoisted_8$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.lastUploadReports,(f,m)=>(openBlock(),createBlock(l,{report:f,key:m,onDeletedUploadReport:o.onDeletedUploadReport},null,8,["report","onDeletedUploadReport"]))),128))])])}const UploadHandler=_export_sfc(_sfc_main$5,[["render",_sfc_render$5],["__scopeId","data-v-936940b4"]]),JobItem_vue_vue_type_style_index_0_scoped_a6de126d_lang="",_sfc_main$4={props:["job"],emits:["deletedJob"],data(){return{isComplete:!1,isRunning:!1,isSuccess:!1,pctComplete:0,pctFailed:0,pctRemaining:100,refreshTimeout:200}},mounted(){},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions})},methods:{close(e){this.$emit("deletedJob",e)},async refresh(e){const t=await api.getJobStatus(e);this.isComplete=t.State=="Success"||t.State=="Failure",this.isRunning=t.State=="Running",this.isSuccess=t.State=="Success",this.isComplete?(this.pctRemaining=0,this.isSuccess?(this.pctComplete=100,this.pctFailed=0):(this.pctComplete=0,this.pctFailed=100)):(this.pctFailed=0,this.pctComplete=t.Progress,this.pctRemaining=100-this.pctComplete),this.isComplete||(this.refreshTimeout=Math.min(this.refreshTimeout+200,2e3),setTimeout(this.refresh,this.refreshTimeout,[e]))}},async mounted(){this.refresh(this.job.id)},components:{Modal}},_withScopeId$1=e=>(pushScopeId("data-v-a6de126d"),e=e(),popScopeId(),e),_hoisted_1$4={class:"card border-secondary job-card"},_hoisted_2$3={class:"card-header jobs-header"},_hoisted_3$2={class:"progress",style:{width:"90%"}},_hoisted_4$2=_withScopeId$1(()=>createBaseVNode("div",{class:"card-body text-secondary jobs-body"},[createBaseVNode("p",{class:"card-text"})],-1));function _sfc_render$4(e,t,r,n,a,o){return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$3,[createTextVNode(toDisplayString(r.job.name)+" ",1),createBaseVNode("button",{type:"button",class:"btn-close job-card-close","aria-label":"Close",onClick:t[0]||(t[0]=l=>o.close(r.job.id))}),createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",{class:"progress-bar bg-success",role:"progressbar",style:normalizeStyle("width: "+this.pctComplete+"%")},null,4),createBaseVNode("div",{class:"progress-bar bg-secondary",role:"progressbar",style:normalizeStyle("width: "+this.pctRemaining+"%")},null,4),createBaseVNode("div",{class:"progress-bar bg-danger",role:"progressbar",style:normalizeStyle("width: "+this.pctFailed+"%")},null,4)])]),_hoisted_4$2])}const JobItem=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__scopeId","data-v-a6de126d"]]),JobsList_vue_vue_type_style_index_0_scoped_566a5fdc_lang="",_sfc_main$3={props:[],data(){return{}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,jobs:e=>e.jobs.jobs,jobsIds:e=>e.jobs.jobsIds})},mounted(){},methods:{onDeletedJobItem(e){this.$store.dispatch("jobs/removeJob",{jobId:e})},getJob(e){return this.jobs[e]}},components:{JobItem}},_hoisted_1$3={class:"upload-report-list"};function _sfc_render$3(e,t,r,n,a,o){const l=resolveComponent("JobItem");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.jobsIds,f=>(openBlock(),createBlock(l,{job:this.getJob(f),key:f,href:f,onDeletedJob:o.onDeletedJobItem},null,8,["job","href","onDeletedJob"]))),128))])])}const JobsList=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-566a5fdc"]]);let allLanguages=[{name:"English",key:"en"},{name:"Deutsche",key:"de"},{name:"Español",key:"es"},{name:"Français",key:"fr"},{name:"Italiano",key:"it"},{name:"ქართული",key:"ka"},{name:"Українська",key:"uk"},{name:"中文",key:"zh"}];const LanguagePicker_vue_vue_type_style_index_0_lang="",_sfc_main$2={name:"App",props:[],data(){return{availableLanguages:["en"],selectedLanguageName:""}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,isConfigurationLoaded:e=>e.configuration.loaded}),showLanguagePicker(){return this.availableLanguages.length>1},pickableLanguages(){if(this.availableLanguages==null)return allLanguages;{let e=[];for(let t of this.availableLanguages)for(let r of allLanguages)r.key==t&&e.push(r);return e}}},watch:{isConfigurationLoaded(e,t){this.availableLanguages=this.uiOptions.AvailableLanguages;let r=!1;if(this.availableLanguages.length==1){let n=this.availableLanguages[0];console.log("language picker: selecting first and only language: ",n),r=this.changeLanguage(n)}else if(this.availableLanguages.length>1){if(localStorage.getItem("OE2.languageKey")!=null&&(console.log("language picker: selecting language from the local storage"),r=this.changeLanguage(localStorage.getItem("OE2.languageKey"))),!r&&this.uiOptions.DefaultLanguage!=null&&(console.log("language picker: selecting language from DefaultLanguage configuration"),r=this.changeLanguage(this.uiOptions.DefaultLanguage)),!r&&(console.log("language picker: selecting language from the browser languages"),navigator.languages&&navigator.languages.length>0))for(let n of navigator.languages){let a=n.split("-")[0];if(r=this.changeLanguage(a),r)break}r||(r=this.changeLanguage(this.availableLanguages[0]))}}},created(){this.selectedLanguageName="English"},methods:{changeLanguage(e){let t=null;for(let r of allLanguages)r.key==e&&(t=r.name);return t!=null?(this.$i18n.locale=e,this.selectedLanguageName=t,localStorage.setItem("OE2.languageKey",e),this.messageBus.emit("language-changed",e),!0):!1}}},_hoisted_1$2={key:0,class:"dropdown"},_hoisted_2$2={class:"btn btn-sm btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},_hoisted_3$1=createBaseVNode("i",{class:"bi bi-translate"},null,-1),_hoisted_4$1={class:"dropdown-menu language-picker"},_hoisted_5$1=["value"],_hoisted_6$1=["onClick"];function _sfc_render$2(e,t,r,n,a,o){return o.showLanguagePicker?(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("button",_hoisted_2$2,[_hoisted_3$1,createTextVNode(" "+toDisplayString(a.selectedLanguageName),1)]),createBaseVNode("ul",_hoisted_4$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.pickableLanguages,(l,f)=>(openBlock(),createElementBlock("li",{key:`lang-${f}`,value:l},[createBaseVNode("a",{class:"dropdown-item",href:"#",onClick:m=>o.changeLanguage(`${l.key}`)},toDisplayString(l.name),9,_hoisted_6$1)],8,_hoisted_5$1))),128))])])):createCommentVNode("",!0)}const LanguagePicker=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_imports_0=""+new URL("orthanc-d04ef60d.png",import.meta.url).href,SideBar_vue_vue_type_style_index_0_scoped_c966c387_lang="",_sfc_main$1={props:[],emits:[],data(){return{selectedModality:null,selectedLabel:null,modalitiesEchoStatus:{}}},computed:{...mapState({uiOptions:e=>e.configuration.uiOptions,userProfile:e=>e.configuration.userProfile,system:e=>e.configuration.system,queryableDicomModalities:e=>e.configuration.queryableDicomModalities,queryableDicomWebServers:e=>e.configuration.queryableDicomWebServers,studiesIds:e=>e.studies.studiesIds,statistics:e=>e.studies.statistics,labelsFilter:e=>e.studies.labelsFilter,jobs:e=>e.jobs.jobsIds,allLabels:e=>e.labels.allLabels}),hasQueryableDicomWebServers(){return!1},hasQueryableDicomModalities(){return this.uiOptions.EnableDicomModalities&&this.queryableDicomModalities.length>0},hasAccessToSettings(){return this.uiOptions.EnableSettings},hasJobs(){return this.jobs.length>0},hasLogout(){return window.keycloak!==void 0},hasUserProfile(){return this.userProfile!=null&&this.userProfile.name},displayedStudyCount(){return this.studiesIds.length},orthancApiUrl(){return orthancApiUrl}},methods:{selectModality(e){this.selectedModality=e},isSelectedModality(e){return this.selectedModality===e},isEchoRunning(e){return this.modalitiesEchoStatus[e]==null},isEchoSuccess(e){return this.modalitiesEchoStatus[e]==!0},selectLabel(e){this.selectedLabel=e,this.messageBus.emit("filter-label-changed",e)},isSelectedLabel(e){return this.labelsFilter.includes(e)},onAllLabelsChanged(){this.$store.dispatch("labels/refresh")},logout(e){e.preventDefault();let t={redirectUri:window.location.href};window.keycloak.logout(t).then(r=>{console.log("logout success",r)}).catch(r=>{console.error("logout failed",r)})},changePassword(e){e.preventDefault(),window.keycloak.login({action:"UPDATE_PASSWORD"}).then(t=>{console.log("login for password change success",t)}).catch(t=>{console.error("login for password change failed",t)})}},mounted(){this.$refs["modalities-collapsible"].addEventListener("show.bs.collapse",e=>{for(const t of this.queryableDicomModalities)this.modalitiesEchoStatus[t]=null;for(const t of this.queryableDicomModalities)api.remoteModalityEcho(t).then(r=>{this.modalitiesEchoStatus[t]=!0}).catch(()=>{this.modalitiesEchoStatus[t]=!1})})},components:{UploadHandler,JobsList,LanguagePicker}},_withScopeId=e=>(pushScopeId("data-v-c966c387"),e=e(),popScopeId(),e),_hoisted_1$1={class:"nav-side-menu"},_hoisted_2$1=_withScopeId(()=>createBaseVNode("div",null,[createBaseVNode("img",{class:"orthanc-logo",src:_imports_0,height:"48"})],-1)),_hoisted_3={key:0,class:"orthanc-name"},_hoisted_4={class:"menu-list"},_hoisted_5={id:"menu-content",class:"menu-content collapse out"},_hoisted_6={class:"d-flex align-items-center fix-router-link"},_hoisted_7=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-x-ray fa-lg menu-icon"},null,-1)),_hoisted_8={class:"study-count ms-auto"},_hoisted_9={key:0,class:"sub-menu",id:"labels-list"},_hoisted_10=["onClick"],_hoisted_11=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-tag label-icon"},null,-1)),_hoisted_12={key:1,class:"d-flex align-items-center","data-bs-toggle":"collapse","data-bs-target":"#upload-handler"},_hoisted_13=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-file-upload fa-lg menu-icon"},null,-1)),_hoisted_14=_withScopeId(()=>createBaseVNode("span",{class:"ms-auto"},null,-1)),_hoisted_15={key:2,class:"collapse",id:"upload-handler"},_hoisted_16={key:3,class:"d-flex align-items-center","data-bs-toggle":"collapse","data-bs-target":"#modalities-list"},_hoisted_17=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-radiation fa-lg menu-icon"},null,-1)),_hoisted_18=_withScopeId(()=>createBaseVNode("span",{class:"arrow ms-auto"},null,-1)),_hoisted_19={class:"sub-menu collapse",id:"modalities-list",ref:"modalities-collapsible"},_hoisted_20=["onClick"],_hoisted_21={key:0,class:"ms-auto spinner-border spinner-border-sm","data-bs-toggle":"tooltip",title:"Checking connectivity"},_hoisted_22={key:1,class:"ms-auto"},_hoisted_23=_withScopeId(()=>createBaseVNode("i",{class:"bi bi-check2 text-success echo-status","data-bs-toggle":"tooltip",title:"C-Echo succeeded"},null,-1)),_hoisted_24=[_hoisted_23],_hoisted_25={key:2,class:"ms-auto"},_hoisted_26=_withScopeId(()=>createBaseVNode("i",{class:"bi bi-x-lg text-danger echo-status","data-bs-toggle":"tooltip",title:"C-Echo failed"},null,-1)),_hoisted_27=[_hoisted_26],_hoisted_28={key:4,class:"d-flex align-items-center","data-bs-toggle":"collapse","data-bs-target":"#dicomweb-servers-list"},_hoisted_29=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-globe fa-lg menu-icon"},null,-1)),_hoisted_30=_withScopeId(()=>createBaseVNode("span",{class:"arrow ms-auto"},null,-1)),_hoisted_31={class:"sub-menu collapse",id:"dicomweb-servers-list"},_hoisted_32={href:"#"},_hoisted_33={key:5,class:"d-flex align-items-center fix-router-link"},_hoisted_34=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-cogs fa-lg menu-icon"},null,-1)),_hoisted_35={key:6,class:"d-flex align-items-center fix-router-link"},_hoisted_36=["href"],_hoisted_37=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-solid fa-backward fa-lg menu-icon"},null,-1)),_hoisted_38=_withScopeId(()=>createBaseVNode("span",{class:"ms-auto"},null,-1)),_hoisted_39={key:7,class:"d-flex align-items-center","data-bs-toggle":"collapse","data-bs-target":"#profile-list"},_hoisted_40=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-user fa-lg menu-icon"},null,-1)),_hoisted_41={key:0},_hoisted_42={key:1},_hoisted_43=_withScopeId(()=>createBaseVNode("span",{class:"arrow ms-auto"},null,-1)),_hoisted_44={class:"sub-menu collapse",id:"profile-list",ref:"profile-collapsible"},_hoisted_45={key:0,class:"d-flex align-items-center fix-router-link"},_hoisted_46=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-solid fa-key fa-lg menu-icon"},null,-1)),_hoisted_47=_withScopeId(()=>createBaseVNode("span",{class:"ms-auto"},null,-1)),_hoisted_48={key:1,class:"d-flex align-items-center fix-router-link"},_hoisted_49=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-solid fa-arrow-right-from-bracket fa-lg menu-icon"},null,-1)),_hoisted_50=_withScopeId(()=>createBaseVNode("span",{class:"ms-auto"},null,-1)),_hoisted_51={key:8,class:"d-flex align-items-center"},_hoisted_52={href:"#"},_hoisted_53=_withScopeId(()=>createBaseVNode("i",{class:"fa fa-solid fa-bars-progress fa-lg menu-icon"},null,-1)),_hoisted_54=_withScopeId(()=>createBaseVNode("span",{class:"ms-auto"},null,-1)),_hoisted_55={key:9,class:"collapse show",id:"jobs-list"},_hoisted_56={class:"bottom-side-bar"};function _sfc_render$1(e,t,r,n,a,o){const l=resolveComponent("router-link"),f=resolveComponent("UploadHandler"),m=resolveComponent("JobsList"),_=resolveComponent("LanguagePicker");return openBlock(),createElementBlock("div",_hoisted_1$1,[_hoisted_2$1,e.uiOptions.ShowOrthancName?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("p",null,toDisplayString(e.system.Name),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4,[createBaseVNode("ul",_hoisted_5,[createBaseVNode("li",_hoisted_6,[createVNode(l,{class:"router-link",to:"/"},{default:withCtx(()=>[_hoisted_7,createTextVNode(toDisplayString(e.$t("local_studies"))+" ",1),createBaseVNode("span",_hoisted_8,toDisplayString(o.displayedStudyCount)+" / "+toDisplayString(e.statistics.CountStudies),1)]),_:1})]),e.allLabels.length>0?(openBlock(),createElementBlock("ul",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.allLabels,b=>(openBlock(),createElementBlock("li",{key:b,class:normalizeClass({active:o.isSelectedLabel(b)}),onClick:k=>o.selectLabel(b)},[_hoisted_11,createTextVNode(" "+toDisplayString(b),1)],10,_hoisted_10))),128))])):createCommentVNode("",!0),e.uiOptions.EnableUpload?(openBlock(),createElementBlock("li",_hoisted_12,[_hoisted_13,createTextVNode(toDisplayString(e.$t("upload"))+" ",1),_hoisted_14])):createCommentVNode("",!0),e.uiOptions.EnableUpload?(openBlock(),createElementBlock("div",_hoisted_15,[createVNode(f)])):createCommentVNode("",!0),o.hasQueryableDicomModalities?(openBlock(),createElementBlock("li",_hoisted_16,[_hoisted_17,createTextVNode(toDisplayString(e.$t("dicom_modalities"))+" ",1),_hoisted_18])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_19,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.queryableDicomModalities,b=>(openBlock(),createElementBlock("li",{key:b,class:normalizeClass({active:this.isSelectedModality(b)}),onClick:k=>o.selectModality(b)},[createVNode(l,{class:"router-link",to:{path:"/filtered-remote-studies",query:{remoteMode:"dicom",remoteSource:b}}},{default:withCtx(()=>[createTextVNode(toDisplayString(b),1)]),_:2},1032,["to"]),this.isEchoRunning(b)?(openBlock(),createElementBlock("span",_hoisted_21)):this.isEchoSuccess(b)?(openBlock(),createElementBlock("span",_hoisted_22,_hoisted_24)):(openBlock(),createElementBlock("span",_hoisted_25,_hoisted_27))],10,_hoisted_20))),128))],512),o.hasQueryableDicomWebServers?(openBlock(),createElementBlock("li",_hoisted_28,[_hoisted_29,createTextVNode(toDisplayString(e.$t("dicom_web_servers"))+" ",1),_hoisted_30])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_31,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.queryableDicomWebServers,b=>(openBlock(),createElementBlock("li",{key:b,class:"active"},[createBaseVNode("a",_hoisted_32,toDisplayString(b)+" (TODO)",1)]))),128))]),o.hasAccessToSettings?(openBlock(),createElementBlock("li",_hoisted_33,[createVNode(l,{class:"router-link",to:"/settings"},{default:withCtx(()=>[_hoisted_34,createTextVNode(toDisplayString(e.$t("settings")),1)]),_:1})])):createCommentVNode("",!0),e.uiOptions.EnableLinkToLegacyUi?(openBlock(),createElementBlock("li",_hoisted_35,[createBaseVNode("a",{href:this.orthancApiUrl+"app/explorer.html"},[_hoisted_37,createTextVNode(toDisplayString(e.$t("legacy_ui")),1)],8,_hoisted_36),_hoisted_38])):createCommentVNode("",!0),o.hasLogout?(openBlock(),createElementBlock("li",_hoisted_39,[_hoisted_40,o.hasUserProfile?(openBlock(),createElementBlock("span",_hoisted_41,toDisplayString(e.userProfile.name),1)):createCommentVNode("",!0),o.hasUserProfile?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_42,toDisplayString(e.$t("profile")),1)),_hoisted_43])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_44,[e.uiOptions.EnableChangePassword?(openBlock(),createElementBlock("li",_hoisted_45,[createBaseVNode("a",{href:"#",onClick:t[0]||(t[0]=b=>o.changePassword(b))},[_hoisted_46,createTextVNode(toDisplayString(e.$t("change_password")),1)]),_hoisted_47])):createCommentVNode("",!0),o.hasLogout?(openBlock(),createElementBlock("li",_hoisted_48,[createBaseVNode("a",{href:"#",onClick:t[1]||(t[1]=b=>o.logout(b))},[_hoisted_49,createTextVNode(toDisplayString(e.$t("logout")),1)]),_hoisted_50])):createCommentVNode("",!0)],512),o.hasJobs?(openBlock(),createElementBlock("li",_hoisted_51,[createBaseVNode("a",_hoisted_52,[_hoisted_53,createTextVNode(toDisplayString(e.$t("my_jobs")),1)]),_hoisted_54])):createCommentVNode("",!0),o.hasJobs?(openBlock(),createElementBlock("div",_hoisted_55,[createVNode(m)])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_56,[createVNode(_)])])}const SideBar=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__scopeId","data-v-c966c387"]]),_sfc_main={props:[],data(){return{path:null}},mounted(){this.path=this.$router.currentRoute.value.fullPath}},_hoisted_1={class:"alert alert-danger",role:"alert"},_hoisted_2=createBaseVNode("br",null,null,-1);function _sfc_render(e,t,r,n,a,o){return openBlock(),createElementBlock("div",_hoisted_1,[createTextVNode(toDisplayString(e.$t("page_not_found"))+" ",1),_hoisted_2,createTextVNode(" "+toDisplayString(a.path),1)])}const NotFound=_export_sfc(_sfc_main,[["render",_sfc_render]]);console.log("Base URL for router: ",baseOe2Url);function removeKeyCloakStates(e,t,r){e.path.includes("&state=")?(console.log("removeKeyCloakStates",e,t),r(!1)):r()}const router=createRouter({history:createWebHashHistory(baseOe2Url),routes:[{path:"/",alias:"/index.html",components:{SideBarView:SideBar,ContentView:StudyList}},{path:"/filtered-studies",components:{SideBarView:SideBar,ContentView:StudyList}},{path:"/filtered-remote-studies",components:{SideBarView:SideBar,ContentView:RemoteStudyList}},{path:"/settings",components:{SideBarView:SideBar,ContentView:Settings}},{path:"/:pathMatch(.*)",beforeEnter:removeKeyCloakStates,components:{SideBarView:SideBar,ContentView:NotFound}}]});var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return(r+n)*3/4-n}function _byteLength(e,t,r){return(t+r)*3/4-r}function toByteArray(e){var t,r=getLens(e),n=r[0],a=r[1],o=new Arr(_byteLength(e,n,a)),l=0,f=a>0?n-4:n,m;for(m=0;m<f;m+=4)t=revLookup[e.charCodeAt(m)]<<18|revLookup[e.charCodeAt(m+1)]<<12|revLookup[e.charCodeAt(m+2)]<<6|revLookup[e.charCodeAt(m+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=t&255;return a===2&&(t=revLookup[e.charCodeAt(m)]<<2|revLookup[e.charCodeAt(m+1)]>>4,o[l++]=t&255),a===1&&(t=revLookup[e.charCodeAt(m)]<<10|revLookup[e.charCodeAt(m+1)]<<4|revLookup[e.charCodeAt(m+2)]>>2,o[l++]=t>>8&255,o[l++]=t&255),o}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,r){for(var n,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),a.push(tripletToBase64(n));return a.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,a=[],o=16383,l=0,f=r-n;l<f;l+=o)a.push(encodeChunk(e,l,l+o>f?f:l+o));return n===1?(t=e[r-1],a.push(lookup[t>>2]+lookup[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],a.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),a.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return typeof e=="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(r){return new Sha256(t,!0).update(r)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(a){return t.create().update(a)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createOutputMethod(n,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if(typeof e=="string")return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(e==null)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(r,n){return new HmacSha256(r,t,!0).update(n)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(a){return new HmacSha256(a,e)},t.update=function(a,o){return t.create(a).update(o)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createHmacOutputMethod(n,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}Sha256.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if(r!=="string"){if(r==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var n,a=0,o,l=e.length,f=this.blocks;a<l;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),t)for(o=this.start;a<l&&o<64;++a)f[o>>2]|=e[a]<<SHIFT[o++&3];else for(o=this.start;a<l&&o<64;++a)n=e.charCodeAt(a),n<128?f[o>>2]|=n<<SHIFT[o++&3]:n<2048?(f[o>>2]|=(192|n>>6)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]):n<55296||n>=57344?(f[o>>2]|=(224|n>>12)<<SHIFT[o++&3],f[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]):(n=65536+((n&1023)<<10|e.charCodeAt(++a)&1023),f[o>>2]|=(240|n>>18)<<SHIFT[o++&3],f[o>>2]|=(128|n>>12&63)<<SHIFT[o++&3],f[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=f[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[t&3],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,l=this.h6,f=this.h7,m=this.blocks,_,b,k,D,x,A,H,Q,q,j,de;for(_=16;_<64;++_)x=m[_-15],b=(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3,x=m[_-2],k=(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10,m[_]=m[_-16]+b+m[_-7]+k<<0;for(de=t&r,_=0;_<64;_+=4)this.first?(this.is224?(Q=300032,x=m[0]-1413257819,f=x-150054599<<0,n=x+24177077<<0):(Q=704751109,x=m[0]-210244248,f=x-1521486534<<0,n=x+143694565<<0),this.first=!1):(b=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),k=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),Q=e&t,D=Q^e&r^de,H=a&o^~a&l,x=f+k+H+K[_]+m[_],A=b+D,f=n+x<<0,n=x+A<<0),b=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),k=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),q=n&e,D=q^n&t^Q,H=f&a^~f&o,x=l+k+H+K[_+1]+m[_+1],A=b+D,l=r+x<<0,r=x+A<<0,b=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),k=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),j=r&n,D=j^r&e^q,H=l&f^~l&a,x=o+k+H+K[_+2]+m[_+2],A=b+D,o=t+x<<0,t=x+A<<0,b=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),k=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),de=t&r,D=de^t&n^j,H=o&l^~o&f,x=a+k+H+K[_+3]+m[_+3],A=b+D,a=e+x<<0,e=x+A<<0;this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+a<<0,this.h5=this.h5+o<<0,this.h6=this.h6+l<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,l=this.h6,f=this.h7,m=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[l>>28&15]+HEX_CHARS[l>>24&15]+HEX_CHARS[l>>20&15]+HEX_CHARS[l>>16&15]+HEX_CHARS[l>>12&15]+HEX_CHARS[l>>8&15]+HEX_CHARS[l>>4&15]+HEX_CHARS[l&15];return this.is224||(m+=HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]),m},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,l=this.h6,f=this.h7,m=[e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,l>>24&255,l>>16&255,l>>8&255,l&255];return this.is224||m.push(f>>24&255,f>>16&255,f>>8&255,f&255),m},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};function HmacSha256(e,t,r){var n,a=typeof e;if(a==="string"){var o=[],l=e.length,f=0,m;for(n=0;n<l;++n)m=e.charCodeAt(n),m<128?o[f++]=m:m<2048?(o[f++]=192|m>>6,o[f++]=128|m&63):m<55296||m>=57344?(o[f++]=224|m>>12,o[f++]=128|m>>6&63,o[f++]=128|m&63):(m=65536+((m&1023)<<10|e.charCodeAt(++n)&1023),o[f++]=240|m>>18,o[f++]=128|m>>12&63,o[f++]=128|m>>6&63,o[f++]=128|m&63);e=o}else if(a==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);e.length>64&&(e=new Sha256(t,!0).update(e).array());var _=[],b=[];for(n=0;n<64;++n){var k=e[n]||0;_[n]=92^k,b[n]=54^k}Sha256.call(this,t,r),this.update(b),this.oKeyPad=_,this.inner=!0,this.sharedMemory=r}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(e){if(!(this instanceof Keycloak))return new Keycloak(e);for(var t=this,r,n=[],a,o={enable:!0,callbackList:[],interval:5},l=document.getElementsByTagName("script"),f=0;f<l.length;f++)(l[f].src.indexOf("keycloak.js")!==-1||l[f].src.indexOf("keycloak.min.js")!==-1)&&l[f].src.indexOf("version=")!==-1&&(t.iframeVersion=l[f].src.substring(l[f].src.indexOf("version=")+8).split("&")[0]);var m=!0,_=fe(console.info),b=fe(console.warn);t.init=function(T){t.authenticated=!1,a=W();var I=["default","cordova","cordova-native"];if(T&&I.indexOf(T.adapter)>-1?r=w(T.adapter):T&&typeof T.adapter=="object"?r=T.adapter:window.Cordova||window.cordova?r=w("cordova"):r=w(),T){if(typeof T.useNonce<"u"&&(m=T.useNonce),typeof T.checkLoginIframe<"u"&&(o.enable=T.checkLoginIframe),T.checkLoginIframeInterval&&(o.interval=T.checkLoginIframeInterval),T.onLoad==="login-required"&&(t.loginRequired=!0),T.responseMode)if(T.responseMode==="query"||T.responseMode==="fragment")t.responseMode=T.responseMode;else throw"Invalid value for responseMode";if(T.flow){switch(T.flow){case"standard":t.responseType="code";break;case"implicit":t.responseType="id_token token";break;case"hybrid":t.responseType="code id_token token";break;default:throw"Invalid value for flow"}t.flow=T.flow}if(T.timeSkew!=null&&(t.timeSkew=T.timeSkew),T.redirectUri&&(t.redirectUri=T.redirectUri),T.silentCheckSsoRedirectUri&&(t.silentCheckSsoRedirectUri=T.silentCheckSsoRedirectUri),typeof T.silentCheckSsoFallback=="boolean"?t.silentCheckSsoFallback=T.silentCheckSsoFallback:t.silentCheckSsoFallback=!0,T.pkceMethod){if(T.pkceMethod!=="S256")throw"Invalid value for pkceMethod";t.pkceMethod=T.pkceMethod}typeof T.enableLogging=="boolean"?t.enableLogging=T.enableLogging:t.enableLogging=!1,typeof T.scope=="string"&&(t.scope=T.scope),typeof T.messageReceiveTimeout=="number"&&T.messageReceiveTimeout>0?t.messageReceiveTimeout=T.messageReceiveTimeout:t.messageReceiveTimeout=1e4}t.responseMode||(t.responseMode="fragment"),t.responseType||(t.responseType="code",t.flow="standard");var S=F(),P=F();P.promise.then(function(){t.onReady&&t.onReady(t.authenticated),S.setSuccess(t.authenticated)}).catch(function(Z){S.setError(Z)});var G=de();function B(){var Z=function(Se){Se||(we.prompt="none"),t.login(we).then(function(){P.setSuccess()}).catch(function(Ce){P.setError(Ce)})},ee=function(){var Se=document.createElement("iframe"),Ce=t.createLoginUrl({prompt:"none",redirectUri:t.silentCheckSsoRedirectUri});Se.setAttribute("src",Ce),Se.setAttribute("title","keycloak-silent-check-sso"),Se.style.display="none",document.body.appendChild(Se);var Je=function(Pe){if(!(Pe.origin!==window.location.origin||Se.contentWindow!==Pe.source)){var qe=ie(Pe.data);j(qe,P),document.body.removeChild(Se),window.removeEventListener("message",Je)}};window.addEventListener("message",Je)},we={};switch(T.onLoad){case"check-sso":o.enable?le().then(function(){De().then(function(Se){Se?P.setSuccess():t.silentCheckSsoRedirectUri?ee():Z(!1)}).catch(function(Se){P.setError(Se)})}):t.silentCheckSsoRedirectUri?ee():Z(!1);break;case"login-required":Z(!0);break;default:throw"Invalid value for onLoad"}}function O(){var Z=ie(window.location.href);if(Z&&window.history.replaceState(window.history.state,null,Z.newUrl),Z&&Z.valid)return le().then(function(){j(Z,P)}).catch(function(ee){P.setError(ee)});T?T.token&&T.refreshToken?(ye(T.token,T.refreshToken,T.idToken),o.enable?le().then(function(){De().then(function(ee){ee?(t.onAuthSuccess&&t.onAuthSuccess(),P.setSuccess(),Ye()):P.setSuccess()}).catch(function(ee){P.setError(ee)})}):t.updateToken(-1).then(function(){t.onAuthSuccess&&t.onAuthSuccess(),P.setSuccess()}).catch(function(ee){t.onAuthError&&t.onAuthError(),T.onLoad?B():P.setError(ee)})):T.onLoad?B():P.setSuccess():P.setSuccess()}function U(){var Z=F(),ee=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",ee),Z.setSuccess())};return document.addEventListener("readystatechange",ee),ee(),Z.promise}return G.then(function(){U().then(ue).then(O).catch(function(Z){S.setError(Z)})}),G.catch(function(Z){S.setError(Z)}),S.promise},t.login=function(T){return r.login(T)};function k(T){var I=null,S=window.crypto||window.msCrypto;if(S&&S.getRandomValues&&window.Uint8Array)return I=new Uint8Array(T),S.getRandomValues(I),I;I=new Array(T);for(var P=0;P<I.length;P++)I[P]=Math.floor(256*Math.random());return I}function D(T){return x(T,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function x(T,I){for(var S=k(T),P=new Array(T),G=0;G<T;G++)P[G]=I.charCodeAt(S[G]%I.length);return String.fromCharCode.apply(null,P)}function A(T,I){switch(T){case"S256":var S=new Uint8Array(sha256.arrayBuffer(I)),P=base64Js.fromByteArray(S).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return P;default:throw"Invalid value for pkceMethod"}}function H(T){var I={id_token:{acr:T}};return JSON.stringify(I)}t.createLoginUrl=function(T){var I=d(),S=d(),P=r.redirectUri(T),G={state:I,nonce:S,redirectUri:encodeURIComponent(P)};T&&T.prompt&&(G.prompt=T.prompt);var B;T&&T.action=="register"?B=t.endpoints.register():B=t.endpoints.authorize();var O=T&&T.scope||t.scope;O?O.indexOf("openid")===-1&&(O="openid "+O):O="openid";var U=B+"?client_id="+encodeURIComponent(t.clientId)+"&redirect_uri="+encodeURIComponent(P)+"&state="+encodeURIComponent(I)+"&response_mode="+encodeURIComponent(t.responseMode)+"&response_type="+encodeURIComponent(t.responseType)+"&scope="+encodeURIComponent(O);if(m&&(U=U+"&nonce="+encodeURIComponent(S)),T&&T.prompt&&(U+="&prompt="+encodeURIComponent(T.prompt)),T&&T.maxAge&&(U+="&max_age="+encodeURIComponent(T.maxAge)),T&&T.loginHint&&(U+="&login_hint="+encodeURIComponent(T.loginHint)),T&&T.idpHint&&(U+="&kc_idp_hint="+encodeURIComponent(T.idpHint)),T&&T.action&&T.action!="register"&&(U+="&kc_action="+encodeURIComponent(T.action)),T&&T.locale&&(U+="&ui_locales="+encodeURIComponent(T.locale)),T&&T.acr){var Z=H(T.acr);U+="&claims="+encodeURIComponent(Z)}if(t.pkceMethod){var ee=D(96);G.pkceCodeVerifier=ee;var we=A(t.pkceMethod,ee);U+="&code_challenge="+we,U+="&code_challenge_method="+t.pkceMethod}return a.add(G),U},t.logout=function(T){return r.logout(T)},t.createLogoutUrl=function(T){var I=t.endpoints.logout()+"?client_id="+encodeURIComponent(t.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(r.redirectUri(T,!1));return t.idToken&&(I+="&id_token_hint="+encodeURIComponent(t.idToken)),I},t.register=function(T){return r.register(T)},t.createRegisterUrl=function(T){return T||(T={}),T.action="register",t.createLoginUrl(T)},t.createAccountUrl=function(T){var I=Q(),S=void 0;return typeof I<"u"&&(S=I+"/account?referrer="+encodeURIComponent(t.clientId)+"&referrer_uri="+encodeURIComponent(r.redirectUri(T))),S},t.accountManagement=function(){return r.accountManagement()},t.hasRealmRole=function(T){var I=t.realmAccess;return!!I&&I.roles.indexOf(T)>=0},t.hasResourceRole=function(T,I){if(!t.resourceAccess)return!1;var S=t.resourceAccess[I||t.clientId];return!!S&&S.roles.indexOf(T)>=0},t.loadUserProfile=function(){var T=Q()+"/account",I=new XMLHttpRequest;I.open("GET",T,!0),I.setRequestHeader("Accept","application/json"),I.setRequestHeader("Authorization","bearer "+t.token);var S=F();return I.onreadystatechange=function(){I.readyState==4&&(I.status==200?(t.profile=JSON.parse(I.responseText),S.setSuccess(t.profile)):S.setError())},I.send(),S.promise},t.loadUserInfo=function(){var T=t.endpoints.userinfo(),I=new XMLHttpRequest;I.open("GET",T,!0),I.setRequestHeader("Accept","application/json"),I.setRequestHeader("Authorization","bearer "+t.token);var S=F();return I.onreadystatechange=function(){I.readyState==4&&(I.status==200?(t.userInfo=JSON.parse(I.responseText),S.setSuccess(t.userInfo)):S.setError())},I.send(),S.promise},t.isTokenExpired=function(T){if(!t.tokenParsed||!t.refreshToken&&t.flow!="implicit")throw"Not authenticated";if(t.timeSkew==null)return _("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var I=t.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+t.timeSkew;if(T){if(isNaN(T))throw"Invalid minValidity";I-=T}return I<0},t.updateToken=function(T){var I=F();if(!t.refreshToken)return I.setError(),I.promise;T=T||5;var S=function(){var G=!1;if(T==-1?(G=!0,_("[KEYCLOAK] Refreshing token: forced refresh")):(!t.tokenParsed||t.isTokenExpired(T))&&(G=!0,_("[KEYCLOAK] Refreshing token: token expired")),!G)I.setSuccess(!1);else{var B="grant_type=refresh_token&refresh_token="+t.refreshToken,O=t.endpoints.token();if(n.push(I),n.length==1){var U=new XMLHttpRequest;U.open("POST",O,!0),U.setRequestHeader("Content-type","application/x-www-form-urlencoded"),U.withCredentials=!0,B+="&client_id="+encodeURIComponent(t.clientId);var Z=new Date().getTime();U.onreadystatechange=function(){if(U.readyState==4)if(U.status==200){_("[KEYCLOAK] Token refreshed"),Z=(Z+new Date().getTime())/2;var ee=JSON.parse(U.responseText);ye(ee.access_token,ee.refresh_token,ee.id_token,Z),t.onAuthRefreshSuccess&&t.onAuthRefreshSuccess();for(var we=n.pop();we!=null;we=n.pop())we.setSuccess(!0)}else{b("[KEYCLOAK] Failed to refresh token"),U.status==400&&t.clearToken(),t.onAuthRefreshError&&t.onAuthRefreshError();for(var we=n.pop();we!=null;we=n.pop())we.setError(!0)}},U.send(B)}}};if(o.enable){var P=De();P.then(function(){S()}).catch(function(G){I.setError(G)})}else S();return I.promise},t.clearToken=function(){t.token&&(ye(null,null,null),t.onAuthLogout&&t.onAuthLogout(),t.loginRequired&&t.login())};function Q(){if(typeof t.authServerUrl<"u")return t.authServerUrl.charAt(t.authServerUrl.length-1)=="/"?t.authServerUrl+"realms/"+encodeURIComponent(t.realm):t.authServerUrl+"/realms/"+encodeURIComponent(t.realm)}function q(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function j(T,I){var S=T.code,P=T.error,G=T.prompt,B=new Date().getTime();if(T.kc_action_status&&t.onActionUpdate&&t.onActionUpdate(T.kc_action_status),P){if(G!="none"){var O={error:P,error_description:T.error_description};t.onAuthError&&t.onAuthError(O),I&&I.setError(O)}else I&&I.setSuccess();return}else t.flow!="standard"&&(T.access_token||T.id_token)&&we(T.access_token,null,T.id_token,!0);if(t.flow!="implicit"&&S){var U="code="+S+"&grant_type=authorization_code",Z=t.endpoints.token(),ee=new XMLHttpRequest;ee.open("POST",Z,!0),ee.setRequestHeader("Content-type","application/x-www-form-urlencoded"),U+="&client_id="+encodeURIComponent(t.clientId),U+="&redirect_uri="+T.redirectUri,T.pkceCodeVerifier&&(U+="&code_verifier="+T.pkceCodeVerifier),ee.withCredentials=!0,ee.onreadystatechange=function(){if(ee.readyState==4)if(ee.status==200){var Se=JSON.parse(ee.responseText);we(Se.access_token,Se.refresh_token,Se.id_token,t.flow==="standard"),Ye()}else t.onAuthError&&t.onAuthError(),I&&I.setError()},ee.send(U)}function we(Se,Ce,Je,Pe){B=(B+new Date().getTime())/2,ye(Se,Ce,Je,B),m&&(t.tokenParsed&&t.tokenParsed.nonce!=T.storedNonce||t.refreshTokenParsed&&t.refreshTokenParsed.nonce!=T.storedNonce||t.idTokenParsed&&t.idTokenParsed.nonce!=T.storedNonce)?(_("[KEYCLOAK] Invalid nonce, clearing token"),t.clearToken(),I&&I.setError()):Pe&&(t.onAuthSuccess&&t.onAuthSuccess(),I&&I.setSuccess())}}function de(T){var I=F(),S;e?typeof e=="string"&&(S=e):S="keycloak.json";function P(ee){ee?t.endpoints={authorize:function(){return ee.authorization_endpoint},token:function(){return ee.token_endpoint},logout:function(){if(!ee.end_session_endpoint)throw"Not supported by the OIDC server";return ee.end_session_endpoint},checkSessionIframe:function(){if(!ee.check_session_iframe)throw"Not supported by the OIDC server";return ee.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!ee.userinfo_endpoint)throw"Not supported by the OIDC server";return ee.userinfo_endpoint}}:t.endpoints={authorize:function(){return Q()+"/protocol/openid-connect/auth"},token:function(){return Q()+"/protocol/openid-connect/token"},logout:function(){return Q()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var we=Q()+"/protocol/openid-connect/login-status-iframe.html";return t.iframeVersion&&(we=we+"?version="+t.iframeVersion),we},thirdPartyCookiesIframe:function(){var we=Q()+"/protocol/openid-connect/3p-cookies/step1.html";return t.iframeVersion&&(we=we+"?version="+t.iframeVersion),we},register:function(){return Q()+"/protocol/openid-connect/registrations"},userinfo:function(){return Q()+"/protocol/openid-connect/userinfo"}}}if(S){var G=new XMLHttpRequest;G.open("GET",S,!0),G.setRequestHeader("Accept","application/json"),G.onreadystatechange=function(){if(G.readyState==4)if(G.status==200||ge(G)){var ee=JSON.parse(G.responseText);t.authServerUrl=ee["auth-server-url"],t.realm=ee.realm,t.clientId=ee.resource,P(null),I.setSuccess()}else I.setError()},G.send()}else{if(!e.clientId)throw"clientId missing";t.clientId=e.clientId;var B=e.oidcProvider;if(B)if(typeof B=="string"){var Z;B.charAt(B.length-1)=="/"?Z=B+".well-known/openid-configuration":Z=B+"/.well-known/openid-configuration";var G=new XMLHttpRequest;G.open("GET",Z,!0),G.setRequestHeader("Accept","application/json"),G.onreadystatechange=function(){if(G.readyState==4)if(G.status==200||ge(G)){var we=JSON.parse(G.responseText);P(we),I.setSuccess()}else I.setError()},G.send()}else P(B),I.setSuccess();else{if(!e.url){for(var O=document.getElementsByTagName("script"),U=0;U<O.length;U++)if(O[U].src.match(/.*keycloak\.js/)){e.url=O[U].src.substr(0,O[U].src.indexOf("/js/keycloak.js"));break}}if(!e.realm)throw"realm missing";t.authServerUrl=e.url,t.realm=e.realm,P(null),I.setSuccess()}}return I.promise}function ge(T){return T.status==0&&T.responseText&&T.responseURL.startsWith("file:")}function ye(T,I,S,P){if(t.tokenTimeoutHandle&&(clearTimeout(t.tokenTimeoutHandle),t.tokenTimeoutHandle=null),I?(t.refreshToken=I,t.refreshTokenParsed=Te(I)):(delete t.refreshToken,delete t.refreshTokenParsed),S?(t.idToken=S,t.idTokenParsed=Te(S)):(delete t.idToken,delete t.idTokenParsed),T){if(t.token=T,t.tokenParsed=Te(T),t.sessionId=t.tokenParsed.session_state,t.authenticated=!0,t.subject=t.tokenParsed.sub,t.realmAccess=t.tokenParsed.realm_access,t.resourceAccess=t.tokenParsed.resource_access,P&&(t.timeSkew=Math.floor(P/1e3)-t.tokenParsed.iat),t.timeSkew!=null&&(_("[KEYCLOAK] Estimated time difference between browser and server is "+t.timeSkew+" seconds"),t.onTokenExpired)){var G=(t.tokenParsed.exp-new Date().getTime()/1e3+t.timeSkew)*1e3;_("[KEYCLOAK] Token expires in "+Math.round(G/1e3)+" s"),G<=0?t.onTokenExpired():t.tokenTimeoutHandle=setTimeout(t.onTokenExpired,G)}}else delete t.token,delete t.tokenParsed,delete t.subject,delete t.realmAccess,delete t.resourceAccess,t.authenticated=!1}function Te(T){switch(T=T.split(".")[1],T=T.replace(/-/g,"+"),T=T.replace(/_/g,"/"),T.length%4){case 0:break;case 2:T+="==";break;case 3:T+="=";break;default:throw"Invalid token"}return T=decodeURIComponent(escape(atob(T))),T=JSON.parse(T),T}function d(){var T="0123456789abcdef",I=x(36,T).split("");I[14]="4",I[19]=T.substr(I[19]&3|8,1),I[8]=I[13]=I[18]=I[23]="-";var S=I.join("");return S}function ie(T){var I=re(T);if(I){var S=a.get(I.state);return S&&(I.valid=!0,I.redirectUri=S.redirectUri,I.storedNonce=S.nonce,I.prompt=S.prompt,I.pkceCodeVerifier=S.pkceCodeVerifier),I}}function re(T){var I;switch(t.flow){case"standard":I=["code","state","session_state","kc_action_status"];break;case"implicit":I=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":I=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}I.push("error"),I.push("error_description"),I.push("error_uri");var S=T.indexOf("?"),P=T.indexOf("#"),G,B;if(t.responseMode==="query"&&S!==-1?(G=T.substring(0,S),B=ke(T.substring(S+1,P!==-1?P:T.length),I),B.paramsString!==""&&(G+="?"+B.paramsString),P!==-1&&(G+=T.substring(P))):t.responseMode==="fragment"&&P!==-1&&(G=T.substring(0,P),B=ke(T.substring(P+1),I),B.paramsString!==""&&(G+="#"+B.paramsString)),B&&B.oauthParams){if(t.flow==="standard"||t.flow==="hybrid"){if((B.oauthParams.code||B.oauthParams.error)&&B.oauthParams.state)return B.oauthParams.newUrl=G,B.oauthParams}else if(t.flow==="implicit"&&(B.oauthParams.access_token||B.oauthParams.error)&&B.oauthParams.state)return B.oauthParams.newUrl=G,B.oauthParams}}function ke(T,I){for(var S=T.split("&"),P={paramsString:"",oauthParams:{}},G=0;G<S.length;G++){var B=S[G].indexOf("="),O=S[G].slice(0,B);I.indexOf(O)!==-1?P.oauthParams[O]=S[G].slice(B+1):(P.paramsString!==""&&(P.paramsString+="&"),P.paramsString+=S[G])}return P}function F(){var T={setSuccess:function(I){T.resolve(I)},setError:function(I){T.reject(I)}};return T.promise=new Promise(function(I,S){T.resolve=I,T.reject=S}),T.promise.success=function(I){return logPromiseDeprecation(),this.then(function(P){I(P)}),this},T.promise.error=function(I){return logPromiseDeprecation(),this.catch(function(P){I(P)}),this},T}function me(T,I,S){var P=null,G=new Promise(function(B,O){P=setTimeout(function(){O({error:S||"Promise is not settled within timeout of "+I+"ms"})},I)});return Promise.race([T,G]).finally(function(){clearTimeout(P)})}function le(){var T=F();if(!o.enable||o.iframe)return T.setSuccess(),T.promise;var I=document.createElement("iframe");o.iframe=I,I.onload=function(){var G=t.endpoints.authorize();G.charAt(0)==="/"?o.iframeOrigin=q():o.iframeOrigin=G.substring(0,G.indexOf("/",8)),T.setSuccess()};var S=t.endpoints.checkSessionIframe();I.setAttribute("src",S),I.setAttribute("title","keycloak-session-iframe"),I.style.display="none",document.body.appendChild(I);var P=function(G){if(!(G.origin!==o.iframeOrigin||o.iframe.contentWindow!==G.source)&&(G.data=="unchanged"||G.data=="changed"||G.data=="error")){G.data!="unchanged"&&t.clearToken();for(var B=o.callbackList.splice(0,o.callbackList.length),O=B.length-1;O>=0;--O){var U=B[O];G.data=="error"?U.setError():U.setSuccess(G.data=="unchanged")}}};return window.addEventListener("message",P,!1),T.promise}function Ye(){o.enable&&t.token&&setTimeout(function(){De().then(function(T){T&&Ye()})},o.interval*1e3)}function De(){var T=F();if(o.iframe&&o.iframeOrigin){var I=t.clientId+" "+(t.sessionId?t.sessionId:"");o.callbackList.push(T);var S=o.iframeOrigin;o.callbackList.length==1&&o.iframe.contentWindow.postMessage(I,S)}else T.setSuccess();return T.promise}function ue(){var T=F();if(o.enable||t.silentCheckSsoRedirectUri){var I=document.createElement("iframe");I.setAttribute("src",t.endpoints.thirdPartyCookiesIframe()),I.setAttribute("title","keycloak-3p-check-iframe"),I.style.display="none",document.body.appendChild(I);var S=function(P){I.contentWindow===P.source&&(P.data!=="supported"&&P.data!=="unsupported"||(P.data==="unsupported"&&(o.enable=!1,t.silentCheckSsoFallback&&(t.silentCheckSsoRedirectUri=!1),b("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(I),window.removeEventListener("message",S),T.setSuccess()))};window.addEventListener("message",S,!1)}else T.setSuccess();return me(T.promise,t.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function w(T){if(!T||T=="default")return{login:function(B){return window.location.replace(t.createLoginUrl(B)),F().promise},logout:function(B){return window.location.replace(t.createLogoutUrl(B)),F().promise},register:function(B){return window.location.replace(t.createRegisterUrl(B)),F().promise},accountManagement:function(){var B=t.createAccountUrl();if(typeof B<"u")window.location.href=B;else throw"Not supported by the OIDC server";return F().promise},redirectUri:function(B,O){return B&&B.redirectUri?B.redirectUri:t.redirectUri?t.redirectUri:location.href}};if(T=="cordova"){o.enable=!1;var I=function(B,O,U){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(B,O,U):window.open(B,O,U)},S=function(B){return B&&B.cordovaOptions?Object.keys(B.cordovaOptions).reduce(function(O,U){return O[U]=B.cordovaOptions[U],O},{}):{}},P=function(B){return Object.keys(B).reduce(function(O,U){return O.push(U+"="+B[U]),O},[]).join(",")},G=function(B){var O=S(B);return O.location="no",B&&B.prompt=="none"&&(O.hidden="yes"),P(O)};return{login:function(B){var O=F(),U=G(B),Z=t.createLoginUrl(B),ee=I(Z,"_blank",U),we=!1,Se=!1,Ce=function(){Se=!0,ee.close()};return ee.addEventListener("loadstart",function(Je){if(Je.url.indexOf("http://localhost")==0){var Pe=ie(Je.url);j(Pe,O),Ce(),we=!0}}),ee.addEventListener("loaderror",function(Je){if(!we)if(Je.url.indexOf("http://localhost")==0){var Pe=ie(Je.url);j(Pe,O),Ce(),we=!0}else O.setError(),Ce()}),ee.addEventListener("exit",function(Je){Se||O.setError({reason:"closed_by_user"})}),O.promise},logout:function(B){var O=F(),U=t.createLogoutUrl(B),Z=I(U,"_blank","location=no,hidden=yes,clearcache=yes"),ee;return Z.addEventListener("loadstart",function(we){we.url.indexOf("http://localhost")==0&&Z.close()}),Z.addEventListener("loaderror",function(we){we.url.indexOf("http://localhost")==0||(ee=!0),Z.close()}),Z.addEventListener("exit",function(we){ee?O.setError():(t.clearToken(),O.setSuccess())}),O.promise},register:function(B){var O=F(),U=t.createRegisterUrl(),Z=G(B),ee=I(U,"_blank",Z);return ee.addEventListener("loadstart",function(we){if(we.url.indexOf("http://localhost")==0){ee.close();var Se=ie(we.url);j(Se,O)}}),O.promise},accountManagement:function(){var B=t.createAccountUrl();if(typeof B<"u"){var O=I(B,"_blank","location=no");O.addEventListener("loadstart",function(U){U.url.indexOf("http://localhost")==0&&O.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(B){return"http://localhost"}}}if(T=="cordova-native")return o.enable=!1,{login:function(B){var O=F(),U=t.createLoginUrl(B);return universalLinks.subscribe("keycloak",function(Z){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var ee=ie(Z.url);j(ee,O)}),window.cordova.plugins.browsertab.openUrl(U),O.promise},logout:function(B){var O=F(),U=t.createLogoutUrl(B);return universalLinks.subscribe("keycloak",function(Z){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),t.clearToken(),O.setSuccess()}),window.cordova.plugins.browsertab.openUrl(U),O.promise},register:function(B){var O=F(),U=t.createRegisterUrl(B);return universalLinks.subscribe("keycloak",function(Z){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var ee=ie(Z.url);j(ee,O)}),window.cordova.plugins.browsertab.openUrl(U),O.promise},accountManagement:function(){var B=t.createAccountUrl();if(typeof B<"u")window.cordova.plugins.browsertab.openUrl(B);else throw"Not supported by the OIDC server"},redirectUri:function(B){return B&&B.redirectUri?B.redirectUri:t.redirectUri?t.redirectUri:"http://localhost"}};throw"invalid adapter type: "+T}var Y=function(){if(!(this instanceof Y))return new Y;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var T=this;function I(){for(var S=new Date().getTime(),P=0;P<localStorage.length;P++){var G=localStorage.key(P);if(G&&G.indexOf("kc-callback-")==0){var B=localStorage.getItem(G);if(B)try{var O=JSON.parse(B).expires;(!O||O<S)&&localStorage.removeItem(G)}catch{localStorage.removeItem(G)}}}}T.get=function(S){if(S){var P="kc-callback-"+S,G=localStorage.getItem(P);return G&&(localStorage.removeItem(P),G=JSON.parse(G)),I(),G}},T.add=function(S){I();var P="kc-callback-"+S.state;S.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(P,JSON.stringify(S))}},E=function(){if(!(this instanceof E))return new E;var T=this;T.get=function(G){if(G){var B=S("kc-callback-"+G);if(P("kc-callback-"+G,"",I(-100)),B)return JSON.parse(B)}},T.add=function(G){P("kc-callback-"+G.state,JSON.stringify(G),I(60))},T.removeItem=function(G){P(G,"",I(-100))};var I=function(G){var B=new Date;return B.setTime(B.getTime()+G*60*1e3),B},S=function(G){for(var B=G+"=",O=document.cookie.split(";"),U=0;U<O.length;U++){for(var Z=O[U];Z.charAt(0)==" ";)Z=Z.substring(1);if(Z.indexOf(B)==0)return Z.substring(B.length,Z.length)}return""},P=function(G,B,O){var U=G+"="+B+"; expires="+O.toUTCString()+"; ";document.cookie=U}};function W(){try{return new Y}catch{}return new E}function fe(T){return function(){t.enableLogging&&T.apply(console,Array.prototype.slice.call(arguments))}}}function Lt(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),createBaseVNode("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),createBaseVNode("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),createBaseVNode("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}function fa(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),createBaseVNode("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}function wn(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}function bn(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}function Hn(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),createBaseVNode("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}function Wn(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}function zn(){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[createBaseVNode("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}const Dn=(e,t,r,n,a)=>{const o=parse(e,t.slice(0,e.length),new Date);return isValid(o)&&isDate(o)?n||a?o:set(o,{hours:+r.hours,minutes:+(r==null?void 0:r.minutes),seconds:+(r==null?void 0:r.seconds),milliseconds:0}):null},va=(e,t,r,n,a)=>{const o=Array.isArray(r)?r[0]:r;if(typeof t=="string")return Dn(e,t,o,n,a);if(Array.isArray(t)){let l=null;for(const f of t)if(l=Dn(e,f,o,n,a),l)break;return l}return typeof t=="function"?t(e):null},$=e=>e?new Date(e):new Date,ma=(e,t)=>{if(t){const n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),o=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0");return`${e.getFullYear()}-${n}-${a}T${o}:${l}:00.000Z`}const r=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return new Date(r).toISOString()},Ue=e=>{let t=$(JSON.parse(JSON.stringify(e)));return t=setHours(t,0),t=setMinutes(t,0),t=setSeconds(t,0),t=setMilliseconds(t,0),t},Fe=(e,t,r,n)=>{let a=e?$(e):$();return(t||t===0)&&(a=setHours(a,+t)),(r||r===0)&&(a=setMinutes(a,+r)),(n||n===0)&&(a=setSeconds(a,+n)),setMilliseconds(a,0)},_e=(e,t)=>!e||!t?!1:isBefore(Ue(e),Ue(t)),ve=(e,t)=>!e||!t?!1:isEqual(Ue(e),Ue(t)),Be=(e,t)=>!e||!t?!1:isAfter(Ue(e),Ue(t)),xn=(e,t,r)=>e&&e[0]&&e[1]?Be(r,e[0])&&_e(r,e[1]):e&&e[0]&&t?Be(r,e[0])&&_e(r,t)||_e(r,e[0])&&Be(r,t):!1,pt=e=>{const t=set(new Date(e),{date:1});return Ue(t)},kt=reactive({menuFocused:!1,shiftKeyInMenu:!1}),Kn=()=>{const e=r=>{kt.menuFocused=r},t=r=>{kt.shiftKeyInMenu!==r&&(kt.shiftKeyInMenu=r)};return{control:computed(()=>({shiftKeyInMenu:kt.shiftKeyInMenu,menuFocused:kt.menuFocused})),setMenuFocused:e,setShiftKey:t}};function yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bt={},ya={get exports(){return Bt},set exports(e){Bt=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){if(n===null||n===!0||n===!1)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}e.exports=t.default})(ya,Bt);const ga=yn(Bt);var Yt={},ha={get exports(){return Yt},set exports(e){Yt=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}e.exports=t.default})(ha,Yt);const $n=yn(Yt);function pa(e,t){var r=Da(t);return r.formatToParts?wa(r,e):ba(r,e)}var ka={year:0,month:1,day:2,hour:3,minute:4,second:5};function wa(e,t){try{for(var r=e.formatToParts(t),n=[],a=0;a<r.length;a++){var o=ka[r[a].type];o>=0&&(n[o]=parseInt(r[a].value,10))}return n}catch(l){if(l instanceof RangeError)return[NaN];throw l}}function ba(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var Xt={};function Da(e){if(!Xt[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";Xt[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Xt[e]}function gn(e,t,r,n,a,o,l){var f=new Date(0);return f.setUTCFullYear(e,t,r),f.setUTCHours(n,a,o,l),f}var Mn=36e5,$a=6e4,qt={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function hn(e,t,r){var n,a;if(!e||(n=qt.timezoneZ.exec(e),n))return 0;var o;if(n=qt.timezoneHH.exec(e),n)return o=parseInt(n[1],10),Tn(o)?-(o*Mn):NaN;if(n=qt.timezoneHHMM.exec(e),n){o=parseInt(n[1],10);var l=parseInt(n[2],10);return Tn(o,l)?(a=Math.abs(o)*Mn+l*$a,o>0?-a:a):NaN}if(Aa(e)){t=new Date(t||Date.now());var f=r?t:Ma(t),m=sn(f,e),_=r?m:Ta(t,m,e);return-_}return NaN}function Ma(e){return gn(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function sn(e,t){var r=pa(e,t),n=gn(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),a=e.getTime(),o=a%1e3;return a-=o>=0?o:1e3+o,n-a}function Ta(e,t,r){var n=e.getTime(),a=n-t,o=sn(new Date(a),r);if(t===o)return t;a-=o-t;var l=sn(new Date(a),r);return o===l?o:Math.max(o,l)}function Tn(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var An={};function Aa(e){if(An[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),An[e]=!0,!0}catch{return!1}}var Sa=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const jn=Sa;var Jt=36e5,Sn=6e4,Ca=2,Ie={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:jn};function un(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var r=t||{},n=r.additionalDigits==null?Ca:ga(r.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=Pa(e),o=_a(a.date,n),l=o.year,f=o.restDateString,m=Na(f,l);if(isNaN(m))return new Date(NaN);if(m){var _=m.getTime(),b=0,k;if(a.time&&(b=Ra(a.time),isNaN(b)))return new Date(NaN);if(a.timeZone||r.timeZone){if(k=hn(a.timeZone||r.timeZone,new Date(_+b)),isNaN(k))return new Date(NaN)}else k=$n(new Date(_+b)),k=$n(new Date(_+b+k));return new Date(_+b+k)}else return new Date(NaN)}function Pa(e){var t={},r=Ie.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=Ie.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){var a=Ie.timeZone.exec(n);a?(t.time=n.replace(a[1],""),t.timeZone=a[1].trim()):t.time=n}return t}function _a(e,t){var r=Ie.YYY[t],n=Ie.YYYYY[t],a;if(a=Ie.YYYY.exec(e)||n.exec(e),a){var o=a[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(a=Ie.YY.exec(e)||r.exec(e),a){var l=a[1];return{year:parseInt(l,10)*100,restDateString:e.slice(l.length)}}return{year:null}}function Na(e,t){if(t===null)return null;var r,n,a,o;if(e.length===0)return n=new Date(0),n.setUTCFullYear(t),n;if(r=Ie.MM.exec(e),r)return n=new Date(0),a=parseInt(r[1],10)-1,Pn(t,a)?(n.setUTCFullYear(t,a),n):new Date(NaN);if(r=Ie.DDD.exec(e),r){n=new Date(0);var l=parseInt(r[1],10);return Ba(t,l)?(n.setUTCFullYear(t,0,l),n):new Date(NaN)}if(r=Ie.MMDD.exec(e),r){n=new Date(0),a=parseInt(r[1],10)-1;var f=parseInt(r[2],10);return Pn(t,a,f)?(n.setUTCFullYear(t,a,f),n):new Date(NaN)}if(r=Ie.Www.exec(e),r)return o=parseInt(r[1],10)-1,_n(t,o)?Cn(t,o):new Date(NaN);if(r=Ie.WwwD.exec(e),r){o=parseInt(r[1],10)-1;var m=parseInt(r[2],10)-1;return _n(t,o,m)?Cn(t,o,m):new Date(NaN)}return null}function Ra(e){var t,r,n;if(t=Ie.HH.exec(e),t)return r=parseFloat(t[1].replace(",",".")),Qt(r)?r%24*Jt:NaN;if(t=Ie.HHMM.exec(e),t)return r=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),Qt(r,n)?r%24*Jt+n*Sn:NaN;if(t=Ie.HHMMSS.exec(e),t){r=parseInt(t[1],10),n=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return Qt(r,n,a)?r%24*Jt+n*Sn+a*1e3:NaN}return null}function Cn(e,t,r){t=t||0,r=r||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,o=t*7+r+1-a;return n.setUTCDate(n.getUTCDate()+o),n}var Oa=[31,28,31,30,31,30,31,31,30,31,30,31],Ia=[31,29,31,30,31,30,31,31,30,31,30,31];function Gn(e){return e%400===0||e%4===0&&e%100!==0}function Pn(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;var n=Gn(e);if(n&&r>Ia[t]||!n&&r>Oa[t])return!1}return!0}function Ba(e,t){if(t<1)return!1;var r=Gn(e);return!(r&&t>366||!r&&t>365)}function _n(e,t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function Qt(e,t,r){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}var Vt={},Ya={get exports(){return Vt},set exports(e){Vt=e}},Et={},Va={get exports(){return Et},set exports(e){Et=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n,a){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o]);return n}e.exports=t.default})(Va,Et);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=n(Et);function n(o){return o&&o.__esModule?o:{default:o}}function a(o){return(0,r.default)({},o)}e.exports=t.default})(Ya,Vt);const Ea=yn(Vt);function Fa(e,t,r){var n=un(e,r),a=hn(t,n,!0),o=new Date(n.getTime()-a),l=new Date(0);return l.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),l.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),l}function La(e,t,r){if(typeof e=="string"&&!e.match(jn)){var n=Ea(r);return n.timeZone=t,un(e,n)}var a=un(e,r),o=gn(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).getTime(),l=hn(t,new Date(o));return new Date(o+l)}const Ua=(e,t=3)=>{const r=[];for(let n=0;n<e.length;n+=t)r.push([e[n],e[n+1],e[n+2]]);return r},Ha=(e,t)=>{const r=[1,2,3,4,5,6,7].map(o=>new Intl.DateTimeFormat(e,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${o}T00:00:00+00:00`)).slice(0,2)),n=r.slice(0,t),a=r.slice(t+1,r.length);return[r[t]].concat(...a).concat(...n)},Wa=(e,t)=>{const r=[];for(let n=+e[0];n<=+e[1];n++)r.push({value:+n,text:`${n}`});return t?r.reverse():r},za=(e,t)=>{const r=new Intl.DateTimeFormat(e,{month:t,timeZone:"UTC"});return[1,2,3,4,5,6,7,8,9,10,11,12].map(n=>{const a=n<10?`0${n}`:n;return new Date(`2017-${a}-01T00:00:00+00:00`)}).map((n,a)=>({text:r.format(n),value:a}))},xa=e=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][e],$e=e=>{const t=unref(e);return t!=null&&t.$el?t==null?void 0:t.$el:t},Ka=e=>Object.assign({type:"dot"},e),Zn=e=>Array.isArray(e)?!!e[0]&&!!e[1]:!1,Ft={prop:e=>`"${e}" prop must be enabled!`,dateArr:e=>`You need to use array as "model-value" binding in order to support "${e}"`},Me=e=>e,Nn=e=>e===0?e:!e||isNaN(+e)?null:+e,Rn=e=>Object.assign({menuAppear:"dp-menu-appear",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down"},e),ja=e=>Object.assign({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:t=>`Increment ${t}`,decrementValue:t=>`Decrement ${t}`,openTpOverlay:t=>`Open ${t} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",day:()=>""},e),Ga=e=>e===null?0:typeof e=="boolean"?e?2:0:+e>=2?+e:2,Za=(e,t,r)=>e||(typeof r=="string"?r:t),Xa=e=>typeof e=="boolean"?e?Rn({}):!1:Rn(e),qa=()=>({enterSubmit:!0,tabSubmit:!0,openMenu:!0,rangeSeparator:" - "}),Ja=e=>Object.assign({months:[],years:[],times:{hours:[],minutes:[],seconds:[]}},e),Ee=e=>{const t=()=>{if(e.partialRange)return null;throw new Error(Ft.prop("partial-range"))},r=computed(()=>({ariaLabels:ja(e.ariaLabels),textInputOptions:Object.assign(qa(),e.textInputOptions),multiCalendars:Ga(e.multiCalendars),previewFormat:Za(e.previewFormat,e.format,o()),filters:Ja(e.filters),transitions:Xa(e.transitions),startTime:D()})),n=w=>{if(e.range)return w();throw new Error(Ft.prop("range"))},a=()=>{const w=e.enableSeconds?":ss":"";return e.is24?`HH:mm${w}`:`hh:mm${w} aa`},o=()=>e.format?e.format:e.monthPicker?"MM/yyyy":e.timePicker?a():e.weekPicker?"MM/dd/yyyy":e.yearPicker?"yyyy":e.enableTimePicker?`MM/dd/yyyy, ${a()}`:"MM/dd/yyyy",l=(w,Y)=>{if(typeof e.format=="function")return e.format(w);const E=Y||o(),W=e.formatLocale?{locale:e.formatLocale}:void 0;return Array.isArray(w)?`${format(w[0],E,W)} ${e.modelAuto&&!w[1]?"":r.value.textInputOptions.rangeSeparator||"-"} ${w[1]?format(w[1],E,W):""}`:format(w,E,W)},f=w=>e.timezone?Fa(w,e.timezone):w,m=w=>e.timezone?La(w,e.timezone):w,_=computed(()=>w=>{var Y;return(Y=e.hideNavigation)==null?void 0:Y.includes(w)}),b=w=>{const Y=e.maxDate?Be(f(w),f($(e.maxDate))):!1,E=e.minDate?_e(f(w),f($(e.minDate))):!1,W=q(w,e.disabledDates),fe=r.value.filters.months.map(G=>+G).includes(getMonth(w)),T=e.disabledWeekDays.length?e.disabledWeekDays.some(G=>+G===getDay(w)):!1,I=e.allowedDates.length?!e.allowedDates.some(G=>ve(f($(G)),f(w))):!1,S=getYear(w),P=S<+e.yearRange[0]||S>+e.yearRange[1];return!(Y||E||W||fe||P||T||I)},k=w=>{const Y={hours:getHours($()),minutes:getMinutes($()),seconds:e.enableSeconds?getSeconds($()):0};return Object.assign(Y,w)},D=()=>e.range?e.startTime&&Array.isArray(e.startTime)?[k(e.startTime[0]),k(e.startTime[1])]:null:e.startTime&&!Array.isArray(e.startTime)?k(e.startTime):null,x=w=>!b(w),A=w=>Array.isArray(w)?isValid(w[0])&&(w[1]?isValid(w[1]):!0):w?isValid(w):!1,H=w=>w instanceof Date?w:parseISO(w),Q=w=>{const Y=startOfWeek(f(w),{weekStartsOn:+e.weekStart}),E=endOfWeek(f(w),{weekStartsOn:+e.weekStart});return[Y,E]},q=(w,Y)=>Array.isArray(Y)?Y.some(E=>ve(f($(E)),f(w))):Y($(JSON.parse(JSON.stringify(w)))),j=(w,Y,E)=>{let W=w?$(w):$();return(Y||Y===0)&&(W=setMonth(W,Y)),E&&(W=setYear(W,E)),W},de=w=>set($(),{hours:getHours(w),minutes:getMinutes(w),seconds:getSeconds(w)}),ge=w=>set($(),{hours:+w.hours||0,minutes:+w.minutes||0,seconds:+w.seconds||0}),ye=(w,Y,E,W)=>{if(!w)return!0;if(W){const fe=E==="max"?isBefore(w,Y):isAfter(w,Y),T={seconds:0,milliseconds:0};return fe||isEqual(set(w,T),set(Y,T))}return E==="max"?w.getTime()<=Y.getTime():w.getTime()>=Y.getTime()},Te=()=>!e.enableTimePicker||e.monthPicker||e.yearPicker||e.ignoreTimeValidation,d=w=>Array.isArray(w)?[w[0]?de(w[0]):null,w[1]?de(w[1]):null]:de(w),ie=w=>{const Y=e.maxTime?ge(e.maxTime):$(e.maxDate);return Array.isArray(w)?ye(w[0],Y,"max",!!e.maxDate)&&ye(w[1],Y,"max",!!e.maxDate):ye(w,Y,"max",!!e.maxDate)},re=(w,Y)=>{const E=e.minTime?ge(e.minTime):$(e.minDate);return Array.isArray(w)?ye(w[0],E,"min",!!e.minDate)&&ye(w[1],E,"min",!!e.minDate)&&Y:ye(w,E,"min",!!e.minDate)&&Y},ke=w=>{let Y=!0;if(!w||Te())return!0;const E=!e.minDate&&!e.maxDate?d(w):w;return(e.maxTime||e.maxDate)&&(Y=ie(Me(E))),(e.minTime||e.minDate)&&(Y=re(Me(E),Y)),Y},F=(w,Y)=>{const E=$(JSON.parse(JSON.stringify(w))),W=[];for(let fe=0;fe<7;fe++){const T=addDays(E,fe),I=getMonth(T)!==Y;W.push({text:e.hideOffsetDates&&I?"":T.getDate(),value:T,current:!I,classData:{}})}return W},me=(w,Y)=>{const E=[],W=$(f(new Date(Y,w))),fe=$(f(new Date(Y,w+1,0))),T=startOfWeek(W,{weekStartsOn:e.weekStart}),I=S=>{const P=F(S,w);if(E.push({days:P}),!E[E.length-1].days.some(G=>ve(Ue(G.value),Ue(fe)))){const G=addDays(S,7);I(G)}};if(I(T),e.sixWeeks&&E.length<6){const S=6-E.length;for(let P=1;P<=S;P++){const G=E[E.length-1],B=G.days[G.days.length-1],O=F(addDays(B.value,1),getMonth(W));E.push({days:O})}}return E},le=(w,Y,E)=>[set($(w),{date:1}),set($(),{month:Y,year:E,date:1})],Ye=(w,Y)=>_e(...le(e.minDate,w,Y))||ve(...le(e.minDate,w,Y)),De=(w,Y)=>Be(...le(e.maxDate,w,Y))||ve(...le(e.maxDate,w,Y)),ue=(w,Y,E)=>{let W=!1;return e.maxDate&&E&&De(w,Y)&&(W=!0),e.minDate&&!E&&Ye(w,Y)&&(W=!0),W};return{checkPartialRangeValue:t,checkRangeEnabled:n,getZonedDate:f,getZonedToUtc:m,formatDate:l,getDefaultPattern:o,validateDate:b,getDefaultStartTime:D,isDisabled:x,isValidDate:A,sanitizeDate:H,getWeekFromDate:Q,matchDate:q,setDateMonthOrYear:j,isValidTime:ke,getCalendarDays:me,validateMonthYearInRange:(w,Y,E,W)=>{let fe=!1;return W?e.minDate&&e.maxDate?fe=ue(w,Y,E):(e.minDate&&Ye(w,Y)||e.maxDate&&De(w,Y))&&(fe=!0):fe=!0,fe},validateMaxDate:De,validateMinDate:Ye,assignDefaultTime:k,defaults:r,hideNavigationButtons:_}},he=reactive({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),en=ref(null),Pt=ref(!1),tn=ref(!1),nn=ref(!1),an=ref(!1),Oe=ref(0),Ae=ref(0),nt=()=>{const e=computed(()=>Pt.value?[...he.selectionGrid,he.actionRow].filter(k=>k.length):tn.value?[...he.timePicker[0],...he.timePicker[1],an.value?[]:[en.value],he.actionRow].filter(k=>k.length):nn.value?[...he.monthPicker,he.actionRow]:[he.monthYear,...he.calendar,he.time,he.actionRow].filter(k=>k.length)),t=k=>{Oe.value=k?Oe.value+1:Oe.value-1;let D=null;e.value[Ae.value]&&(D=e.value[Ae.value][Oe.value]),D||(Oe.value=k?Oe.value-1:Oe.value+1)},r=k=>{Ae.value===0&&!k||Ae.value===e.value.length&&k||(Ae.value=k?Ae.value+1:Ae.value-1,e.value[Ae.value]?e.value[Ae.value]&&!e.value[Ae.value][Oe.value]&&Oe.value!==0&&(Oe.value=e.value[Ae.value].length-1):Ae.value=k?Ae.value-1:Ae.value+1)},n=k=>{let D=null;e.value[Ae.value]&&(D=e.value[Ae.value][Oe.value]),D?D.focus({preventScroll:!Pt.value}):Oe.value=k?Oe.value-1:Oe.value+1},a=()=>{t(!0),n(!0)},o=()=>{t(!1),n(!1)},l=()=>{r(!1),n(!0)},f=()=>{r(!0),n(!0)},m=(k,D)=>{he[D]=k},_=(k,D)=>{he[D]=k},b=()=>{Oe.value=0,Ae.value=0};return{buildMatrix:m,buildMultiLevelMatrix:_,setTimePickerBackRef:k=>{en.value=k},setSelectionGrid:k=>{Pt.value=k,b(),k||(he.selectionGrid=[])},setTimePicker:(k,D=!1)=>{tn.value=k,an.value=D,b(),k||(he.timePicker[0]=[],he.timePicker[1]=[])},setTimePickerElements:(k,D=0)=>{he.timePicker[D]=k},arrowRight:a,arrowLeft:o,arrowUp:l,arrowDown:f,clearArrowNav:()=>{he.monthYear=[],he.calendar=[],he.time=[],he.actionRow=[],he.selectionGrid=[],he.timePicker[0]=[],he.timePicker[1]=[],Pt.value=!1,tn.value=!1,an.value=!1,nn.value=!1,b(),en.value=null},setMonthPicker:k=>{nn.value=k,b()},refSets:he}},On=e=>Array.isArray(e),lt=e=>Array.isArray(e),In=e=>Array.isArray(e)&&e.length===2,Qa=(e,t,r,n,a)=>{const{getDefaultStartTime:o,isDisabled:l,sanitizeDate:f,getWeekFromDate:m,setDateMonthOrYear:_,validateMonthYearInRange:b,defaults:k}=Ee(e),D=computed({get:()=>e.internalModelValue,set:L=>{!e.readonly&&!e.disabled&&t("update:internal-model-value",L)}}),x=ref([]);watch(D,()=>{Te()});const A=toRef(e,"multiCalendars");watch(A,()=>{Wt(0)});const H=ref([{month:getMonth($()),year:getYear($())}]),Q=reactive({hours:e.range?[getHours($()),getHours($())]:getHours($()),minutes:e.range?[getMinutes($()),getMinutes($())]:getMinutes($()),seconds:e.range?[0,0]:0}),q=computed(()=>L=>H.value[L]?H.value[L].month:0),j=computed(()=>L=>H.value[L]?H.value[L].year:0),de=computed(()=>e.flow&&e.flow.length&&!e.partialFlow?a.value===e.flow.length:!0),ge=(L,oe,Re)=>{var je,ut;H.value[L]||(H.value[L]={month:0,year:0}),H.value[L].month=oe===null?(je=H.value[L])==null?void 0:je.month:oe,H.value[L].year=Re===null?(ut=H.value[L])==null?void 0:ut.year:Re},ye=(L,oe)=>{Q[L]=oe};onMounted(()=>{D.value||(e.startDate&&(ge(0,getMonth($(e.startDate)),getYear($(e.startDate))),k.value.multiCalendars&&Wt(0)),k.value.startTime&&ue()),Te(!0)});const Te=(L=!1)=>{if(D.value)return Array.isArray(D.value)?(x.value=D.value,F(L)):ie(D.value);if(e.timePicker)return me();if(e.monthPicker&&!e.range)return le();if(e.yearPicker&&!e.range)return Ye();if(k.value.multiCalendars&&L&&!e.startDate)return d($(),L)},d=(L,oe=!1)=>{if((!k.value.multiCalendars||!e.multiStatic||oe)&&ge(0,getMonth(L),getYear(L)),k.value.multiCalendars)for(let Re=1;Re<k.value.multiCalendars;Re++){const je=set($(),{month:q.value(Re-1),year:j.value(Re-1)}),ut=add(je,{months:1});H.value[Re]={month:getMonth(ut),year:getYear(ut)}}},ie=L=>{d(L),ye("hours",getHours(L)),ye("minutes",getMinutes(L)),ye("seconds",getSeconds(L))},re=(L,oe)=>{d(L[0],oe);const Re=(je,ut)=>[je(L[0]),L[1]?je(L[1]):Q[ut][1]];ye("hours",Re(getHours,"hours")),ye("minutes",Re(getMinutes,"minutes")),ye("seconds",Re(getSeconds,"seconds"))},ke=(L,oe)=>{if((e.range||e.weekPicker)&&!e.multiDates)return re(L,oe);if(e.multiDates){const Re=L[L.length-1];return ie(Re)}},F=L=>{const oe=D.value;ke(oe,L),k.value.multiCalendars&&e.multiCalendarsSolo&&Y()},me=()=>{if(ue(),!e.range)D.value=Fe($(),Q.hours,Q.minutes,De());else{const L=Q.hours,oe=Q.minutes;D.value=[Fe($(),L[0],oe[0],De()),Fe($(),L[1],oe[1],De(!1))]}},le=()=>{e.multiDates?D.value=[_($(),q.value(0),j.value(0))]:D.value=_($(),q.value(0),j.value(0))},Ye=()=>{D.value=$()},De=(L=!0)=>e.enableSeconds?Array.isArray(Q.seconds)?L?Q.seconds[0]:Q.seconds[1]:Q.seconds:0,ue=()=>{const L=o();if(L){const oe=Array.isArray(L),Re=oe?[+L[0].hours,+L[1].hours]:+L.hours,je=oe?[+L[0].minutes,+L[1].minutes]:+L.minutes,ut=oe?[+L[0].seconds,+L[1].seconds]:+L.seconds;ye("hours",Re),ye("minutes",je),e.enableSeconds&&ye("seconds",ut)}},w=()=>Array.isArray(D.value)&&D.value.length?D.value[D.value.length-1]:null,Y=()=>{if(Array.isArray(D.value)&&D.value.length===2){const L=$($(D.value[1]?D.value[1]:addMonths(D.value[0],1))),[oe,Re]=[getMonth(D.value[0]),getYear(D.value[0])],[je,ut]=[getMonth(D.value[1]),getYear(D.value[1])];(oe!==je||oe===je&&Re!==ut)&&e.multiCalendarsSolo&&ge(1,getMonth(L),getYear(L))}},E=L=>{const oe=addMonths(L,1);return{month:getMonth(oe),year:getYear(oe)}},W=L=>{const oe=getMonth($(L)),Re=getYear($(L));if(ge(0,oe,Re),k.value.multiCalendars>0)for(let je=1;je<k.value.multiCalendars;je++){const ut=E(set($(L),{year:q.value(je-1),month:j.value(je-1)}));ge(je,ut.month,ut.year)}},fe=L=>{if(D.value&&Array.isArray(D.value))if(D.value.some(oe=>ve(L,oe))){const oe=D.value.filter(Re=>!ve(Re,L));D.value=oe.length?oe:null}else(e.multiDatesLimit&&+e.multiDatesLimit>D.value.length||!e.multiDatesLimit)&&D.value.push(L);else D.value=[L]},T=(L,oe)=>{const Re=Be(L,oe)?oe:L,je=Be(oe,L)?oe:L;return eachDayOfInterval({start:Re,end:je})},I=(L,oe=0)=>{if(Array.isArray(D.value)&&D.value[oe]){const Re=differenceInCalendarDays(L,D.value[oe]),je=T(D.value[oe],L),ut=je.length===1?0:je.filter(se=>l(se)).length,At=Math.abs(Re)-ut;if(e.minRange&&e.maxRange)return At>=+e.minRange&&At<=+e.maxRange;if(e.minRange)return At>=+e.minRange;if(e.maxRange)return At<=+e.maxRange}return!0},S=L=>Array.isArray(D.value)&&D.value.length===2?e.fixedStart&&(Be(L,D.value[0])||ve(L,D.value[0]))?[D.value[0],L]:e.fixedEnd&&(_e(L,D.value[1])||ve(L,D.value[1]))?[L,D.value[1]]:(t("invalid-fixed-range",L),D.value):[],P=()=>{e.autoApply&&de.value&&t("auto-apply",e.partialFlow)},G=()=>{e.autoApply&&t("select-date")},B=L=>!eachDayOfInterval({start:L[0],end:L[1]}).some(oe=>l(oe)),O=L=>(D.value=m($(L.value)),P()),U=L=>{const oe=Fe($(L.value),Q.hours,Q.minutes,De());e.multiDates?fe(oe):D.value=oe,r(),P()},Z=()=>{x.value=D.value?D.value.slice():[],x.value.length===2&&!(e.fixedStart||e.fixedEnd)&&(x.value=[])},ee=(L,oe)=>{const Re=[$(L.value),addDays($(L.value),+e.autoRange)];B(Re)&&(oe&&W(L.value),x.value=Re)},we=L=>{Se(L.value)||!I(L.value,e.fixedStart?0:1)||(x.value=S($(L.value)))},Se=L=>e.noDisabledRange?T(x.value[0],L).some(oe=>l(oe)):!1,Ce=(L,oe)=>{if(Z(),e.autoRange)return ee(L,oe);if(e.fixedStart||e.fixedEnd)return we(L);x.value[0]?I($(L.value))&&!Se(L.value)&&(_e($(L.value),$(x.value[0]))?x.value.unshift($(L.value)):x.value[1]=$(L.value)):x.value[0]=$(L.value)},Je=L=>{x.value[L]=Fe(x.value[L],Q.hours[L],Q.minutes[L],De(L!==1))},Pe=()=>{x.value.length&&(x.value[0]&&!x.value[1]?Je(0):(Je(0),Je(1),r()),D.value=x.value.slice(),x.value[0]&&x.value[1]&&e.autoApply&&t("auto-apply"),x.value[0]&&!x.value[1]&&e.modelAuto&&e.autoApply&&t("auto-apply"))},qe=(L,oe=!1)=>{if(!(l(L.value)||!L.current&&e.hideOffsetDates)){if(e.weekPicker)return O(L);if(!e.range)return U(L);lt(Q.hours)&&lt(Q.minutes)&&!e.multiDates&&(Ce(L,oe),Pe())}},rt=L=>{const oe=L[0];return e.weekNumbers==="local"?getWeek(oe.value,{weekStartsOn:+e.weekStart}):e.weekNumbers==="iso"?getISOWeek(oe.value):typeof e.weekNumbers=="function"?e.weekNumbers(oe.value):""},Wt=L=>{for(let oe=L-1;oe>=0;oe--){const Re=subMonths(set($(),{month:q.value(oe+1),year:j.value(oe+1)}),1);ge(oe,getMonth(Re),getYear(Re))}for(let oe=L+1;oe<=k.value.multiCalendars-1;oe++){const Re=addMonths(set($(),{month:q.value(oe-1),year:j.value(oe-1)}),1);ge(oe,getMonth(Re),getYear(Re))}},wt=L=>_($(),q.value(L),j.value(L)),Jn=L=>Fe(L,Q.hours,Q.minutes,De()),Nt=L=>{fe(wt(L))},dn=(L,oe)=>{const Re=e.monthPicker?q.value(L)!==oe.month||!oe.fromNav:j.value(L)!==oe.year||!oe.fromNav;if(ge(L,oe.month,oe.year),k.value.multiCalendars&&!e.multiCalendarsSolo&&Wt(L),e.monthPicker||e.yearPicker)if(e.multiDates)Re&&Nt(L);else if(e.range){if(Re&&I(wt(L))){let je=D.value?D.value.slice():[];je.length===2&&je[1]!==null&&(je=[]),je.length?_e(wt(L),je[0])?je.unshift(wt(L)):je[1]=wt(L):je=[wt(L)],D.value=je}}else D.value=wt(L);t("update-month-year",{instance:L,month:oe.month,year:oe.year}),n(e.multiCalendarsSolo?L:void 0)},fn=async(L=!1)=>{if(e.autoApply&&(e.monthPicker||e.yearPicker)){await nextTick();const oe=e.monthPicker?L:!1;e.range?t("auto-apply",oe||!D.value||D.value.length===1):t("auto-apply",oe)}r()},Le=(L,oe)=>{const Re=set($(),{month:q.value(oe),year:j.value(oe)}),je=L<0?addMonths(Re,1):subMonths(Re,1);b(getMonth(je),getYear(je),L<0,e.preventMinMaxNavigation)&&(ge(oe,getMonth(je),getYear(je)),k.value.multiCalendars&&!e.multiCalendarsSolo&&Wt(oe),t("update-month-year",{instance:oe,month:getMonth(je),year:getYear(je)}),n())},gt=L=>{On(L)&&On(D.value)&&lt(Q.hours)&&lt(Q.minutes)?(L[0]&&D.value[0]&&(D.value[0]=Fe(L[0],Q.hours[0],Q.minutes[0],De())),L[1]&&D.value[1]&&(D.value[1]=Fe(L[1],Q.hours[1],Q.minutes[1],De(!1)))):e.multiDates&&Array.isArray(D.value)?D.value[D.value.length-1]=Jn(L):!e.range&&!In(L)&&(D.value=Jn(L)),t("time-update")},ia=(L,oe=!0,Re=!1)=>{const je=oe?L:Q.hours,ut=!oe&&!Re?L:Q.minutes,At=Re?L:Q.seconds;if(e.range&&In(D.value)&&lt(je)&&lt(ut)&&lt(At)&&!e.disableTimeRangeValidation){const se=ft=>Fe(D.value[ft],je[ft],ut[ft],At[ft]),Ve=ft=>setMilliseconds(D.value[ft],0);if(ve(D.value[0],D.value[1])&&(isAfter(se(0),Ve(1))||isBefore(se(1),Ve(0))))return}if(ye("hours",je),ye("minutes",ut),ye("seconds",At),D.value)if(e.multiDates){const se=w();se&&gt(se)}else gt(D.value);else e.timePicker&&gt(e.range?[$(),$()]:$());r()},sa=(L,oe)=>{e.monthChangeOnScroll&&Le(e.monthChangeOnScroll!=="inverse"?-L.deltaY:L.deltaY,oe)},oa=(L,oe,Re=!1)=>{e.monthChangeOnArrows&&e.vertical===Re&&Ln(L,oe)},Ln=(L,oe)=>{Le(L==="right"?-1:1,oe)};return{time:Q,month:q,year:j,modelValue:D,calendars:H,monthYearSelect:fn,isDisabled:l,updateTime:ia,getWeekNum:rt,selectDate:qe,updateMonthYear:dn,handleScroll:sa,getMarker:L=>e.markers.find(oe=>ve(f(L.value),f(oe.date))),handleArrow:oa,handleSwipe:Ln,selectCurrentDate:()=>{e.range?D.value&&Array.isArray(D.value)&&D.value[0]?D.value=_e($(),D.value[0])?[$(),D.value[0]]:[D.value[0],$()]:D.value=[$()]:D.value=$(),G()},presetDateRange:(L,oe)=>{oe||L.length&&L.length<=2&&e.range&&(D.value=L.map(Re=>$(Re)),G(),e.multiCalendars&&nextTick().then(()=>Te(!0)))}}},er=(e,t,r)=>{const n=ref(),{getZonedToUtc:a,getZonedDate:o,formatDate:l,getDefaultPattern:f,checkRangeEnabled:m,checkPartialRangeValue:_,isValidDate:b,setDateMonthOrYear:k,defaults:D}=Ee(t),x=ref(""),A=toRef(t,"format");watch(n,()=>{e("internal-model-change",n.value)}),watch(A,()=>{Y()});const H=S=>{const P=S||$();return t.modelType?W(P):{hours:getHours(P),minutes:getMinutes(P),seconds:t.enableSeconds?getSeconds(P):0}},Q=S=>t.modelType?W(S):{month:getMonth(S),year:getYear(S)},q=S=>Array.isArray(S)?m(()=>[setYear($(),S[0]),S[1]?setYear($(),S[1]):_()]):setYear($(),+S),j=(S,P)=>(typeof S=="string"||typeof S=="number")&&t.modelType?E(S):P,de=S=>Array.isArray(S)?[j(S[0],Fe(null,+S[0].hours,+S[0].minutes,S[0].seconds)),j(S[1],Fe(null,+S[1].hours,+S[1].minutes,S[1].seconds))]:j(S,Fe(null,S.hours,S.minutes,S.seconds)),ge=S=>Array.isArray(S)?t.multiDates?S.map(P=>j(P,k(null,+P.month,+P.year))):m(()=>[j(S[0],k(null,+S[0].month,+S[0].year)),j(S[1],S[1]?k(null,+S[1].month,+S[1].year):_())]):j(S,k(null,+S.month,+S.year)),ye=S=>{if(Array.isArray(S))return S.map(P=>E(P));throw new Error(Ft.dateArr("multi-dates"))},Te=S=>{if(Array.isArray(S))return[$(S[0]),$(S[1])];throw new Error(Ft.dateArr("week-picker"))},d=S=>t.modelAuto?Array.isArray(S)?[E(S[0]),E(S[1])]:t.autoApply?[E(S)]:[E(S),null]:Array.isArray(S)?m(()=>[E(S[0]),S[1]?E(S[1]):_()]):E(S),ie=()=>{Array.isArray(n.value)&&t.range&&n.value.length===1&&n.value.push(_())},re=()=>{const S=n.value;return[W(S[0]),S[1]?W(S[1]):_()]},ke=()=>n.value[1]?re():W(Me(n.value[0])),F=()=>(n.value||[]).map(S=>W(S)),me=()=>(ie(),t.modelAuto?ke():t.multiDates?F():Array.isArray(n.value)?m(()=>re()):W(Me(n.value))),le=S=>S?t.timePicker?de(Me(S)):t.monthPicker?ge(Me(S)):t.yearPicker?q(Me(S)):t.multiDates?ye(Me(S)):t.weekPicker?Te(Me(S)):d(Me(S)):null,Ye=S=>{const P=le(S);b(Me(P))?(n.value=Me(P),Y()):(n.value=null,x.value="")},De=()=>{var S;const P=G=>{var B;return format(G,(B=D.value.textInputOptions)==null?void 0:B.format)};return`${P(n.value[0])} ${(S=D.value.textInputOptions)==null?void 0:S.rangeSeparator} ${n.value[1]?P(n.value[1]):""}`},ue=()=>{var S;return r.value&&n.value?Array.isArray(n.value)?De():format(n.value,(S=D.value.textInputOptions)==null?void 0:S.format):l(n.value)},w=()=>{var S;return n.value?t.multiDates?n.value.map(P=>l(P)).join("; "):t.textInput&&typeof((S=D.value.textInputOptions)==null?void 0:S.format)=="string"?ue():l(n.value):""},Y=()=>{!t.format||typeof t.format=="string"?x.value=w():x.value=t.format(n.value)},E=S=>{if(t.utc){const P=new Date(S);return t.utc==="preserve"?new Date(P.getTime()+P.getTimezoneOffset()*6e4):P}return t.modelType?t.modelType==="date"||t.modelType==="timestamp"?o(new Date(S)):t.modelType==="format"&&(typeof t.format=="string"||!t.format)?parse(S,f(),new Date):o(parse(S,t.modelType,new Date)):o(new Date(S))},W=S=>S?t.utc?ma(S,t.utc==="preserve"):t.modelType?t.modelType==="timestamp"?+a(S):t.modelType==="format"&&(typeof t.format=="string"||!t.format)?l(a(S)):l(a(S),t.modelType):a(S):"",fe=S=>{e("update:model-value",S)},T=S=>Array.isArray(n.value)?t.multiDates?n.value.map(P=>S(P)):[S(n.value[0]),n.value[1]?S(n.value[1]):_()]:S(Me(n.value)),I=S=>fe(Me(T(S)));return{inputValue:x,internalModelValue:n,checkBeforeEmit:()=>n.value?t.range?t.partialRange?n.value.length>=1:n.value.length===2:!!n.value:!1,parseExternalModelValue:Ye,formatInputValue:Y,emitModelValue:()=>(Y(),t.monthPicker?I(Q):t.timePicker?I(H):t.yearPicker?I(getYear):t.weekPicker?fe(n.value):fe(me()))}},tr=(e,t)=>{const{validateMonthYearInRange:r,validateMaxDate:n,validateMinDate:a,defaults:o}=Ee(e),l=(k,D)=>{let x=k;return o.value.filters.months.includes(getMonth(x))?(x=D?addMonths(k,1):subMonths(k,1),l(x,D)):x},f=(k,D)=>{let x=k;return o.value.filters.years.includes(getYear(x))?(x=D?addYears(k,1):subYears(k,1),f(x,D)):x},m=k=>{const D=set(new Date,{month:e.month,year:e.year});let x=k?addMonths(D,1):subMonths(D,1),A=getMonth(x),H=getYear(x);o.value.filters.months.includes(A)&&(x=l(x,k),A=getMonth(x),H=getYear(x)),o.value.filters.years.includes(H)&&(x=f(x,k),H=getYear(x)),r(A,H,k,e.preventMinMaxNavigation)&&_(A,H)},_=(k,D)=>{t("update-month-year",{month:k,year:D})},b=computed(()=>k=>{if(!e.preventMinMaxNavigation||k&&!e.maxDate||!k&&!e.minDate)return!1;const D=set(new Date,{month:e.month,year:e.year}),x=k?addMonths(D,1):subMonths(D,1),A=[getMonth(x),getYear(x)];return k?!n(...A):!a(...A)});return{handleMonthYearChange:m,isDisabled:b,updateMonthYear:_}};var It=(e=>(e.center="center",e.left="left",e.right="right",e))(It||{});const nr=(e,t,r,n)=>{const a=ref({top:"0",left:"0",transform:"none"}),o=ref(!1),l=toRef(n,"teleportCenter");watch(l,()=>{H()});const f=ie=>{if(n.teleport){const re=ie.getBoundingClientRect();return{left:re.left+window.scrollX,top:re.top+window.scrollY}}return{top:0,left:0}},m=(ie,re)=>{a.value.left=`${ie+re}px`,a.value.transform="translateX(-100%)"},_=ie=>{a.value.left=`${ie}px`,a.value.transform="translateX(0)"},b=(ie,re,ke=!1)=>{n.position===It.left&&_(ie),n.position===It.right&&m(ie,re),n.position===It.center&&(a.value.left=`${ie+re/2}px`,a.value.transform=ke?"translate(-50%, -50%)":"translateX(-50%)")},k=ie=>{const{width:re,height:ke}=ie.getBoundingClientRect(),{top:F,left:me}=n.altPosition?n.altPosition(ie):f(ie);return{top:+F,left:+me,width:re,height:ke}},D=()=>{const ie=$e(t);if(ie){const{top:re,left:ke,width:F,height:me}=k(ie);a.value.top=`${re+me/2}px`,a.value.transform="translateY(-50%)",b(ke,F,!0)}},x=()=>{a.value.left="50%",a.value.top="50%",a.value.transform="translate(-50%, -50%)",a.value.position="fixed"},A=()=>{const ie=$e(t),{top:re,left:ke,transform:F}=n.altPosition(ie);a.value={top:`${re}px`,left:`${ke}px`,transform:F||""}},H=(ie=!0)=>{if(!n.inline)return l.value?x():n.altPosition!==null?A():(ie&&r("recalculate-position"),ye())},Q=({inputEl:ie,menuEl:re,left:ke,width:F})=>{window.screen.width>768&&b(ke,F),de(ie,re)},q=(ie,re)=>{const{top:ke,left:F,height:me,width:le}=k(ie);a.value.top=`${me+ke+ +n.offset}px`,Q({inputEl:ie,menuEl:re,left:F,width:le}),o.value=!1},j=(ie,re)=>{const{top:ke,left:F,width:me}=k(ie),{height:le}=re.getBoundingClientRect();a.value.top=`${ke-le-+n.offset}px`,Q({inputEl:ie,menuEl:re,left:F,width:me}),o.value=!0},de=(ie,re)=>{if(n.autoPosition){const{left:ke,width:F}=k(ie),{left:me,right:le}=re.getBoundingClientRect();return me<=0||me<=ke?_(ke):le>=document.documentElement.clientWidth?m(ke,F):b(ke,F)}},ge=(ie,re)=>{const{height:ke}=re.getBoundingClientRect(),{top:F,height:me}=ie.getBoundingClientRect(),le=window.innerHeight-F-me,Ye=F;return ke<=le?q(ie,re):ke>le&&ke<=Ye?j(ie,re):le>=Ye?q(ie,re):j(ie,re)},ye=()=>{const ie=$e(t),re=$e(e);if(ie&&re)return n.autoPosition?ge(ie,re):q(ie,re)},Te=function(ie){if(ie){const re=ie.scrollHeight>ie.clientHeight,ke=window.getComputedStyle(ie).overflowY.indexOf("hidden")!==-1;return re&&!ke}return!0},d=function(ie){return!ie||ie===document.body||ie.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:Te(ie)?ie:d(ie.parentNode)};return{openOnTop:o,menuPosition:a,setMenuPosition:H,setInitialPosition:D,getScrollableParent:d}},vt=[{name:"clock-icon",use:["time","calendar"]},{name:"arrow-left",use:["month-year","calendar"]},{name:"arrow-right",use:["month-year","calendar"]},{name:"arrow-up",use:["time","calendar"]},{name:"arrow-down",use:["time","calendar"]},{name:"calendar-icon",use:["month-year","time","calendar"]},{name:"day",use:["calendar"]},{name:"month-overlay-value",use:["calendar","month-year"]},{name:"year-overlay-value",use:["calendar","month-year"]},{name:"year-overlay",use:["month-year"]},{name:"month-overlay",use:["month-year"]},{name:"month-overlay-header",use:["month-year"]},{name:"year-overlay-header",use:["month-year"]},{name:"hours-overlay-value",use:["calendar","time"]},{name:"minutes-overlay-value",use:["calendar","time"]},{name:"seconds-overlay-value",use:["calendar","time"]},{name:"hours",use:["calendar","time"]},{name:"minutes",use:["calendar","time"]},{name:"month",use:["calendar","month-year"]},{name:"year",use:["calendar","month-year"]},{name:"action-select",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar"]},{name:"marker-tooltip",use:["calendar"]},{name:"now-button",use:[]},{name:"time-picker-overlay",use:["calendar","time"]},{name:"am-pm-button",use:["calendar","time"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year"]},{name:"time-picker",use:["menu"]},{name:"action-row",use:["action"]}],ar=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],rr={all:()=>vt,monthYear:()=>vt.filter(e=>e.use.includes("month-year")),input:()=>ar,timePicker:()=>vt.filter(e=>e.use.includes("time")),action:()=>vt.filter(e=>e.use.includes("action")),calendar:()=>vt.filter(e=>e.use.includes("calendar")),menu:()=>vt.filter(e=>e.use.includes("menu"))},it=(e,t,r)=>{const n=[];return rr[t]().forEach(a=>{e[a.name]&&n.push(a.name)}),r&&r.length&&r.forEach(a=>{a.slot&&n.push(a.slot)}),n},Ut=e=>({transitionName:computed(()=>t=>e&&typeof e!="boolean"?t?e.open:e.close:""),showTransition:!!e}),at={multiCalendars:{type:[Boolean,Number,String],default:null},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},closeOnScroll:{type:Boolean,default:!1},autoPosition:{type:Boolean,default:!0},closeOnAutoApply:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},multiCalendarsSolo:{type:Boolean,default:!1},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:()=>[]},showNowButton:{type:Boolean,default:!1},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},modeHeight:{type:[Number,String],default:255},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetRanges:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},keepActionRow:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},multiStatic:{type:Boolean,default:!0},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function],default:null},calendarClassName:{type:String,default:null},noSwipe:{type:Boolean,default:!1},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},inlineWithInput:{type:Boolean,default:!1},textInputOptions:{type:Object,default:()=>null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},textInput:{type:Boolean,default:!1},onClickOutside:{type:Function,default:null},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:Boolean,default:!1}},lr=["aria-label","aria-disabled","aria-readonly"],or={key:1,class:"dp__input_wrap"},sr=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","onKeydown"],ir={key:2,class:"dp__input_icon"},ur={key:4,class:"dp__clear_icon"},dr=defineComponent({__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...at},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur"],setup(e,{expose:t,emit:r}){const n=e,{getDefaultPattern:a,isValidDate:o,defaults:l,getDefaultStartTime:f,assignDefaultTime:m}=Ee(n),_=ref(),b=ref(null),k=ref(!1),D=ref(!1),x=computed(()=>({dp__pointer:!n.disabled&&!n.readonly&&!n.textInput,dp__disabled:n.disabled,dp__input_readonly:!n.textInput,dp__input:!0,dp__input_icon_pad:!n.hideInputIcon,dp__input_valid:n.state,dp__input_invalid:n.state===!1,dp__input_focus:k.value||n.isMenuOpen,dp__input_reg:!n.textInput,[n.inputClassName]:!!n.inputClassName})),A=()=>{r("set-input-date",null),n.autoApply&&(r("set-empty-date"),_.value=null)},H=F=>{var me;const le=f();return va(F,((me=l.value.textInputOptions)==null?void 0:me.format)||a(),le||m({}),n.inputValue,D.value)},Q=F=>{const{rangeSeparator:me}=l.value.textInputOptions,[le,Ye]=F.split(`${me}`);if(le){const De=H(le.trim()),ue=Ye?H(Ye.trim()):null,w=De&&ue?[De,ue]:[De];_.value=De?w:null}},q=()=>{D.value=!0},j=F=>{if(n.range)Q(F);else if(n.multiDates){const me=F.split(";");_.value=me.map(le=>H(le.trim())).filter(le=>le)}else _.value=H(F)},de=F=>{var me;const{value:le}=F.target;le!==""?((me=l.value.textInputOptions)!=null&&me.openMenu&&!n.isMenuOpen&&r("open"),j(le),r("set-input-date",_.value)):A(),D.value=!1,r("update:input-value",le)},ge=()=>{var F,me;(F=l.value.textInputOptions)!=null&&F.enterSubmit&&o(_.value)&&n.inputValue!==""?(r("set-input-date",_.value,!0),_.value=null):(me=l.value.textInputOptions)!=null&&me.enterSubmit&&n.inputValue===""&&(_.value=null,r("clear"))},ye=()=>{var F,me;(F=l.value.textInputOptions)!=null&&F.tabSubmit&&o(_.value)&&n.inputValue!==""?(r("set-input-date",_.value,!0),_.value=null):(me=l.value.textInputOptions)!=null&&me.tabSubmit&&n.inputValue===""&&(_.value=null,r("clear"))},Te=()=>{k.value=!0,r("focus")},d=F=>{var me;F.preventDefault(),F.stopImmediatePropagation(),F.stopPropagation(),n.textInput&&(me=l.value.textInputOptions)!=null&&me.openMenu&&!n.inlineWithInput?n.isMenuOpen?l.value.textInputOptions.enterSubmit&&r("select-date"):r("open"):n.textInput||r("toggle")},ie=()=>{k.value=!1,n.isMenuOpen||r("blur"),n.autoApply&&n.textInput&&_.value&&(r("set-input-date",_.value),r("select-date"),_.value=null)},re=()=>{r("clear")},ke=F=>{if(!n.textInput){if(F.code==="Tab")return;F.preventDefault()}};return t({focusInput:()=>{b.value&&b.value.focus({preventScroll:!0})},setParsedDate:F=>{_.value=F}}),(F,me)=>{var le;return openBlock(),createElementBlock("div",{onClick:d,"aria-label":(le=unref(l).ariaLabels)==null?void 0:le.input,role:"textbox","aria-multiline":"false","aria-disabled":F.disabled,"aria-readonly":F.readonly},[F.$slots.trigger&&!F.$slots["dp-input"]&&!F.inline?renderSlot(F.$slots,"trigger",{key:0}):createCommentVNode("",!0),!F.$slots.trigger&&(!F.inline||F.inlineWithInput)?(openBlock(),createElementBlock("div",or,[F.$slots["dp-input"]&&!F.$slots.trigger&&!F.inline?renderSlot(F.$slots,"dp-input",{key:0,value:e.inputValue,onInput:de,onEnter:ge,onTab:ye,onClear:re,onBlur:ie}):createCommentVNode("",!0),F.$slots["dp-input"]?createCommentVNode("",!0):(openBlock(),createElementBlock("input",{key:1,ref_key:"inputRef",ref:b,id:F.uid?`dp-input-${F.uid}`:void 0,name:F.name,class:normalizeClass(unref(x)),inputmode:F.textInput?"text":"none",placeholder:F.placeholder,disabled:F.disabled,readonly:F.readonly,required:F.required,value:e.inputValue,autocomplete:F.autocomplete,onInput:de,onKeydown:[withKeys(d,["enter"]),withKeys(ye,["tab"]),ke],onBlur:ie,onFocus:Te,onKeypress:ke,onPaste:q},null,42,sr)),F.$slots["input-icon"]&&!F.hideInputIcon?(openBlock(),createElementBlock("span",ir,[renderSlot(F.$slots,"input-icon")])):createCommentVNode("",!0),!F.$slots["input-icon"]&&!F.hideInputIcon&&!F.$slots["dp-input"]?(openBlock(),createBlock(unref(Lt),{key:3,class:"dp__input_icon dp__input_icons"})):createCommentVNode("",!0),F.$slots["clear-icon"]&&e.inputValue&&F.clearable&&!F.disabled&&!F.readonly?(openBlock(),createElementBlock("span",ur,[renderSlot(F.$slots,"clear-icon",{clear:re})])):createCommentVNode("",!0),F.clearable&&!F.$slots["clear-icon"]&&e.inputValue&&!F.disabled&&!F.readonly?(openBlock(),createBlock(unref(fa),{key:5,class:"dp__clear_icon dp__input_icons","data-test":"clear-icon",onClick:withModifiers(re,["stop","prevent"])},null,8,["onClick"])):createCommentVNode("",!0)])):createCommentVNode("",!0)],8,lr)}}}),cr=["title"],fr={class:"dp__action_buttons"},vr=["onKeydown","disabled"],mr=defineComponent({__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},calendarWidth:{type:Number,default:0},...at},emits:["close-picker","select-date","invalid-select"],setup(e,{emit:t}){const r=e,{formatDate:n,isValidTime:a,defaults:o}=Ee(r),{buildMatrix:l}=nt(),f=ref(null),m=ref(null);onMounted(()=>{r.arrowNavigation&&l([$e(f),$e(m)],"actionRow")});const _=computed(()=>r.range&&!r.partialRange&&r.internalModelValue?r.internalModelValue.length===2:!0),b=computed(()=>!k.value||!D.value||!_.value),k=computed(()=>!r.enableTimePicker||r.ignoreTimeValidation?!0:a(r.internalModelValue)),D=computed(()=>r.monthPicker?r.range&&Array.isArray(r.internalModelValue)?!r.internalModelValue.filter(j=>!Q(j)).length:Q(r.internalModelValue):!0),x=()=>{const j=o.value.previewFormat;return r.timePicker||r.monthPicker,j(Me(r.internalModelValue))},A=()=>{const j=r.internalModelValue;return o.value.multiCalendars>0?`${n(j[0])} - ${n(j[1])}`:[n(j[0]),n(j[1])]},H=computed(()=>!r.internalModelValue||!r.menuMount?"":typeof o.value.previewFormat=="string"?Array.isArray(r.internalModelValue)?r.internalModelValue.length===2&&r.internalModelValue[1]?A():r.multiDates?r.internalModelValue.map(j=>`${n(j)}`):r.modelAuto?`${n(r.internalModelValue[0])}`:`${n(r.internalModelValue[0])} -`:n(r.internalModelValue):x()),Q=j=>{if(!r.monthPicker)return!0;let de=!0;const ge=$(pt(j));if(r.minDate&&r.maxDate){const ye=$(pt(r.minDate)),Te=$(pt(r.maxDate));return Be(ge,ye)&&_e(ge,Te)||ve(ge,ye)||ve(ge,Te)}if(r.minDate){const ye=$(pt(r.minDate));de=Be(ge,ye)||ve(ge,ye)}if(r.maxDate){const ye=$(pt(r.maxDate));de=_e(ge,ye)||ve(ge,ye)}return de},q=()=>{k.value&&D.value&&_.value?t("select-date"):t("invalid-select")};return(j,de)=>(openBlock(),createElementBlock("div",{class:"dp__action_row",style:normalizeStyle(e.calendarWidth?{width:`${e.calendarWidth}px`}:{})},[j.$slots["action-row"]?renderSlot(j.$slots,"action-row",normalizeProps(mergeProps({key:0},{internalModelValue:e.internalModelValue,disabled:unref(b),selectDate:()=>j.$emit("select-date"),closePicker:()=>j.$emit("close-picker")}))):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",{class:"dp__selection_preview",title:Array.isArray(unref(H))?"":unref(H)},[j.$slots["action-preview"]?renderSlot(j.$slots,"action-preview",{key:0,value:e.internalModelValue}):createCommentVNode("",!0),j.$slots["action-preview"]?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[Array.isArray(unref(H))?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(unref(H)),1)],64)),Array.isArray(unref(H))?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(H),(ge,ye)=>(openBlock(),createElementBlock("div",{key:ye},toDisplayString(ge),1))),128)):createCommentVNode("",!0)],64))],8,cr),createBaseVNode("div",fr,[j.$slots["action-select"]?renderSlot(j.$slots,"action-select",{key:0,value:e.internalModelValue}):createCommentVNode("",!0),j.$slots["action-select"]?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[j.inline?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,ref_key:"cancelButtonRef",ref:f,class:"dp__action_button dp__action_cancel",onClick:de[0]||(de[0]=ge=>j.$emit("close-picker")),onKeydown:[de[1]||(de[1]=withKeys(ge=>j.$emit("close-picker"),["enter"])),de[2]||(de[2]=withKeys(ge=>j.$emit("close-picker"),["space"]))]},toDisplayString(j.cancelText),545)),createBaseVNode("button",{class:"dp__action_button dp__action_select",onKeydown:[withKeys(q,["enter"]),withKeys(q,["space"])],onClick:q,disabled:unref(b),"data-test":"select-button",ref_key:"selectButtonRef",ref:m},toDisplayString(j.selectText),41,vr)],64))])],64))],4))}}),yr=["aria-label"],gr={class:"dp__calendar_header",role:"row"},hr={key:0,class:"dp__calendar_header_item",role:"gridcell"},pr=createBaseVNode("div",{class:"dp__calendar_header_separator"},null,-1),kr=["aria-label"],wr={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},br={class:"dp__cell_inner"},Dr=["aria-selected","aria-disabled","aria-label","data-test","onClick","onKeydown","onMouseenter","onMouseleave"],$r=defineComponent({__name:"Calendar",props:{mappedDates:{type:Array,default:()=>[]},getWeekNum:{type:Function,default:()=>""},specificMode:{type:Boolean,default:!1},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...at},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(e,{expose:t,emit:r}){const n=e,{buildMultiLevelMatrix:a}=nt(),{setDateMonthOrYear:o,defaults:l}=Ee(n),f=ref(null),m=ref({bottom:"",left:"",transform:""}),_=ref([]),b=ref(null),k=ref(!0),D=ref(""),x=ref({startX:0,endX:0,startY:0,endY:0}),A=ref([]),H=ref({left:"50%"}),Q=computed(()=>n.dayNames?Array.isArray(n.dayNames)?n.dayNames:n.dayNames(n.locale,+n.weekStart):Ha(n.locale,+n.weekStart));onMounted(()=>{r("mount",{cmp:"calendar",refs:_}),n.noSwipe||b.value&&(b.value.addEventListener("touchstart",F,{passive:!1}),b.value.addEventListener("touchend",me,{passive:!1}),b.value.addEventListener("touchmove",le,{passive:!1})),n.monthChangeOnScroll&&b.value&&b.value.addEventListener("wheel",ue,{passive:!1})});const q=w=>w?n.vertical?"vNext":"next":n.vertical?"vPrevious":"previous",j=(w,Y)=>{if(n.transitions){const E=Ue(o($(),n.month,n.year));D.value=Be(Ue(o($(),w,Y)),E)?l.value.transitions[q(!0)]:l.value.transitions[q(!1)],k.value=!1,nextTick(()=>{k.value=!0})}},de=computed(()=>({dp__calendar_wrap:!0,[n.calendarClassName]:!!n.calendarClassName})),ge=computed(()=>w=>{const Y=Ka(w);return{dp__marker_dot:Y.type==="dot",dp__marker_line:Y.type==="line"}}),ye=computed(()=>w=>ve(w,f.value)),Te=computed(()=>({dp__calendar:!0,dp__calendar_next:l.value.multiCalendars>0&&n.instance!==0})),d=computed(()=>w=>n.hideOffsetDates?w.current:!0),ie=computed(()=>n.specificMode?{height:`${n.modeHeight}px`}:void 0),re=async(w,Y,E)=>{var W,fe;if(r("set-hover-date",w),(fe=(W=w.marker)==null?void 0:W.tooltip)!=null&&fe.length){const T=$e(_.value[Y][E]);if(T){const{width:I,height:S}=T.getBoundingClientRect();f.value=w.value;let P={left:`${I/2}px`},G=-50;if(await nextTick(),A.value[0]){const{left:B,width:O}=A.value[0].getBoundingClientRect();B<0&&(P={left:"0"},G=0,H.value.left=`${I/2}px`),window.innerWidth<B+O&&(P={right:"0"},G=0,H.value.left=`${O-I/2}px`)}m.value={bottom:`${S}px`,...P,transform:`translateX(${G}%)`},r("tooltip-open",w.marker)}}},ke=w=>{f.value&&(f.value=null,m.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),r("tooltip-close",w.marker))},F=w=>{x.value.startX=w.changedTouches[0].screenX,x.value.startY=w.changedTouches[0].screenY},me=w=>{x.value.endX=w.changedTouches[0].screenX,x.value.endY=w.changedTouches[0].screenY,Ye()},le=w=>{n.vertical&&!n.inline&&w.preventDefault()},Ye=()=>{const w=n.vertical?"Y":"X";Math.abs(x.value[`start${w}`]-x.value[`end${w}`])>10&&r("handle-swipe",x.value[`start${w}`]>x.value[`end${w}`]?"right":"left")},De=(w,Y,E)=>{w&&(Array.isArray(_.value[Y])?_.value[Y][E]=w:_.value[Y]=[w]),n.arrowNavigation&&a(_.value,"calendar")},ue=w=>{n.monthChangeOnScroll&&(w.preventDefault(),r("handle-scroll",w))};return t({triggerTransition:j}),(w,Y)=>{var E;return openBlock(),createElementBlock("div",{class:normalizeClass(unref(Te))},[createBaseVNode("div",{style:normalizeStyle(unref(ie))},[e.specificMode?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,ref_key:"calendarWrapRef",ref:b,class:normalizeClass(unref(de)),role:"grid","aria-label":(E=unref(l).ariaLabels)==null?void 0:E.calendarWrap},[createBaseVNode("div",gr,[w.weekNumbers?(openBlock(),createElementBlock("div",hr,toDisplayString(w.weekNumName),1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Q),(W,fe)=>(openBlock(),createElementBlock("div",{class:"dp__calendar_header_item",role:"gridcell",key:fe,"data-test":"calendar-header"},[w.$slots["calendar-header"]?renderSlot(w.$slots,"calendar-header",{key:0,day:W,index:fe}):createCommentVNode("",!0),w.$slots["calendar-header"]?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(W),1)],64))]))),128))]),pr,createVNode(Transition,{name:D.value,css:!!w.transitions},{default:withCtx(()=>{var W;return[k.value?(openBlock(),createElementBlock("div",{key:0,class:"dp__calendar",role:"grid","aria-label":(W=unref(l).ariaLabels)==null?void 0:W.calendarDays},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.mappedDates,(fe,T)=>(openBlock(),createElementBlock("div",{class:"dp__calendar_row",role:"row",key:T},[w.weekNumbers?(openBlock(),createElementBlock("div",wr,[createBaseVNode("div",br,toDisplayString(e.getWeekNum(fe.days)),1)])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(fe.days,(I,S)=>{var P,G,B;return openBlock(),createElementBlock("div",{role:"gridcell",class:"dp__calendar_item",ref_for:!0,ref:O=>De(O,T,S),key:S+T,"aria-selected":I.classData.dp__active_date||I.classData.dp__range_start||I.classData.dp__range_start,"aria-disabled":I.classData.dp__cell_disabled,"aria-label":(G=(P=unref(l).ariaLabels)==null?void 0:P.day)==null?void 0:G.call(P,I),tabindex:"0","data-test":I.value,onClick:withModifiers(O=>w.$emit("select-date",I),["stop","prevent"]),onKeydown:[withKeys(O=>w.$emit("select-date",I),["enter"]),withKeys(O=>w.$emit("handle-space",I),["space"])],onMouseenter:O=>re(I,T,S),onMouseleave:O=>ke(I)},[createBaseVNode("div",{class:normalizeClass(["dp__cell_inner",I.classData])},[w.$slots.day&&unref(d)(I)?renderSlot(w.$slots,"day",{key:0,day:+I.text,date:I.value}):createCommentVNode("",!0),w.$slots.day?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(I.text),1)],64)),I.marker&&unref(d)(I)?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(ge)(I.marker)),style:normalizeStyle(I.marker.color?{backgroundColor:I.marker.color}:{})},null,6)):createCommentVNode("",!0),unref(ye)(I.value)?(openBlock(),createElementBlock("div",{key:3,class:"dp__marker_tooltip",ref_for:!0,ref_key:"activeTooltip",ref:A,style:normalizeStyle(m.value)},[(B=I.marker)!=null&&B.tooltip?(openBlock(),createElementBlock("div",{key:0,class:"dp__tooltip_content",onClick:Y[0]||(Y[0]=withModifiers(()=>{},["stop"]))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.marker.tooltip,(O,U)=>(openBlock(),createElementBlock("div",{key:U,class:"dp__tooltip_text"},[w.$slots["marker-tooltip"]?renderSlot(w.$slots,"marker-tooltip",{key:0,tooltip:O,day:I.value}):createCommentVNode("",!0),w.$slots["marker-tooltip"]?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",{class:"dp__tooltip_mark",style:normalizeStyle(O.color?{backgroundColor:O.color}:{})},null,4),createBaseVNode("div",null,toDisplayString(O.text),1)],64))]))),128)),createBaseVNode("div",{class:"dp__arrow_bottom_tp",style:normalizeStyle(H.value)},null,4)])):createCommentVNode("",!0)],4)):createCommentVNode("",!0)],2)],40,Dr)}),128))]))),128))],8,kr)):createCommentVNode("",!0)]}),_:3},8,["name","css"])],10,yr))],4)],2)}}}),Mr=["aria-label","aria-disabled"],rn=defineComponent({__name:"ActionIcon",props:{ariaLabel:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["activate","set-ref"],setup(e,{emit:t}){const r=ref(null);return onMounted(()=>t("set-ref",r)),(n,a)=>(openBlock(),createElementBlock("div",{class:"dp__month_year_col_nav",onClick:a[0]||(a[0]=o=>n.$emit("activate")),onKeydown:[a[1]||(a[1]=withKeys(o=>n.$emit("activate"),["enter"])),a[2]||(a[2]=withKeys(o=>n.$emit("activate"),["space"]))],tabindex:"0",role:"button","aria-label":e.ariaLabel,"aria-disabled":e.disabled,ref_key:"elRef",ref:r},[createBaseVNode("div",{class:normalizeClass(["dp__inner_nav",{dp__inner_nav_disabled:e.disabled}])},[renderSlot(n.$slots,"default")],2)],40,Mr))}}),Tr=["onKeydown"],Ar={class:"dp__selection_grid_header"},Sr=["aria-selected","aria-disabled","data-test","onClick","onKeydown","onMouseover"],Cr=["aria-label","onKeydown"],Dt=defineComponent({__name:"SelectionGrid",props:{items:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:null},multiModelValue:{type:Array,default:()=>[]},disabledValues:{type:Array,default:()=>[]},minValue:{type:[Number,String],default:null},maxValue:{type:[Number,String],default:null},year:{type:Number,default:0},skipActive:{type:Boolean,default:!1},headerRefs:{type:Array,default:()=>[]},skipButtonRef:{type:Boolean,default:!1},monthPicker:{type:Boolean,default:!1},yearPicker:{type:Boolean,default:!1},escClose:{type:Boolean,default:!0},type:{type:String,default:null},arrowNavigation:{type:Boolean,default:!1},autoApply:{type:Boolean,default:!1},textInput:{type:Boolean,default:!1},ariaLabels:{type:Object,default:()=>({})},hideNavigation:{type:Array,default:()=>[]}},emits:["update:model-value","selected","toggle","reset-flow"],setup(e,{expose:t,emit:r}){const n=e,{setSelectionGrid:a,buildMultiLevelMatrix:o,setMonthPicker:l}=nt(),{hideNavigationButtons:f}=Ee(n),m=ref(!1),_=ref(null),b=ref(null),k=ref([]),D=ref(),x=ref(null),A=ref(0),H=ref(null);onBeforeUpdate(()=>{_.value=null}),onMounted(()=>{nextTick().then(()=>re()),q(),Q(!0)}),onUnmounted(()=>Q(!1));const Q=ue=>{var w;n.arrowNavigation&&((w=n.headerRefs)!=null&&w.length?l(ue):a(ue))},q=()=>{const ue=$e(b);ue&&(n.textInput||ue.focus({preventScroll:!0}),m.value=ue.clientHeight<ue.scrollHeight)},j=computed(()=>({dp__overlay:!0})),de=computed(()=>({dp__overlay_col:!0})),ge=ue=>n.skipActive?!1:ue.value===n.modelValue,ye=computed(()=>n.items.map(ue=>ue.filter(w=>w).map(w=>{var Y,E,W;const fe=n.disabledValues.some(I=>I===w.value)||ie(w.value),T=(Y=n.multiModelValue)!=null&&Y.length?(E=n.multiModelValue)==null?void 0:E.some(I=>ve(I,setYear(n.monthPicker?setMonth(new Date,w.value):new Date,n.monthPicker?n.year:w.value))):ge(w);return{...w,className:{dp__overlay_cell_active:T,dp__overlay_cell:!T,dp__overlay_cell_disabled:fe,dp__overlay_cell_active_disabled:fe&&T,dp__overlay_cell_pad:!0,dp__cell_in_between:(W=n.multiModelValue)!=null&&W.length&&n.skipActive?F(w.value):!1}}}))),Te=computed(()=>({dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:m.value,dp__button_bottom:n.autoApply})),d=computed(()=>{var ue,w;return{dp__overlay_container:!0,dp__container_flex:((ue=n.items)==null?void 0:ue.length)<=6,dp__container_block:((w=n.items)==null?void 0:w.length)>6}}),ie=ue=>{const w=n.maxValue||n.maxValue===0,Y=n.minValue||n.minValue===0;return!w&&!Y?!1:w&&Y?+ue>+n.maxValue||+ue<+n.minValue:w?+ue>+n.maxValue:Y?+ue<+n.minValue:!1},re=()=>{const ue=$e(_),w=$e(b),Y=$e(x),E=$e(H),W=Y?Y.getBoundingClientRect().height:0;w&&(A.value=w.getBoundingClientRect().height-W),ue&&E&&(E.scrollTop=ue.offsetTop-E.offsetTop-(A.value/2-ue.getBoundingClientRect().height)-W)},ke=ue=>{!n.disabledValues.some(w=>w===ue)&&!ie(ue)&&(r("update:model-value",ue),r("selected"))},F=ue=>{const w=n.monthPicker?n.year:ue;return xn(n.multiModelValue,setYear(n.monthPicker?setMonth(new Date,D.value||0):new Date,n.monthPicker?w:D.value||w),setYear(n.monthPicker?setMonth(new Date,ue):new Date,w))},me=()=>{r("toggle"),r("reset-flow")},le=()=>{n.escClose&&me()},Ye=(ue,w,Y,E)=>{ue&&(w.value===+n.modelValue&&!n.disabledValues.includes(w.value)&&(_.value=ue),n.arrowNavigation&&(Array.isArray(k.value[Y])?k.value[Y][E]=ue:k.value[Y]=[ue],De()))},De=()=>{var ue,w;const Y=(ue=n.headerRefs)!=null&&ue.length?[n.headerRefs].concat(k.value):k.value.concat([n.skipButtonRef?[]:[x.value]]);o(Me(Y),(w=n.headerRefs)!=null&&w.length?"monthPicker":"selectionGrid")};return t({focusGrid:q}),(ue,w)=>{var Y;return openBlock(),createElementBlock("div",{ref_key:"gridWrapRef",ref:b,class:normalizeClass(unref(j)),role:"dialog",tabindex:"0",onKeydown:withKeys(le,["esc"])},[createBaseVNode("div",{class:normalizeClass(unref(d)),ref_key:"containerRef",ref:H,role:"grid",style:normalizeStyle({height:`${A.value}px`})},[createBaseVNode("div",Ar,[renderSlot(ue.$slots,"header")]),ue.$slots.overlay?renderSlot(ue.$slots,"overlay",{key:0}):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(ye),(E,W)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["dp__overlay_row",{dp__flex_row:unref(ye).length>=3}]),key:W,role:"row"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(E,(fe,T)=>(openBlock(),createElementBlock("div",{role:"gridcell",class:normalizeClass(unref(de)),key:fe.value,"aria-selected":fe.value===e.modelValue&&!e.disabledValues.includes(fe.value),"aria-disabled":fe.className.dp__overlay_cell_disabled,ref_for:!0,ref:I=>Ye(I,fe,W,T),tabindex:"0","data-test":fe.text,onClick:I=>ke(fe.value),onKeydown:[withKeys(I=>ke(fe.value),["enter"]),withKeys(I=>ke(fe.value),["space"])],onMouseover:I=>D.value=fe.value},[createBaseVNode("div",{class:normalizeClass(fe.className)},[ue.$slots.item?renderSlot(ue.$slots,"item",{key:0,item:fe}):createCommentVNode("",!0),ue.$slots.item?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(fe.text),1)],64))],2)],42,Sr))),128))],2))),128))],6),ue.$slots["button-icon"]?withDirectives((openBlock(),createElementBlock("div",{key:0,role:"button","aria-label":(Y=e.ariaLabels)==null?void 0:Y.toggleOverlay,class:normalizeClass(unref(Te)),tabindex:"0",ref_key:"toggleButton",ref:x,onClick:me,onKeydown:withKeys(me,["enter"])},[renderSlot(ue.$slots,"button-icon")],42,Cr)),[[vShow,!unref(f)(e.type)]]):createCommentVNode("",!0)],42,Tr)}}}),Pr=["aria-label"],Bn=defineComponent({__name:"RegularPicker",props:{ariaLabel:{type:String,default:""},showSelectionGrid:{type:Boolean,default:!1},modelValue:{type:Number,default:null},items:{type:Array,default:()=>[]},disabledValues:{type:Array,default:()=>[]},minValue:{type:Number,default:null},maxValue:{type:Number,default:null},slotName:{type:String,default:""},overlaySlot:{type:String,default:""},headerRefs:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},type:{type:String,default:null},transitions:{type:[Object,Boolean],default:!1},arrowNavigation:{type:Boolean,default:!1},autoApply:{type:Boolean,default:!1},textInput:{type:Boolean,default:!1},ariaLabels:{type:Object,default:()=>({})},hideNavigation:{type:Array,default:()=>[]}},emits:["update:model-value","toggle","set-ref"],setup(e,{emit:t}){const r=e,{transitionName:n,showTransition:a}=Ut(r.transitions),o=ref(null);return onMounted(()=>t("set-ref",o)),(l,f)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:"dp__month_year_select",onClick:f[0]||(f[0]=m=>l.$emit("toggle")),onKeydown:[f[1]||(f[1]=withKeys(m=>l.$emit("toggle"),["enter"])),f[2]||(f[2]=withKeys(m=>l.$emit("toggle"),["space"]))],role:"button","aria-label":e.ariaLabel,tabindex:"0",ref_key:"elRef",ref:o},[renderSlot(l.$slots,"default")],40,Pr),createVNode(Transition,{name:unref(n)(e.showSelectionGrid),css:unref(a)},{default:withCtx(()=>[e.showSelectionGrid?(openBlock(),createBlock(Dt,mergeProps({key:0},{modelValue:e.modelValue,items:e.items,disabledValues:e.disabledValues,minValue:e.minValue,maxValue:e.maxValue,escClose:e.escClose,type:e.type,arrowNavigation:e.arrowNavigation,textInput:e.textInput,autoApply:e.autoApply,ariaLabels:e.ariaLabels,hideNavigation:e.hideNavigation},{"header-refs":[],"onUpdate:modelValue":f[3]||(f[3]=m=>l.$emit("update:model-value",m)),onToggle:f[4]||(f[4]=m=>l.$emit("toggle"))}),createSlots({"button-icon":withCtx(()=>[l.$slots["calendar-icon"]?renderSlot(l.$slots,"calendar-icon",{key:0}):createCommentVNode("",!0),l.$slots["calendar-icon"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Lt),{key:1}))]),_:2},[l.$slots[e.slotName]?{name:"item",fn:withCtx(({item:m})=>[renderSlot(l.$slots,e.slotName,{item:m})]),key:"0"}:void 0,l.$slots[e.overlaySlot]?{name:"overlay",fn:withCtx(()=>[renderSlot(l.$slots,e.overlaySlot)]),key:"1"}:void 0,l.$slots[`${e.overlaySlot}-header`]?{name:"header",fn:withCtx(()=>[renderSlot(l.$slots,`${e.overlaySlot}-header`)]),key:"2"}:void 0]),1040)):createCommentVNode("",!0)]),_:3},8,["name","css"])],64))}}),_r={class:"dp__month_year_row"},Nr={class:"dp__month_year_wrap"},Rr={class:"dp__month_picker_header"},Or=["aria-label"],Ir=["aria-label"],Br=["aria-label"],Yr=defineComponent({__name:"MonthYearPicker",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},internalModelValue:{type:[Date,Array],default:null},...at},emits:["update-month-year","month-year-select","mount","reset-flow","overlay-closed"],setup(e,{expose:t,emit:r}){const n=e,{defaults:a}=Ee(n),{transitionName:o,showTransition:l}=Ut(a.value.transitions),{buildMatrix:f}=nt(),{handleMonthYearChange:m,isDisabled:_,updateMonthYear:b}=tr(n,r),k=ref(!1),D=ref(!1),x=ref([null,null,null,null]),A=ref(null),H=ref(null),Q=ref(null);onMounted(()=>{r("mount")});const q=S=>({get:()=>n[S],set:P=>{const G=S==="month"?"year":"month";r("update-month-year",{[S]:P,[G]:n[G]}),r("month-year-select",S==="year"),S==="month"?E(!0):W(!0)}}),j=computed(q("month")),de=computed(q("year")),ge=S=>{const P=getYear($(S));return n.year===P},ye=computed(()=>n.monthPicker?Array.isArray(n.disabledDates)?n.disabledDates.map(S=>$(S)).filter(S=>ge(S)).map(S=>getMonth(S)):[]:[]),Te=computed(()=>S=>{const P=S==="month";return{showSelectionGrid:(P?k:D).value,items:(P?De:ue).value,disabledValues:a.value.filters[P?"months":"years"].concat(ye.value),minValue:(P?ke:ie).value,maxValue:(P?F:re).value,headerRefs:P&&n.monthPicker?[A.value,H.value,Q.value]:[],escClose:n.escClose,transitions:a.value.transitions,ariaLabels:a.value.ariaLabels,textInput:n.textInput,autoApply:n.autoApply,arrowNavigation:n.arrowNavigation,hideNavigation:n.hideNavigation}}),d=computed(()=>S=>({month:n.month,year:n.year,items:S==="month"?n.months:n.years,instance:n.instance,updateMonthYear:b,toggle:S==="month"?E:W})),ie=computed(()=>n.minDate?getYear($(n.minDate)):null),re=computed(()=>n.maxDate?getYear($(n.maxDate)):null),ke=computed(()=>{if(n.minDate&&ie.value){if(ie.value>n.year)return 12;if(ie.value===n.year)return getMonth($(n.minDate))}return null}),F=computed(()=>n.maxDate&&re.value?re.value<n.year?-1:re.value===n.year?getMonth($(n.maxDate)):null:null),me=computed(()=>(n.range||n.multiDates)&&n.internalModelValue&&(n.monthPicker||n.yearPicker)?n.internalModelValue:[]),le=S=>{const P=[],G=B=>B;for(let B=0;B<S.length;B+=3){const O=[S[B],S[B+1],S[B+2]];P.push(G(O))}return P},Ye=computed(()=>n.months.find(P=>P.value===n.month)||{text:"",value:0}),De=computed(()=>le(n.months)),ue=computed(()=>le(n.years)),w=computed(()=>a.value.multiCalendars?n.multiCalendarsSolo?!0:n.instance===0:!0),Y=computed(()=>a.value.multiCalendars?n.multiCalendarsSolo?!0:n.instance===a.value.multiCalendars-1:!0),E=(S=!1)=>{fe(S),k.value=!k.value,k.value||r("overlay-closed")},W=(S=!1)=>{fe(S),D.value=!D.value,D.value||r("overlay-closed")},fe=S=>{S||r("reset-flow")},T=(S=!1)=>{_.value(S)||r("update-month-year",{year:S?n.year+1:n.year-1,month:n.month,fromNav:!0})},I=(S,P)=>{n.arrowNavigation&&(x.value[P]=$e(S),f(x.value,"monthYear"))};return t({toggleMonthPicker:E,toggleYearPicker:W,handleMonthYearChange:m}),(S,P)=>{var G,B,O,U,Z;return openBlock(),createElementBlock("div",_r,[S.$slots["month-year"]?renderSlot(S.$slots,"month-year",normalizeProps(mergeProps({key:0},{month:e.month,year:e.year,months:e.months,years:e.years,updateMonthYear:unref(b),handleMonthYearChange:unref(m),instance:e.instance}))):(openBlock(),createElementBlock(Fragment,{key:1},[!S.monthPicker&&!S.yearPicker?(openBlock(),createElementBlock(Fragment,{key:0},[unref(w)&&!S.vertical?(openBlock(),createBlock(rn,{key:0,"aria-label":(G=unref(a).ariaLabels)==null?void 0:G.prevMonth,disabled:unref(_)(!1),onActivate:P[0]||(P[0]=ee=>unref(m)(!1)),onSetRef:P[1]||(P[1]=ee=>I(ee,0))},{default:withCtx(()=>[S.$slots["arrow-left"]?renderSlot(S.$slots,"arrow-left",{key:0}):createCommentVNode("",!0),S.$slots["arrow-left"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(wn),{key:1}))]),_:3},8,["aria-label","disabled"])):createCommentVNode("",!0),createBaseVNode("div",Nr,[createVNode(Bn,mergeProps({type:"month","slot-name":"month-overlay-val","overlay-slot":"overlay-month","aria-label":(B=unref(a).ariaLabels)==null?void 0:B.openMonthsOverlay,modelValue:unref(j),"onUpdate:modelValue":P[2]||(P[2]=ee=>isRef(j)?j.value=ee:null)},unref(Te)("month"),{onToggle:E,onSetRef:P[3]||(P[3]=ee=>I(ee,1))}),createSlots({default:withCtx(()=>[S.$slots.month?renderSlot(S.$slots,"month",normalizeProps(mergeProps({key:0},unref(Ye)))):createCommentVNode("",!0),S.$slots.month?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(unref(Ye).text),1)],64))]),_:2},[S.$slots["calendar-icon"]?{name:"calendar-icon",fn:withCtx(()=>[renderSlot(S.$slots,"calendar-icon")]),key:"0"}:void 0,S.$slots["month-overlay-value"]?{name:"month-overlay-val",fn:withCtx(({item:ee})=>[renderSlot(S.$slots,"month-overlay-value",{text:ee.text,value:ee.value})]),key:"1"}:void 0,S.$slots["month-overlay"]?{name:"overlay-month",fn:withCtx(()=>[renderSlot(S.$slots,"month-overlay",normalizeProps(guardReactiveProps(unref(d)("month"))))]),key:"2"}:void 0,S.$slots["month-overlay-header"]?{name:"overlay-month-header",fn:withCtx(()=>[renderSlot(S.$slots,"month-overlay-header",{toggle:E})]),key:"3"}:void 0]),1040,["aria-label","modelValue"]),createVNode(Bn,mergeProps({type:"year","slot-name":"year-overlay-val","overlay-slot":"overlay-year","aria-label":(O=unref(a).ariaLabels)==null?void 0:O.openYearsOverlay,modelValue:unref(de),"onUpdate:modelValue":P[4]||(P[4]=ee=>isRef(de)?de.value=ee:null)},unref(Te)("year"),{onToggle:W,onSetRef:P[5]||(P[5]=ee=>I(ee,2))}),createSlots({default:withCtx(()=>[S.$slots.year?renderSlot(S.$slots,"year",{key:0,year:e.year}):createCommentVNode("",!0),S.$slots.year?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(e.year),1)],64))]),_:2},[S.$slots["calendar-icon"]?{name:"calendar-icon",fn:withCtx(()=>[renderSlot(S.$slots,"calendar-icon")]),key:"0"}:void 0,S.$slots["year-overlay-value"]?{name:"year-overlay-val",fn:withCtx(({item:ee})=>[renderSlot(S.$slots,"year-overlay-value",{text:ee.text,value:ee.value})]),key:"1"}:void 0,S.$slots["year-overlay"]?{name:"overlay-year",fn:withCtx(()=>[renderSlot(S.$slots,"year-overlay",normalizeProps(guardReactiveProps(unref(d)("year"))))]),key:"2"}:void 0,S.$slots["year-overlay-header"]?{name:"overlay-year-header",fn:withCtx(()=>[renderSlot(S.$slots,"year-overlay-header",{toggle:W})]),key:"3"}:void 0]),1040,["aria-label","modelValue"])]),unref(w)&&S.vertical?(openBlock(),createBlock(rn,{key:1,"aria-label":(U=unref(a).ariaLabels)==null?void 0:U.prevMonth,disabled:unref(_)(!1),onActivate:P[6]||(P[6]=ee=>unref(m)(!1))},{default:withCtx(()=>[S.$slots["arrow-up"]?renderSlot(S.$slots,"arrow-up",{key:0}):createCommentVNode("",!0),S.$slots["arrow-up"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Wn),{key:1}))]),_:3},8,["aria-label","disabled"])):createCommentVNode("",!0),unref(Y)?(openBlock(),createBlock(rn,{key:2,ref:"rightIcon",disabled:unref(_)(!0),"aria-label":(Z=unref(a).ariaLabels)==null?void 0:Z.nextMonth,onActivate:P[7]||(P[7]=ee=>unref(m)(!0)),onSetRef:P[8]||(P[8]=ee=>I(ee,3))},{default:withCtx(()=>[S.$slots[S.vertical?"arrow-down":"arrow-right"]?renderSlot(S.$slots,S.vertical?"arrow-down":"arrow-right",{key:0}):createCommentVNode("",!0),S.$slots[S.vertical?"arrow-down":"arrow-right"]?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(S.vertical?unref(zn):unref(bn)),{key:1}))]),_:3},8,["disabled","aria-label"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0),S.monthPicker?(openBlock(),createBlock(Dt,mergeProps({key:1},unref(Te)("month"),{"skip-active":S.range,year:e.year,"multi-model-value":unref(me),"month-picker":"",modelValue:unref(j),"onUpdate:modelValue":P[17]||(P[17]=ee=>isRef(j)?j.value=ee:null),onToggle:E,onSelected:P[18]||(P[18]=ee=>S.$emit("overlay-closed"))}),createSlots({header:withCtx(()=>{var ee,we,Se;return[createBaseVNode("div",Rr,[createBaseVNode("div",{class:"dp__month_year_col_nav",tabindex:"0",ref_key:"mpPrevIconRef",ref:A,onClick:P[9]||(P[9]=Ce=>T(!1)),onKeydown:P[10]||(P[10]=withKeys(Ce=>T(!1),["enter"]))},[createBaseVNode("div",{class:normalizeClass(["dp__inner_nav",{dp__inner_nav_disabled:unref(_)(!1)}]),role:"button","aria-label":(ee=unref(a).ariaLabels)==null?void 0:ee.prevMonth},[S.$slots["arrow-left"]?renderSlot(S.$slots,"arrow-left",{key:0}):createCommentVNode("",!0),S.$slots["arrow-left"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(wn),{key:1}))],10,Or)],544),createBaseVNode("div",{class:"dp__pointer",role:"button",ref_key:"mpYearButtonRef",ref:H,"aria-label":(we=unref(a).ariaLabels)==null?void 0:we.openYearsOverlay,tabindex:"0",onClick:P[11]||(P[11]=()=>W(!1)),onKeydown:P[12]||(P[12]=withKeys(()=>W(!1),["enter"]))},[S.$slots.year?renderSlot(S.$slots,"year",{key:0,year:e.year}):createCommentVNode("",!0),S.$slots.year?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(e.year),1)],64))],40,Ir),createBaseVNode("div",{class:"dp__month_year_col_nav",tabindex:"0",ref_key:"mpNextIconRef",ref:Q,onClick:P[13]||(P[13]=Ce=>T(!0)),onKeydown:P[14]||(P[14]=withKeys(Ce=>T(!0),["enter"]))},[createBaseVNode("div",{class:normalizeClass(["dp__inner_nav",{dp__inner_nav_disabled:unref(_)(!0)}]),role:"button","aria-label":(Se=unref(a).ariaLabels)==null?void 0:Se.nextMonth},[S.$slots["arrow-right"]?renderSlot(S.$slots,"arrow-right",{key:0}):createCommentVNode("",!0),S.$slots["arrow-right"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(bn),{key:1}))],10,Br)],544)]),createVNode(Transition,{name:unref(o)(D.value),css:unref(l)},{default:withCtx(()=>[D.value?(openBlock(),createBlock(Dt,mergeProps({key:0},unref(Te)("year"),{modelValue:unref(de),"onUpdate:modelValue":P[15]||(P[15]=Ce=>isRef(de)?de.value=Ce:null),onToggle:W,onSelected:P[16]||(P[16]=Ce=>S.$emit("overlay-closed"))}),createSlots({"button-icon":withCtx(()=>[S.$slots["calendar-icon"]?renderSlot(S.$slots,"calendar-icon",{key:0}):createCommentVNode("",!0),S.$slots["calendar-icon"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Lt),{key:1}))]),_:2},[S.$slots["year-overlay-value"]?{name:"item",fn:withCtx(({item:Ce})=>[renderSlot(S.$slots,"year-overlay-value",{text:Ce.text,value:Ce.value})]),key:"0"}:void 0]),1040,["modelValue"])):createCommentVNode("",!0)]),_:3},8,["name","css"])]}),_:2},[S.$slots["month-overlay-value"]?{name:"item",fn:withCtx(({item:ee})=>[renderSlot(S.$slots,"month-overlay-value",{text:ee.text,value:ee.value})]),key:"0"}:void 0]),1040,["skip-active","year","multi-model-value","modelValue"])):createCommentVNode("",!0),S.yearPicker?(openBlock(),createBlock(Dt,mergeProps({key:2},unref(Te)("year"),{modelValue:unref(de),"onUpdate:modelValue":P[19]||(P[19]=ee=>isRef(de)?de.value=ee:null),"multi-model-value":unref(me),"skip-active":S.range,"skip-button-ref":"","year-picker":"",onToggle:W,onSelected:P[20]||(P[20]=ee=>S.$emit("overlay-closed"))}),createSlots({_:2},[S.$slots["year-overlay-value"]?{name:"item",fn:withCtx(({item:ee})=>[renderSlot(S.$slots,"year-overlay-value",{text:ee.text,value:ee.value})]),key:"0"}:void 0]),1040,["modelValue","multi-model-value","skip-active"])):createCommentVNode("",!0)],64))])}}}),Vr={key:0,class:"dp__time_input"},Er=["aria-label","onKeydown","onClick"],Fr=["aria-label","data-test","onKeydown","onClick"],Lr=["aria-label","onKeydown","onClick"],Ur={key:0},Hr=["aria-label","onKeydown"],Wr=defineComponent({__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},...at},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed"],setup(e,{expose:t,emit:r}){const n=e,{setTimePickerElements:a,setTimePickerBackRef:o}=nt(),{defaults:l}=Ee(n),{transitionName:f,showTransition:m}=Ut(l.value.transitions),_=reactive({hours:!1,minutes:!1,seconds:!1}),b=ref("AM"),k=ref(null),D=ref([]);onMounted(()=>{r("mounted")});const x=computed(()=>w=>!!(n.maxTime&&n.maxTime[w]&&+n.maxTime[w]<+n[w]+ +n[`${w}Increment`])),A=computed(()=>w=>!!(n.minTime&&n.minTime[w]&&+n.minTime[w]>+n[w]-+n[`${w}Increment`])),H=(w,Y)=>add(set($(),w),Y),Q=(w,Y)=>sub(set($(),w),Y),q=computed(()=>({dp__time_col:!0,dp__time_col_reg:!n.enableSeconds&&n.is24,dp__time_col_reg_with_button:!n.enableSeconds&&!n.is24,dp__time_col_sec:n.enableSeconds&&n.is24,dp__time_col_sec_with_button:n.enableSeconds&&!n.is24})),j=computed(()=>{const w=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return n.enableSeconds?w.concat([{type:"",separator:!0},{type:"seconds"}]):w}),de=computed(()=>j.value.filter(w=>!w.separator)),ge=computed(()=>w=>{if(w==="hours"){const Y=me(+n.hours);return{text:Y<10?`0${Y}`:`${Y}`,value:Y}}return{text:n[w]<10?`0${n[w]}`:`${n[w]}`,value:n[w]}}),ye=w=>{const Y=n.is24?24:12,E=w==="hours"?Y:60,W=+n[`${w}GridIncrement`],fe=w==="hours"&&!n.is24?W:0,T=[];for(let I=fe;I<E;I+=W)T.push({value:I,text:I<10?`0${I}`:`${I}`});return w==="hours"&&!n.is24&&T.push({value:0,text:"12"}),Ua(T)},Te=(w,Y)=>{const E=n.minTime&&n.minTime[Y],W=n.maxTime&&n.maxTime[Y];return E&&W?w<+E||w>+W:E?w<+E:W?w>+W:!1},d=computed(()=>w=>ye(w).flat().filter(Y=>Y).map(Y=>Y.value).filter(Y=>Te(Y,w))),ie=w=>n[`no${w[0].toUpperCase()+w.slice(1)}Overlay`],re=w=>{ie(w)||(_[w]=!_[w],_[w]||r("overlay-closed"))},ke=w=>w==="hours"?getHours:w==="minutes"?getMinutes:getSeconds,F=(w,Y=!0)=>{const E=Y?H:Q;(Y?x.value(w):A.value(w))||r(`update:${w}`,ke(w)(E({[w]:+n[w]},{[w]:+n[`${w}Increment`]})))},me=w=>n.is24?w:(w>=12?b.value="PM":b.value="AM",xa(w)),le=()=>{b.value==="PM"?(b.value="AM",r("update:hours",n.hours-12)):(b.value="PM",r("update:hours",n.hours+12))},Ye=w=>{_[w]=!0},De=(w,Y,E)=>{if(w&&n.arrowNavigation){Array.isArray(D.value[Y])?D.value[Y][E]=w:D.value[Y]=[w];const W=D.value.reduce((fe,T)=>T.map((I,S)=>[...fe[S]||[],T[S]]),[]);o(n.closeTimePickerBtn),k.value&&(W[1]=W[1].concat(k.value)),a(W,n.order)}},ue=(w,Y)=>w==="hours"&&!n.is24?r(`update:${w}`,b.value==="PM"?Y+12:Y):r(`update:${w}`,Y);return t({openChildCmp:Ye}),(w,Y)=>{var E;return w.disabled?createCommentVNode("",!0):(openBlock(),createElementBlock("div",Vr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),(W,fe)=>{var T,I,S;return openBlock(),createElementBlock("div",{key:fe,class:normalizeClass(unref(q))},[W.separator?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(" : ")],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",{class:normalizeClass({dp__inc_dec_button:!0,dp__inc_dec_button_disabled:unref(x)(W.type)}),role:"button","data-test":"time-inc-btn","aria-label":(T=unref(l).ariaLabels)==null?void 0:T.incrementValue(W.type),tabindex:"0",onKeydown:[withKeys(P=>F(W.type),["enter"]),withKeys(P=>F(W.type),["space"])],onClick:P=>F(W.type),ref_for:!0,ref:P=>De(P,fe,0)},[w.$slots["arrow-up"]?renderSlot(w.$slots,"arrow-up",{key:0}):createCommentVNode("",!0),w.$slots["arrow-up"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Wn),{key:1}))],42,Er),createBaseVNode("div",{role:"button","aria-label":(I=unref(l).ariaLabels)==null?void 0:I.openTpOverlay(W.type),class:normalizeClass(ie(W.type)?"":"dp__time_display"),tabindex:"0","data-test":`${W.type}-toggle-overlay-btn`,onKeydown:[withKeys(P=>re(W.type),["enter"]),withKeys(P=>re(W.type),["space"])],onClick:P=>re(W.type),ref_for:!0,ref:P=>De(P,fe,1)},[w.$slots[W.type]?renderSlot(w.$slots,W.type,{key:0,text:unref(ge)(W.type).text,value:unref(ge)(W.type).value}):createCommentVNode("",!0),w.$slots[W.type]?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(unref(ge)(W.type).text),1)],64))],42,Fr),createBaseVNode("div",{class:normalizeClass({dp__inc_dec_button:!0,dp__inc_dec_button_disabled:unref(A)(W.type)}),role:"button","data-test":"time-dec-btn","aria-label":(S=unref(l).ariaLabels)==null?void 0:S.decrementValue(W.type),tabindex:"0",onKeydown:[withKeys(P=>F(W.type,!1),["enter"]),withKeys(P=>F(W.type,!1),["space"])],onClick:P=>F(W.type,!1),ref_for:!0,ref:P=>De(P,fe,2)},[w.$slots["arrow-down"]?renderSlot(w.$slots,"arrow-down",{key:0}):createCommentVNode("",!0),w.$slots["arrow-down"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(zn),{key:1}))],42,Lr)],64))],2)}),128)),w.is24?createCommentVNode("",!0):(openBlock(),createElementBlock("div",Ur,[w.$slots["am-pm-button"]?renderSlot(w.$slots,"am-pm-button",{key:0,toggle:le,value:b.value}):createCommentVNode("",!0),w.$slots["am-pm-button"]?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,ref_key:"amPmButton",ref:k,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(E=unref(l).ariaLabels)==null?void 0:E.amPmButton,tabindex:"0",onClick:le,onKeydown:[withKeys(withModifiers(le,["prevent"]),["enter"]),withKeys(withModifiers(le,["prevent"]),["space"])]},toDisplayString(b.value),41,Hr))])),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(de),(W,fe)=>(openBlock(),createBlock(Transition,{key:fe,name:unref(f)(_[W.type]),css:unref(m)},{default:withCtx(()=>[_[W.type]?(openBlock(),createBlock(Dt,{key:0,items:ye(W.type),"disabled-values":unref(l).filters.times[W.type].concat(unref(d)(W.type)),"esc-close":w.escClose,"aria-labels":unref(l).ariaLabels,"hide-navigation":w.hideNavigation,"onUpdate:modelValue":T=>ue(W.type,T),onSelected:T=>re(W.type),onToggle:T=>re(W.type),onResetFlow:Y[0]||(Y[0]=T=>w.$emit("reset-flow")),type:W.type},createSlots({"button-icon":withCtx(()=>[w.$slots["clock-icon"]?renderSlot(w.$slots,"clock-icon",{key:0}):createCommentVNode("",!0),w.$slots["clock-icon"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Hn),{key:1}))]),_:2},[w.$slots[`${W.type}-overlay-value`]?{name:"item",fn:withCtx(({item:T})=>[renderSlot(w.$slots,`${W.type}-overlay-value`,{text:T.text,value:T.value})]),key:"0"}:void 0]),1032,["items","disabled-values","esc-close","aria-labels","hide-navigation","onUpdate:modelValue","onSelected","onToggle","type"])):createCommentVNode("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),zr=["aria-label"],xr={class:"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"},Kr={key:1,class:"dp__overlay_row dp__flex_row"},jr=["aria-label"],Gr=defineComponent({__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},internalModelValue:{type:[Date,Array],default:null},...at},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed"],setup(e,{expose:t,emit:r}){const n=e,{buildMatrix:a,setTimePicker:o}=nt(),l=useSlots(),{hideNavigationButtons:f,defaults:m}=Ee(n),{transitionName:_,showTransition:b}=Ut(m.value.transitions),k=ref(null),D=ref(null),x=ref([]),A=ref(null);onMounted(()=>{r("mount"),!n.timePicker&&n.arrowNavigation?a([$e(k.value)],"time"):o(!0,n.timePicker)});const H=computed(()=>n.range&&n.modelAuto?Zn(n.internalModelValue):!0),Q=ref(!1),q=F=>({hours:Array.isArray(n.hours)?n.hours[F]:n.hours,minutes:Array.isArray(n.minutes)?n.minutes[F]:n.minutes,seconds:Array.isArray(n.seconds)?n.seconds[F]:n.seconds}),j=computed(()=>{const F=[];if(n.range)for(let me=0;me<2;me++)F.push(q(me));else F.push(q(0));return F}),de=(F,me=!1,le="")=>{me||r("reset-flow"),Q.value=F,F&&r("overlay-opened"),n.arrowNavigation&&(o(F),F||r("overlay-closed")),nextTick(()=>{le!==""&&x.value[0]&&x.value[0].openChildCmp(le)})},ge=computed(()=>({dp__button:!0,dp__button_bottom:n.autoApply})),ye=it(l,"timePicker"),Te=(F,me,le)=>n.range?me===0?[F,j.value[1][le]]:[j.value[0][le],F]:F,d=F=>{r("update:hours",F)},ie=F=>{r("update:minutes",F)},re=F=>{r("update:seconds",F)},ke=()=>{A.value&&n.arrowNavigation&&A.value.focus({preventScroll:!0})};return t({toggleTimePicker:de}),(F,me)=>{var le;return openBlock(),createElementBlock("div",null,[F.timePicker?createCommentVNode("",!0):withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ge)),role:"button","aria-label":(le=unref(m).ariaLabels)==null?void 0:le.openTimePicker,tabindex:"0","data-test":"open-time-picker-btn",ref_key:"openTimePickerBtn",ref:k,onKeydown:[me[0]||(me[0]=withKeys(Ye=>de(!0),["enter"])),me[1]||(me[1]=withKeys(Ye=>de(!0),["space"]))],onClick:me[2]||(me[2]=Ye=>de(!0))},[F.$slots["clock-icon"]?renderSlot(F.$slots,"clock-icon",{key:0}):createCommentVNode("",!0),F.$slots["clock-icon"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Hn),{key:1}))],42,zr)),[[vShow,!unref(f)("time")]]),createVNode(Transition,{name:unref(_)(Q.value),css:unref(b)},{default:withCtx(()=>{var Ye;return[Q.value||F.timePicker?(openBlock(),createElementBlock("div",{key:0,class:"dp__overlay",ref_key:"overlayRef",ref:A,tabindex:"0"},[createBaseVNode("div",xr,[F.$slots["time-picker-overlay"]?renderSlot(F.$slots,"time-picker-overlay",{key:0,hours:e.hours,minutes:e.minutes,seconds:e.seconds,setHours:d,setMinutes:ie,setSeconds:re}):createCommentVNode("",!0),F.$slots["time-picker-overlay"]?createCommentVNode("",!0):(openBlock(),createElementBlock("div",Kr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),(De,ue)=>withDirectives((openBlock(),createBlock(Wr,mergeProps({key:ue},{...F.$props,order:ue,hours:De.hours,minutes:De.minutes,seconds:De.seconds,closeTimePickerBtn:D.value,disabled:ue===0?F.fixedStart:F.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:x,"onUpdate:hours":w=>d(Te(w,ue,"hours")),"onUpdate:minutes":w=>ie(Te(w,ue,"minutes")),"onUpdate:seconds":w=>re(Te(w,ue,"seconds")),onMounted:ke,onOverlayClosed:ke}),createSlots({_:2},[renderList(unref(ye),(w,Y)=>({name:w,fn:withCtx(E=>[renderSlot(F.$slots,w,normalizeProps(guardReactiveProps(E)))])}))]),1040,["onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[vShow,ue===0?!0:unref(H)]])),128))])),F.timePicker?createCommentVNode("",!0):withDirectives((openBlock(),createElementBlock("div",{key:2,ref_key:"closeTimePickerBtn",ref:D,class:normalizeClass(unref(ge)),role:"button","aria-label":(Ye=unref(m).ariaLabels)==null?void 0:Ye.closeTimePicker,tabindex:"0",onKeydown:[me[3]||(me[3]=withKeys(De=>de(!1),["enter"])),me[4]||(me[4]=withKeys(De=>de(!1),["space"]))],onClick:me[5]||(me[5]=De=>de(!1))},[F.$slots["calendar-icon"]?renderSlot(F.$slots,"calendar-icon",{key:0}):createCommentVNode("",!0),F.$slots["calendar-icon"]?createCommentVNode("",!0):(openBlock(),createBlock(unref(Lt),{key:1}))],42,jr)),[[vShow,!unref(f)("time")]])])],512)):createCommentVNode("",!0)]}),_:3},8,["name","css"])])}}}),Zr=(e,t)=>{const{isDisabled:r,matchDate:n,getWeekFromDate:a,defaults:o}=Ee(t),l=ref(null),f=ref($()),m=E=>{!E.current&&t.hideOffsetDates||(l.value=E.value)},_=()=>{l.value=null},b=E=>Array.isArray(e.value)&&t.range&&e.value[0]&&l.value?E?Be(l.value,e.value[0]):_e(l.value,e.value[0]):!0,k=(E,W)=>{const fe=()=>e.value?W?e.value[0]||null:e.value[1]:null,T=e.value&&Array.isArray(e.value)?fe():null;return ve($(E.value),T)},D=E=>{const W=Array.isArray(e.value)?e.value[0]:null;return E?!_e(l.value||null,W):!0},x=(E,W=!0)=>(t.range||t.weekPicker)&&Array.isArray(e.value)?t.hideOffsetDates&&!E.current?!1:ve($(E.value),e.value[W?0:1]):t.range?k(E,W)&&D(W)||ve(E.value,Array.isArray(e.value)?e.value[0]:null)&&b(W):!1,A=(E,W,fe)=>Array.isArray(e.value)&&e.value[0]&&e.value.length===1?E?!1:fe?Be(e.value[0],W.value):_e(e.value[0],W.value):!1,H=E=>!e.value||t.hideOffsetDates&&!E.current?!1:t.range?t.modelAuto&&Array.isArray(e.value)?ve(E.value,e.value[0]?e.value[0]:f.value):!1:t.multiDates&&Array.isArray(e.value)?e.value.some(W=>ve(W,E.value)):ve(E.value,e.value?e.value:f.value),Q=E=>{if(t.autoRange||t.weekPicker){if(l.value){if(t.hideOffsetDates&&!E.current)return!1;const W=addDays(l.value,+t.autoRange),fe=a($(l.value));return t.weekPicker?ve(fe[1],$(E.value)):ve(W,$(E.value))}return!1}return!1},q=E=>{if(t.autoRange||t.weekPicker){if(l.value){const W=addDays(l.value,+t.autoRange);if(t.hideOffsetDates&&!E.current)return!1;const fe=a($(l.value));return t.weekPicker?Be(E.value,fe[0])&&_e(E.value,fe[1]):Be(E.value,l.value)&&_e(E.value,W)}return!1}return!1},j=E=>{if(t.autoRange||t.weekPicker){if(l.value){if(t.hideOffsetDates&&!E.current)return!1;const W=a($(l.value));return t.weekPicker?ve(W[0],E.value):ve(l.value,E.value)}return!1}return!1},de=E=>xn(e.value,l.value,E.value),ge=()=>t.modelAuto&&Array.isArray(t.internalModelValue)?!!t.internalModelValue[0]:!1,ye=()=>t.modelAuto?Zn(t.internalModelValue):!0,Te=E=>{if(Array.isArray(e.value)&&e.value.length||t.weekPicker)return!1;const W=t.range?!x(E)&&!x(E,!1):!0;return!r(E.value)&&!H(E)&&!(!E.current&&t.hideOffsetDates)&&W},d=E=>t.range?t.modelAuto?ge()&&H(E):!1:H(E),ie=E=>t.highlight?n(E.value,t.highlight):!1,re=E=>r(E.value)&&t.highlightDisabledDays===!1,ke=E=>t.highlightWeekDays&&t.highlightWeekDays.includes(E.value.getDay()),F=E=>(t.range||t.weekPicker)&&(!(o.value.multiCalendars>0)||E.current)&&ye()&&!(!E.current&&t.hideOffsetDates)&&!H(E)?de(E):!1,me=E=>{const{isRangeStart:W,isRangeEnd:fe}=De(E),T=t.range?W||fe:!1;return{dp__cell_offset:!E.current,dp__pointer:!t.disabled&&!(!E.current&&t.hideOffsetDates)&&!r(E.value),dp__cell_disabled:r(E.value),dp__cell_highlight:!re(E)&&(ie(E)||ke(E))&&!d(E)&&!T,dp__cell_highlight_active:!re(E)&&(ie(E)||ke(E))&&d(E),dp__today:!t.noToday&&ve(E.value,f.value)&&E.current}},le=E=>({dp__active_date:d(E),dp__date_hover:Te(E)}),Ye=E=>({...ue(E),...w(E),dp__range_between_week:F(E)&&t.weekPicker}),De=E=>{const W=o.value.multiCalendars>0?E.current&&x(E)&&ye():x(E)&&ye(),fe=o.value.multiCalendars>0?E.current&&x(E,!1)&&ye():x(E,!1)&&ye();return{isRangeStart:W,isRangeEnd:fe}},ue=E=>{const{isRangeStart:W,isRangeEnd:fe}=De(E);return{dp__range_start:W,dp__range_end:fe,dp__range_between:F(E)&&!t.weekPicker,dp__date_hover_start:A(Te(E),E,!0),dp__date_hover_end:A(Te(E),E,!1)}},w=E=>({...ue(E),dp__cell_auto_range:q(E),dp__cell_auto_range_start:j(E),dp__cell_auto_range_end:Q(E)}),Y=E=>t.range?t.autoRange?w(E):t.modelAuto?{...le(E),...ue(E)}:ue(E):t.weekPicker?Ye(E):le(E);return{setHoverDate:m,clearHoverDate:_,getDayClassData:E=>({...me(E),...Y(E),[t.dayClass?t.dayClass(E.value):""]:!0,[t.calendarCellClassName]:!!t.calendarCellClassName})}},Xr=["id","onKeydown"],qr={key:0,class:"dp__sidebar_left"},Jr={key:1,class:"dp__preset_ranges"},Qr=["onClick"],el={key:2,class:"dp__sidebar_right"},tl={key:3,class:"dp__now_wrap"},nl=defineComponent({__name:"DatepickerMenu",props:{openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},...at},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open"],setup(e,{expose:t,emit:r}){const n=e,{setMenuFocused:a,setShiftKey:o,control:l}=Kn(),{getCalendarDays:f,defaults:m}=Ee(n),_=useSlots(),b=ref(null),k=reactive({timePicker:!!(!n.enableTimePicker||n.timePicker||n.monthPicker),monthYearInput:!!n.timePicker,calendar:!1}),D=ref([]),x=ref([]),A=ref(null),H=ref(null),Q=ref(0),q=ref(!1),j=ref(0);onMounted(()=>{var se;q.value=!0,!((se=n.presetRanges)!=null&&se.length)&&!_["left-sidebar"]&&!_["right-sidebar"]&&(qe(),window.addEventListener("resize",qe));const Ve=$e(H);if(Ve&&!n.textInput&&!n.inline&&(a(!0),ie()),Ve){const ft=St=>{["action-row","time-picker","month-year"].some(Ot=>Object.keys(_).includes(Ot))||St.preventDefault(),St.stopImmediatePropagation(),St.stopPropagation()};Ve.addEventListener("pointerdown",ft),Ve.addEventListener("mousedown",ft)}}),onUnmounted(()=>{window.removeEventListener("resize",qe)});const{arrowRight:de,arrowLeft:ge,arrowDown:ye,arrowUp:Te}=nt(),d=se=>{se||se===0?x.value[se].triggerTransition(le.value(se),Ye.value(se)):x.value.forEach((Ve,ft)=>Ve.triggerTransition(le.value(ft),Ye.value(ft)))},ie=()=>{const se=$e(H);se&&se.focus({preventScroll:!0})},re=()=>{var se;(se=n.flow)!=null&&se.length&&j.value!==-1&&(j.value+=1,r("flow-step",j.value),Re())},ke=()=>{j.value=-1},{calendars:F,modelValue:me,month:le,year:Ye,time:De,updateTime:ue,updateMonthYear:w,selectDate:Y,getWeekNum:E,monthYearSelect:W,handleScroll:fe,handleArrow:T,handleSwipe:I,getMarker:S,selectCurrentDate:P,presetDateRange:G}=Qa(n,r,re,d,j),{setHoverDate:B,clearHoverDate:O,getDayClassData:U}=Zr(me,n);watch(F,()=>{n.openOnTop&&setTimeout(()=>{r("recalculate-position")},0)},{deep:!0});const Z=it(_,"calendar"),ee=it(_,"action"),we=it(_,"timePicker"),Se=it(_,"monthYear"),Ce=computed(()=>n.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),Je=computed(()=>Wa(n.yearRange,n.reverseYears)),Pe=computed(()=>za(n.locale,n.monthNameFormat)),qe=()=>{const se=$e(b);se&&(Q.value=se.getBoundingClientRect().width)},rt=computed(()=>se=>f(le.value(se),Ye.value(se))),Wt=computed(()=>m.value.multiCalendars>0&&n.range?[...Array(m.value.multiCalendars).keys()]:[0]),wt=computed(()=>se=>se===1),Jn=computed(()=>n.monthPicker||n.timePicker||n.yearPicker),Nt=computed(()=>({dp__flex_display:m.value.multiCalendars>0})),dn=computed(()=>({dp__instance_calendar:m.value.multiCalendars>0})),fn=computed(()=>({dp__menu_disabled:n.disabled,dp__menu_readonly:n.readonly})),Le=computed(()=>se=>ia(rt,se)),gt=computed(()=>({dp__menu:!0,dp__menu_index:!n.inline,dp__relative:n.inline,[n.menuClassName]:!!n.menuClassName})),ia=(se,Ve)=>se.value(Ve).map(ft=>({...ft,days:ft.days.map(St=>(St.marker=S(St),St.classData=U(St),St))})),sa=se=>{se.stopPropagation(),se.stopImmediatePropagation()},oa=()=>{n.escClose&&r("close-picker")},Ln=(se,Ve=!1)=>{Y(se,Ve),n.spaceConfirm&&r("select-date")},L=se=>{var Ve;(Ve=n.flow)!=null&&Ve.length&&(k[se]=!0,Object.keys(k).filter(ft=>!k[ft]).length||Re())},oe=(se,Ve,ft,St,...Ot)=>{if(n.flow[j.value]===se){const ze=St?Ve.value[0]:Ve.value;ze&&ze[ft](...Ot)}},Re=()=>{oe("month",D,"toggleMonthPicker",!0,!0),oe("year",D,"toggleYearPicker",!0,!0),oe("calendar",A,"toggleTimePicker",!1,!1,!0),oe("time",A,"toggleTimePicker",!1,!0,!0);const se=n.flow[j.value];(se==="hours"||se==="minutes"||se==="seconds")&&oe(se,A,"toggleTimePicker",!1,!0,!0,se)},je=se=>{if(n.arrowNavigation){if(se==="up")return Te();if(se==="down")return ye();if(se==="left")return ge();if(se==="right")return de()}else se==="left"||se==="up"?T("left",0,se==="up"):T("right",0,se==="down")},ut=se=>{o(se.shiftKey),!n.disableMonthYearSelect&&se.code==="Tab"&&se.target.classList.contains("dp__menu")&&l.value.shiftKeyInMenu&&(se.preventDefault(),se.stopImmediatePropagation(),r("close-picker"))},At=se=>{D.value[0]&&D.value[0].handleMonthYearChange(se)};return t({updateMonthYear:w}),(se,Ve)=>{var ft;return openBlock(),createBlock(Transition,{appear:"",name:(ft=unref(m).transitions)==null?void 0:ft.menuAppear,mode:"out-in",css:!!se.transitions},{default:withCtx(()=>{var St,Ot;return[createBaseVNode("div",{id:se.uid?`dp-menu-${se.uid}`:void 0,tabindex:"0",ref_key:"dpMenuRef",ref:H,role:"dialog",class:normalizeClass(unref(gt)),onMouseleave:Ve[15]||(Ve[15]=(...ze)=>unref(O)&&unref(O)(...ze)),onClick:sa,onKeydown:[withKeys(oa,["esc"]),Ve[16]||(Ve[16]=withKeys(withModifiers(ze=>je("left"),["prevent"]),["left"])),Ve[17]||(Ve[17]=withKeys(withModifiers(ze=>je("up"),["prevent"]),["up"])),Ve[18]||(Ve[18]=withKeys(withModifiers(ze=>je("down"),["prevent"]),["down"])),Ve[19]||(Ve[19]=withKeys(withModifiers(ze=>je("right"),["prevent"]),["right"])),ut]},[(se.disabled||se.readonly)&&se.inline?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(fn))},null,2)):createCommentVNode("",!0),!se.inline&&!se.teleportCenter?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(Ce))},null,2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass({dp__menu_content_wrapper:((St=se.presetRanges)==null?void 0:St.length)||!!se.$slots["left-sidebar"]||!!se.$slots["right-sidebar"]})},[se.$slots["left-sidebar"]?(openBlock(),createElementBlock("div",qr,[renderSlot(se.$slots,"left-sidebar",normalizeProps(guardReactiveProps({handleMonthYearChange:At})))])):createCommentVNode("",!0),(Ot=se.presetRanges)!=null&&Ot.length?(openBlock(),createElementBlock("div",Jr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(se.presetRanges,(ze,pn)=>(openBlock(),createElementBlock("div",{key:pn,style:normalizeStyle(ze.style||{}),class:"dp__preset_range",onClick:Ze=>unref(G)(ze.range,!!ze.slot)},[ze.slot?renderSlot(se.$slots,ze.slot,{key:0,presetDateRange:unref(G),label:ze.label,range:ze.range}):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(ze.label),1)],64))],12,Qr))),128))])):createCommentVNode("",!0),createBaseVNode("div",{class:"dp__instance_calendar",ref_key:"calendarWrapperRef",ref:b,role:"document"},[createBaseVNode("div",{class:normalizeClass(unref(Nt))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Wt),(ze,pn)=>(openBlock(),createElementBlock("div",{key:ze,class:normalizeClass(unref(dn))},[!se.disableMonthYearSelect&&!se.timePicker?(openBlock(),createBlock(Yr,mergeProps({key:0,ref_for:!0,ref:Ze=>{Ze&&(D.value[pn]=Ze)},months:unref(Pe),years:unref(Je),month:unref(le)(ze),year:unref(Ye)(ze),instance:ze,"internal-model-value":e.internalModelValue},se.$props,{onMount:Ve[0]||(Ve[0]=Ze=>L("monthYearInput")),onResetFlow:ke,onUpdateMonthYear:Ze=>unref(w)(ze,Ze),onMonthYearSelect:unref(W),onOverlayClosed:ie}),createSlots({_:2},[renderList(unref(Se),(Ze,xt)=>({name:Ze,fn:withCtx(_t=>[renderSlot(se.$slots,Ze,normalizeProps(guardReactiveProps(_t)))])}))]),1040,["months","years","month","year","instance","internal-model-value","onUpdateMonthYear","onMonthYearSelect"])):createCommentVNode("",!0),createVNode($r,mergeProps({ref_for:!0,ref:Ze=>{Ze&&(x.value[pn]=Ze)},"specific-mode":unref(Jn),"get-week-num":unref(E),instance:ze,"mapped-dates":unref(Le)(ze),month:unref(le)(ze),year:unref(Ye)(ze)},se.$props,{"flow-step":j.value,"onUpdate:flowStep":Ve[1]||(Ve[1]=Ze=>j.value=Ze),onSelectDate:Ze=>unref(Y)(Ze,!unref(wt)(ze)),onHandleSpace:Ze=>Ln(Ze,!unref(wt)(ze)),onSetHoverDate:Ve[2]||(Ve[2]=Ze=>unref(B)(Ze)),onHandleScroll:Ze=>unref(fe)(Ze,ze),onHandleSwipe:Ze=>unref(I)(Ze,ze),onMount:Ve[3]||(Ve[3]=Ze=>L("calendar")),onResetFlow:ke,onTooltipOpen:Ve[4]||(Ve[4]=Ze=>se.$emit("tooltip-open",Ze)),onTooltipClose:Ve[5]||(Ve[5]=Ze=>se.$emit("tooltip-close",Ze))}),createSlots({_:2},[renderList(unref(Z),(Ze,xt)=>({name:Ze,fn:withCtx(_t=>[renderSlot(se.$slots,Ze,normalizeProps(guardReactiveProps({..._t})))])}))]),1040,["specific-mode","get-week-num","instance","mapped-dates","month","year","flow-step","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])],2))),128))],2),createBaseVNode("div",null,[se.$slots["time-picker"]?renderSlot(se.$slots,"time-picker",normalizeProps(mergeProps({key:0},{time:unref(De),updateTime:unref(ue)}))):(openBlock(),createElementBlock(Fragment,{key:1},[se.enableTimePicker&&!se.monthPicker&&!se.weekPicker?(openBlock(),createBlock(Gr,mergeProps({key:0,ref_key:"timePickerRef",ref:A,hours:unref(De).hours,minutes:unref(De).minutes,seconds:unref(De).seconds,"internal-model-value":e.internalModelValue},se.$props,{onMount:Ve[6]||(Ve[6]=ze=>L("timePicker")),"onUpdate:hours":Ve[7]||(Ve[7]=ze=>unref(ue)(ze)),"onUpdate:minutes":Ve[8]||(Ve[8]=ze=>unref(ue)(ze,!1)),"onUpdate:seconds":Ve[9]||(Ve[9]=ze=>unref(ue)(ze,!1,!0)),onResetFlow:ke,onOverlayClosed:ie,onOverlayOpened:Ve[10]||(Ve[10]=ze=>se.$emit("time-picker-open",ze))}),createSlots({_:2},[renderList(unref(we),(ze,pn)=>({name:ze,fn:withCtx(Ze=>[renderSlot(se.$slots,ze,normalizeProps(guardReactiveProps(Ze)))])}))]),1040,["hours","minutes","seconds","internal-model-value"])):createCommentVNode("",!0)],64))])],512),se.$slots["right-sidebar"]?(openBlock(),createElementBlock("div",el,[renderSlot(se.$slots,"right-sidebar",normalizeProps(guardReactiveProps({handleMonthYearChange:At})))])):createCommentVNode("",!0),se.showNowButton?(openBlock(),createElementBlock("div",tl,[se.$slots["now-button"]?renderSlot(se.$slots,"now-button",{key:0,selectCurrentDate:unref(P)}):createCommentVNode("",!0),se.$slots["now-button"]?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,type:"button",role:"button",class:"dp__now_button",onClick:Ve[11]||(Ve[11]=(...ze)=>unref(P)&&unref(P)(...ze))},toDisplayString(se.nowButtonLabel),1))])):createCommentVNode("",!0)],2),!se.autoApply||se.keepActionRow?(openBlock(),createBlock(mr,mergeProps({key:2,"menu-mount":q.value,"calendar-width":Q.value,"internal-model-value":e.internalModelValue},se.$props,{onClosePicker:Ve[12]||(Ve[12]=ze=>se.$emit("close-picker")),onSelectDate:Ve[13]||(Ve[13]=ze=>se.$emit("select-date")),onInvalidSelect:Ve[14]||(Ve[14]=ze=>se.$emit("invalid-select"))}),createSlots({_:2},[renderList(unref(ee),(ze,pn)=>({name:ze,fn:withCtx(Ze=>[renderSlot(se.$slots,ze,normalizeProps(guardReactiveProps({...Ze})))])}))]),1040,["menu-mount","calendar-width","internal-model-value"])):createCommentVNode("",!0)],42,Xr)]}),_:3},8,["name","css"])}}}),al=typeof window<"u"?window:void 0,ln=()=>{},rl=e=>getCurrentScope()?(onScopeDispose(e),!0):!1,ll=(e,t,r,n)=>{if(!e)return ln;let a=ln;const o=watch(()=>unref(e),f=>{a(),f&&(f.addEventListener(t,r,n),a=()=>{f.removeEventListener(t,r,n),a=ln})},{immediate:!0,flush:"post"}),l=()=>{o(),a()};return rl(l),l},ol=(e,t,r,n={})=>{const{window:a=al,event:o="pointerdown"}=n;return a?ll(a,o,l=>{const f=$e(e),m=$e(t);!f||!m||f===l.target||l.composedPath().includes(f)||l.composedPath().includes(m)||r(l)},{passive:!0}):void 0},sl=defineComponent({__name:"VueDatePicker",props:{...at},emits:["update:model-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open"],setup(e,{expose:t,emit:r}){const n=e,a=useSlots(),o=ref(!1),l=toRef(n,"modelValue"),f=toRef(n,"timezone"),m=ref(null),_=ref(null),b=ref(!1),k=ref(null),{setMenuFocused:D,setShiftKey:x}=Kn(),{clearArrowNav:A}=nt(),{validateDate:H,isValidTime:Q}=Ee(n);onMounted(()=>{ke(n.modelValue),n.inline||(d(k.value).addEventListener("scroll",w),window.addEventListener("resize",Y)),n.inline&&(o.value=!0)}),onUnmounted(()=>{if(!n.inline){const Pe=d(k.value);Pe&&Pe.removeEventListener("scroll",w),window.removeEventListener("resize",Y)}});const q=it(a,"all",n.presetRanges),j=it(a,"input");watch([l,f],()=>{ke(l.value)},{deep:!0});const{openOnTop:de,menuPosition:ge,setMenuPosition:ye,setInitialPosition:Te,getScrollableParent:d}=nr(m,_,r,n),{inputValue:ie,internalModelValue:re,parseExternalModelValue:ke,emitModelValue:F,formatInputValue:me,checkBeforeEmit:le}=er(r,n,b),Ye=computed(()=>({dp__main:!0,dp__theme_dark:n.dark,dp__theme_light:!n.dark,dp__flex_display:n.inline,dp__flex_display_with_input:n.inlineWithInput})),De=computed(()=>n.dark?"dp__theme_dark":"dp__theme_light"),ue=computed(()=>n.teleport?{to:typeof n.teleport=="boolean"?"body":n.teleport,disabled:n.inline}:{class:"dp__outer_menu_wrap"}),w=()=>{o.value&&(n.closeOnScroll?B():ye())},Y=()=>{o.value&&ye()},E=()=>{!n.disabled&&!n.readonly&&(Te(),o.value=!0,nextTick().then(()=>{ye(),o.value&&r("open")}),o.value||G(),ke(n.modelValue))},W=()=>{ie.value="",G(),r("update:model-value",null),r("cleared"),B()},fe=()=>{const Pe=re.value;return!Pe||!Array.isArray(Pe)&&H(Pe)?!0:Array.isArray(Pe)?Pe.length===2&&H(Pe[0])&&H(Pe[1])?!0:H(Pe[0]):!1},T=()=>{le()&&fe()?(F(),B()):r("invalid-select",re.value)},I=Pe=>{S(),F(),n.closeOnAutoApply&&!Pe&&B()},S=()=>{_.value&&n.textInput&&_.value.setParsedDate(re.value)},P=(Pe=!1)=>{n.autoApply&&Q(re.value)&&fe()&&(n.range&&Array.isArray(re.value)?(n.partialRange||re.value.length===2)&&I(Pe):I(Pe))},G=()=>{n.textInput||(re.value=null)},B=()=>{n.inline||(o.value&&(o.value=!1,D(!1),x(!1),A(),r("closed"),Te(),ie.value&&ke(l.value)),G())},O=(Pe,qe)=>{if(!Pe){re.value=null;return}re.value=Pe,qe&&(T(),r("text-submit"))},U=()=>{n.autoApply&&Q(re.value)&&F(),S()},Z=()=>o.value?B():E(),ee=Pe=>{re.value=Pe},we=()=>{n.textInput&&(b.value=!0,me()),r("focus")},Se=()=>{n.textInput&&(b.value=!1,ke(n.modelValue)),r("blur")},Ce=Pe=>{m.value&&m.value.updateMonthYear(0,{month:Nn(Pe.month),year:Nn(Pe.year)})},Je=Pe=>{ke(Pe||n.modelValue)};return ol(m,_,n.onClickOutside?()=>n.onClickOutside(fe):B),t({closeMenu:B,selectDate:T,clearValue:W,openMenu:E,onScroll:w,formatInputValue:me,updateInternalModelValue:ee,setMonthYear:Ce,parseModel:Je}),(Pe,qe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(Ye)),ref_key:"pickerWrapperRef",ref:k},[createVNode(dr,mergeProps({ref_key:"inputRef",ref:_,"is-menu-open":o.value,"input-value":unref(ie),"onUpdate:inputValue":qe[0]||(qe[0]=rt=>isRef(ie)?ie.value=rt:null)},Pe.$props,{onClear:W,onOpen:E,onSetInputDate:O,onSetEmptyDate:unref(F),onSelectDate:T,onToggle:Z,onClose:B,onFocus:we,onBlur:Se}),createSlots({_:2},[renderList(unref(j),(rt,Wt)=>({name:rt,fn:withCtx(wt=>[renderSlot(Pe.$slots,rt,normalizeProps(guardReactiveProps(wt)))])}))]),1040,["is-menu-open","input-value","onSetEmptyDate"]),o.value?(openBlock(),createBlock(resolveDynamicComponent(Pe.teleport?Teleport:"div"),normalizeProps(mergeProps({key:0},unref(ue))),{default:withCtx(()=>[o.value?(openBlock(),createBlock(nl,mergeProps({key:0,ref_key:"dpMenuRef",ref:m,class:unref(De),style:unref(ge),"open-on-top":unref(de)},Pe.$props,{"internal-model-value":unref(re),"onUpdate:internalModelValue":qe[1]||(qe[1]=rt=>isRef(re)?re.value=rt:null),onClosePicker:B,onSelectDate:T,onAutoApply:P,onTimeUpdate:U,onFlowStep:qe[2]||(qe[2]=rt=>Pe.$emit("flow-step",rt)),onUpdateMonthYear:qe[3]||(qe[3]=rt=>Pe.$emit("update-month-year",rt)),onInvalidSelect:qe[4]||(qe[4]=rt=>Pe.$emit("invalid-select",unref(re))),onInvalidFixedRange:qe[5]||(qe[5]=rt=>Pe.$emit("invalid-fixed-range",rt)),onRecalculatePosition:unref(ye),onTooltipOpen:qe[6]||(qe[6]=rt=>Pe.$emit("tooltip-open",rt)),onTooltipClose:qe[7]||(qe[7]=rt=>Pe.$emit("tooltip-close",rt)),onTimePickerOpen:qe[8]||(qe[8]=rt=>Pe.$emit("time-picker-open",rt))}),createSlots({_:2},[renderList(unref(q),(rt,Wt)=>({name:rt,fn:withCtx(wt=>[renderSlot(Pe.$slots,rt,normalizeProps(guardReactiveProps({...wt})))])}))]),1040,["class","style","open-on-top","internal-model-value","onRecalculatePosition"])):createCommentVNode("",!0)]),_:3},16)):createCommentVNode("",!0)],2))}}),Xn=(()=>{const e=sl;return e.install=t=>{t.component("Vue3DatePicker",e)},e})(),il=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"}));Object.entries(il).forEach(([e,t])=>{e!=="default"&&(Xn[e]=t)});const main="";function mitt(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(a){a(r)}),(n=e.get("*"))&&n.slice().map(function(a){a(t,r)})}}}axios.get("../api/pre-login-configuration").then(e=>{const t=createApp(App),r=mitt();t.use(router),t.use(store),t.use(i18n),t.component("Datepicker",Xn),t.config.globalProperties.messageBus=r;let n=null;if(e.data.Keycloak&&e.data.Keycloak!=null&&e.data.Keycloak.Enable){console.log("Keycloak is enabled"),n=e.data.Keycloak;let a={url:n.Url,realm:n.Realm,clientId:n.ClientId,onLoad:"login-required"};window.keycloak=new Keycloak(a),window.keycloak.init({onLoad:a.onLoad}).then(async o=>{o?console.log("Authenticated"):window.location.reload(),localStorage.setItem("vue-token",window.keycloak.token),localStorage.setItem("vue-refresh-token",window.keycloak.refreshToken),api.updateAuthHeader(),t.mount("#app"),console.log("App mounted with keycloak, current route is ",router.currentRoute.value.fullPath);const l=new URLSearchParams(router.currentRoute.value.fullPath);l.delete("state"),l.delete("code"),l.delete("session_state");const f=decodeURIComponent(l.toString()).replace("/=","/");console.log("App mounted, moving to cleaned route ",f),await router.push(f),setInterval(()=>{window.keycloak.updateToken(70).then(m=>{m?(console.log("Token refreshed"),localStorage.setItem("vue-token",window.keycloak.token),localStorage.setItem("vue-refresh-token",window.keycloak.refreshToken),api.updateAuthHeader()):console.log("Token not refreshed, valid for "+Math.round(window.keycloak.tokenParsed.exp+window.keycloak.timeSkew-new Date().getTime()/1e3)+" seconds")}).catch(()=>{console.log("Failed to refresh token")})},6e4)}).catch(()=>{console.log("Could not connect to Keycloak")})}else t.mount("#app")});
